!function(){var e,t={1851:function(e,t,i){"use strict";i(6337);var r=i(4459);window.ResizeObserver||(window.ResizeObserver=r.do),void 0===Node.prototype.replaceChildren&&(Node.prototype.replaceChildren=function(e){for(;this.lastChild;)this.removeChild(this.lastChild);void 0!==e&&this.append(e)});var n=i(5113),o=i.n(n),s=(i(1703),i(7658),i(615)),a=i.n(s),l=i(972),d=i.n(l);function c(e){try{if(3===e.relatedTarget.nodeType&&e.relatedTarget.parentNode===e.target)return!1}catch(e){}return e.target!==e.relatedTarget}function h(e){return".droppable-"+e.cid}var u={bind(e,t){var i,r,n,s;function l(e){n&&(s&&"none"!==s&&(e.originalEvent.dataTransfer.dropEffect=s),e.preventDefault(),e.stopPropagation())}function u(){r=[],n=null}function p(i,r){if(d().has(t,"eventData")){var o=t.eventData.call(e,n,r);e.trigger(i,n,r,o)}else e.trigger(i,n,r)}if(!(e&&e instanceof o().View))throw new Error("first argument needs to be a Backbone view.");if(!d().isUndefined(t)&&!d().isObject(t))throw new Error("options has to be an object.");i=h(e),t=d().extend({targetSelector:"",canDrop:!0},t),d().isFunction(t.canDrop)||(t.canDrop=d().constant(t.canDrop)),d().has(t,"eventData")&&(d().isFunction(t.eventData)||(t.eventData=d().constant(t.eventData))),u(),e.$el.on("dragenter"+i,(function(i){if(c(i)){0===r.length&&e.trigger("drag:enter"),d().contains(r,i.target)||r.push(i.target);var o=i.originalEvent.dataTransfer,h=function(e,t,i,r){for(var n=t;n&&1===n.nodeType;){if(a().find.matchesSelector(n,i)&&r(n))return n;n=n!==e?n.parentNode:null}return null}(e.el,i.target,t.targetSelector,(function(i){return!!t.canDrop.call(e,i,o)}));n!==h&&(n=h,p("drag:over",o),s=o.dropEffect),l(i)}})),e.$el.on("dragleave"+i,(function(t){c(t)&&0===(r=d().without(r,t.target)).length&&(u(),e.trigger("drag:leave"))})),e.$el.on("dragover"+i,l),e.$el.on("drop"+i,(function(t){n&&(t.stopPropagation(),t.preventDefault(),p("drop",t.originalEvent.dataTransfer)),u(),e.trigger("drag:leave")}))},unbind(e){e.$el.off(h(e))},initDefaultHandler(){["dragenter","dragover","drop"].forEach((e=>{document.addEventListener(e,(e=>{const t=e.dataTransfer;t&&(t.dropEffect="none"),e.preventDefault()}))}))}};i(9714),i(285),i(1637),i(6992),i(3948),i(4765),i(4916),i(7601),i(3123),i(8674);const p=()=>window.URL&&window.URL.createObjectURL?window.URL.createObjectURL:null;var g={setLocation(e){window.location.href=e},getLocation(){return window.location},getPathname(){return window.location.pathname},getSearch(){return window.location.search},getHostname(){return window.location.hostname},open(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"noreferrer";return window.open(e,t||"_blank",i)},getAnchor(){const e=window.location.href;return/#[^#]+$/.test(e)?e.split("#")[1]:""},getNavigatorLang(){return window.navigator.language||null},isCreateObjectURLSupported(){return!!p()},createObjectURL(e){const t=p();if(!t)throw new Error("createObjectURL() not supported");return t(e)},getViewportHeight(){return document.documentElement.clientHeight},getViewportWidth(){return document.documentElement.clientWidth},setTitle(e){document.title=e},setCookie(e){document.cookie=e},getCookie(){return document.cookie},getComputedStyle(e,t){return window.getComputedStyle(e,t)},getInnerWidth(){return window.innerWidth},getInnerHeight(){return window.innerHeight},getCrypto(){return window.crypto},getScrollY(){return window.pageYOffset},scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})},setOnError(e){window.onerror=e},hasPrint(){return"function"==typeof window.print},isBrowserDeprecated(){return!!window.HDF_BROWSER_DEPRECATED},import(e){return import(e)}};const m=function(){this._subscriptionEvents=this._subscriptionEvents||[],this.cid=d().uniqueId(this.cidPrefix),this.initialize.apply(this,arguments)};d().extend(m.prototype,o().Events,{cidPrefix:"o",initialize(){},subscribe(e){if(0===this._subscriptionEvents.length)return()=>{};const t=this._subscriptionEvents.join(" "),i=()=>e(this);return this.on(t,i),i(),()=>this.off(t,i)}}),m.extend=o().Model.extend;var f=m;function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var y=f.extend({initialize(){this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){b(e,t,i[t])}))}return e}({},window.Config)},get(e){return this.config[e]},getBuild(){return this.get("app").version},getAppNamespaceKey(e){return this.get("app").name+"."+e}}),w=new y;i(5306);const v="XXXXX",_=/#.[^:]+(:.*)?$/gm,x=/[/](lnk|share|upl)[/][a-zA-Z0-9.-]{8,}/gm;function E(e){return e.replace(x,`/$1/${v}`).replace(_,"$1")}var O={format:function(e,t,i,r,n){var o,s,a,l="";return"string"==typeof t&&(l=E(t)),o=[e," in ",l,":",i,":",r].join(""),n&&(a=n.stack,s=n.message||"<no message>"),a?[s,a=E(a)].join("\n"):o}},j=(i(4723),[/^\s*$/,/^Java exception was raised during method invocation/,/Content Security Policy directive: "default-src x-apple-ql-id: 'unsafe-inline'"/,/^can't redefine non-configurable property "userAgent"/,/^Cannot read property '_avast_submit' of undefined/,/moz-extension:\/\//,/_submitInjector@/,/^[^\n\r]*\sin\s(undefined)?:0?:\s*$/]),k={isBlacklisted:function(e){return j.some((function(t){return e.match(t)}))}};var S,T={send:function(e){var t=a().Deferred(),i=new XMLHttpRequest;return i.open("POST","/jserror"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.addEventListener("load",(function(){200!==i.status?t.reject():t.resolve()})),i.send("msg="+encodeURIComponent(e)),t.promise()}},P=2048,D=10,C=0,I=!1;function z(){I=!0}function L(e,t,i,r,n){var o,s,a,l="version: "+S;if(!(0===i&&0===r||(C++,I||C>D)))try{if(o=O.format(e,t,i,r,n),k.isBlacklisted(o))return;(s=[l,o].join("\n--\n")).length>P&&(s=s.substring(0,P-4),s+=" […]"),T.send(s).then(null,z)}catch(e){try{a=[l,"error while processing log request: "+e.toString()].join("\n--\n"),T.send(a).then(null,z)}catch(e){}console.error("error while processing log request:",e)}}var $={install:function(){g.setOnError(L),C=0,I=!1,S=w.getBuild()}},M=(i(1550),i(4603),i(8450),Object.freeze({rootPath:"/",appdataPath:"/.appdata",commonFilesPath:"/public",userFilesPath:"/users",teamfoldersPath:"/",csrfTimeout:57e4,statusPages:Object.freeze({ssoError:"sso.error",mailSuccess:"mail.success",mailError:"mail.error",confirmError:"confirm.error",confirmErrorMail:"confirm.error.mail",confirmGone:"confirm.gone",confirmInitGone:"confirm.init-gone"}),userFields:Object.freeze(["alias","account","email","email_login","email_pending","email_verified","descr","language","statusmail","is_admin","is_owner","home","has_2fa"]),fsPermission:Object.freeze({noAccess:"no-access",readOnly:"read-only",readWrite:"read-write"}),authContext:Object.freeze({default:"default",deviceBackups:"deviceBackups"}),doubleOptIn:Object.freeze({confirmEmail:"y",noEmail:"n",uniqueEmail:"u"}),deviceBackups:Object.freeze({statusValid:"valid",statusInvalid:"invalid",statusRunning:"running",trashFolder:".trash"}),mailuploads:Object.freeze({statusValid:"valid",statusInvalid:"invalid",statusExpired:"expired",reportToNone:"none",reportToEmail:"email",maxTtl:863913600}),shareuploads:Object.freeze({shareType:"shareupload",statusValid:"valid",statusInvalid:"invalid",statusExpired:"expired",maxTtl:31536e4,maxUploads:1e5,uploadSizes:[10485760,104857600,524288e3,1073741824,2147483647]}),authRefreshTime:27e5,doubleClickDelay:301,mouseButtons:Object.freeze({left:0,middle:1,right:2}),accountProperty:Object.freeze({onboarding:"onboarding",upsellOfficeSeen:"upsellOfficeSeen"}),snapshotNameMaxLength:35,searchLimit:1e3,viewStates:Object.freeze({initialized:"initialized",rendered:"rendered",removed:"removed"}),sessionStorage:Object.freeze({targetDialogPath:"targetDialogPath",userID:"userID"}),zoneType:Object.freeze({singleZone:"singleZone",publicZone:"publicZone",rootZone:"rootZone"}),addonCategories:Object.freeze({deviceBackups:"cloud_backup",encryption:"encryption",hotline:"hotline_24_7",office:"office",protocols:"protocol_types",storage:"storage",users:"user_package"}),fileCategories:Object.freeze({archive:"archive",audio:"audio",code:"code",directory:"directory",image:"image",office:"office",other:"other",software:"software",video:"video"}),searchTimeRanges:Object.freeze({today:"today",last7Days:"last7Days",last30Days:"last30Days",last90Days:"last90Days",thisYear:"thisYear",lastYear:"lastYear"}),loadState:Object.freeze({loading:"loading",none:"none",error:"error",done:"done",canceled:"canceled"}),selectionStates:Object.freeze({none:0,select:1,deselect:2}),editSectionContexts:Object.freeze({saving:"saving",edit:"edit",save_success:"save_success",save_error:"save_error",cancel:"cancel"}),userIdSalt:"57r470h1dr1v3"})),A=function(){this._registered=[],this._instances={}};d().extend(A.prototype,{register(e,t){if(!d().isString(e)&&!d().isRegExp(e))throw new Error("matcher argument needs to be a string or regex.");if(!d().isFunction(t))throw new Error("factory argument needs to be function.");d().isRegExp(e)||(e=new RegExp("^"+e+"$")),this._registered.push([e,t])},get(e){var t;if(e=e||M.authContext.default,!(t=d().find(this._registered,(function(t){return t[0].test(e)}))))throw new Error('no auth class for context "'+e+'" found.');return this._instances[e]||(this._instances[e]=t[1](e)),this._instances[e]}});var V=new A,F=(i(1058),{urlDecode(e){try{return decodeURIComponent(e)}catch(t){try{return unescape(e)}catch(t){return e}}}}),B=(i(8862),i(3753),{create:"POST",update:"PUT",delete:"DELETE",read:"GET"});function N(e,t,i){var r,n;if(!B[e])throw new Error("Undefined method '"+e+"'.");if(r={type:B[e],dataType:"json"},!i.url&&(r.url=d().result(this,"url"),!r.url))throw new Error("No 'url' attribute or function defined");return t&&d().contains(["create","update","patch"],e)&&(r.contentType="application/json",r.data=JSON.stringify(i.attrs||t.toJSON(i))),n=i.xhr=V.get(t.getContext()).ajax(d().extend(r,i)),t.trigger("request",t,n,i||{}),n}const R=["change","change:selected"].join(" ");var U=o().Model.extend({initialize(e,t){this._context=(t||{}).context||M.authContext.default},getContext(){return this._context},clone(){return new this.constructor(this.attributes,{context:this.getContext()})},sync(){return N.apply(this,arguments)},urlDecode(e){let t=this.get(e);return"string"==typeof t&&(t=F.urlDecode(t)),t},subscribe(e){const t=()=>e(this);return this.on(R,t),t(),()=>this.off(R,t)}});const q=/<a name=([^>]+)>([^<]+)<\/a>/g;var H=U.extend({storageKey:"lang",initialize(e){this._languageFileData=e},setLang(e){if(!e)throw new Error("no language given to set in langModel");const t=this._languageFileData;if(!(e in t))throw new Error(`Language "${e}" is not defined in languageFileData`);if(!Object.keys(t[e]).length)throw new Error(`No keys in language "${e}" defined`);this.language=e,this._collator=new Intl.Collator(e,{numeric:!0}),this.clear({silent:!0}),this.set(t[this.language])},getLang(){return this.language},getLanguages(){return Object.keys(this._languageFileData)},convertLinks(e){return e.replace(q,'<flow-textlink data-event="$1">$2</flow-textlink>')},get(e,t){let i=this.attributes[e];if(!i)return`!${this.language}:${e}`;i=this.convertLinks(i);const r=i.match(/{\d+}/g);if(!r)return i;if(void 0===t)return`MISSING ALL VALUES FOR '${i}'`;let n=t;Array.isArray(n)||(n=[n]);const o=r.map((e=>parseInt(e.substring(1),10))),s=Math.max(...o)+1-n.length;if(s>0)return`MISSING ${s} VALUE(S) FOR '${i}'`;for(let e=0;e<r.length;e++){const t=o[e];void 0!==n&&(i=i.replace(r[e],n[t]))}return i},exists(e){return e in this.attributes},bind(e,t){return this.get.bind(this,e,t)},getInLang(e,t){const i=this._languageFileData;if(!i[t])throw new Error(`language '${t}' not defined in getInLang()`);if(!i[t][e])throw new Error(`key not defined: ${t}/${e}`);return i[t][e]},getCollator(){return this._collator}}),G=new H(JSON.parse('{"de":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"aufsteigend","common.cancel":"Abbrechen","common.close":"Schließen","common.create":"Erstellen","common.download":"Herunterladen","common.error.name.maxLength":"Der Name ist zu lang.","common.error.name.required":"Bitte geben Sie einen Namen ein","common.information":"Mehr Informationen","common.rename":"Umbenennen","common.save":"Speichern","confirm.cancel":"Abbrechen","confirm.ok":"OK","desc":"absteigend","details":"Details","error.401":"Nicht autorisiert","error.403":"Verboten","error.404":"Die Seite, nach der Sie suchen, können wir leider nicht finden.","error.410":"Dieser Freigabe-Link ist leider bereits abgelaufen.","error.500":"Ein interner Fehler ist aufgetreten.","error.503":"Die Funktion steht vorübergehend nicht zur Verfügung.","error.browser.missingFeature":"Diese Funktion wird von ihrem Browser nicht unterstützt.","error.expired":"Die Sitzung ist abgelaufen. Bitte melden Sie sich neu an.","error.generic":"Ein Fehler ist aufgetreten.","error.password":"Das angegebene Freigabe-Passwort ist ungültig.","error.password_empty":"Bitte geben Sie ein Passwort ein.","eu_cookie.url_text":"Mehr Informationen.","file.category.archive":"Archiv","file.category.audio":"Audio","file.category.code":"Code","file.category.directory":"Ordner","file.category.image":"Bild","file.category.office":"Dokument","file.category.other":"Sonstige","file.category.software":"Anwendung","file.category.video":"Video","file.details.datetaken":"Aufnahmedatum","file.details.dimensions":"Abmessungen","file.details.exposuretime":"Belichtungszeit","file.details.fnumber":"Blendenzahl","file.details.focallength":"Brennweite","file.details.iso":"Iso","file.details.location":"Aufnahmeort","file.details.manufacturer":"Kamerahersteller","file.details.model":"Modell","file.error.reservedName":"\\"{0}\\" ist ein reservierter Name","file.name":"Name","file.overlay.create.name.tooltip.exists":"Dieser Name existiert bereits. Bitte geben Sie einen anderen Namen ein.","file.overlay.create.name.tooltip.info":"Unerlaubte Zeichen: /","file.size":"Größe","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Typ","file.type.dir":"Ordner","file.type.fileitem":"Datei","file.update":"Geändert","filemanager.delete.error.all":"Beim Löschen von {0} Element(en) ist ein Fehler aufgetreten.","filemanager.delete.error.one":"\\"{0}\\" konnte nicht gelöscht werden.","filemanager.delete.error.some":"{0} Element(e) wurden gelöscht. Beim Löschen von {1} Element(en) ist ein Fehler aufgetreten.","filemanager.delete.prompt.cancel":"Abbrechen","filemanager.delete.prompt.multi":"Möchten Sie diese {0} Elemente wirklich löschen?","filemanager.delete.prompt.ok":"Löschen","filemanager.delete.prompt.single":"Möchten Sie \\"{0}\\" wirklich löschen?","filemanager.deselectAll":"Auswahl aufheben","filemanager.dnd.invitation":"Dieser Ordner ist leer - ziehen Sie Ihre Dateien und Ordner per drag & drop in dieses Fenster.","filemanager.dnd.invitation.noWrite":"Dieser Ordner ist leer.","filemanager.download_dir.error.404":"Der Ordner \\"{0}\\" existiert nicht mehr.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"Die Datei kann nicht heruntergeladen werden. Bitte wenden sie sich an den Freigabe-Ersteller.","filemanager.download.error.404":"Die Datei \\"{0}\\" existiert nicht mehr","filemanager.download.error.common":"Die Datei \\"{0}\\" konnte nicht heruntergeladen werden","filemanager.downloadAll":"Alles herunterladen","filemanager.downloadSelected":"Auswahl herunterladen","filemanager.encrypted.text":"Dieser Ordner wurde verschlüsselt. Sie können verschlüsselte Daten nur in Ihren HiDrive Apps oder Ihrer HiDrive Software mit einem passenden Schlüssel lesen.","filemanager.image.error":"Beim Laden des Bildes ist ein Fehler aufgetreten.","filemanager.newfolder.button":"Neuer Ordner","filemanager.newfolder.defaultname":"Neuer Ordner","filemanager.newfolder.error.common":"Beim Erstellen des neuen Ordners ist ein Fehler aufgetreten.","filemanager.newFolderDialog.title":"Neuer Ordner","filemanager.noFiles":"Dieser Ordner ist leer.","filemanager.noFiles.writable":"Dieser Ordner ist leer - ziehen Sie Ihre Dateien und Ordner per drag & drop in dieses Fenster.","filemanager.rename.toast.error.exists":"\\"{0}\\" konnte nicht umbenannt werden, der Name ist schon vorhanden.","filemanager.rename.toast.error.general":"\\"{0}\\" konnte nicht umbenannt werden.","filemanager.renameFileDialog.title":"Datei umbenennen","filemanager.renameFolderDialog.title":"Verzeichnis umbenennen","filemanager.selectall":"Alles auswählen","folder.error.required":"Bitte geben Sie einen Ordnernamen ein","folder.error.reservedName":"\\"{0}\\" ist ein reservierter Ordnername","folder.loaderror.common":"Ein Fehler ist beim Laden von {0} aufgetreten.","format.decimal":",","format.thousand":".","header.logout":"Abmelden","imprint.title":"Impressum","imprint.url":"https://static.hidrive.com/web/0101","js.activate":"Aktivieren Sie bitte JavaScript, um HiDrive im Webbrowser benutzen zu können.","js.deprecate.message":"Ihr verwendeter Browser wird nicht mehr unterstützt. Bitte verwenden Sie einen <a name=faq>unterstützten Browser</a>.","js.deprecate.url":"https://static.hidrive.com/web/0030","lang.name":"Deutsch","lang.timeFormat":"d.m.y H:i","login.accept":"Weiter","login.header":"Um die Freigabe zu öffnen wird ein Passwort benötigt","login.placeholder":"Passwort","malware.scan.test.info":"Dateien bis zu einer Größe von 250 Megabyte werden auf Schadsoftware und Viren geprüft. Bitte haben Sie einen Moment Geduld.","moremenu.files.delete":"Löschen","office.open":"Öffnen","office.open.error":"Die Datei \\"{0}\\" konnte nicht geöffnet werden.","pdfview.documenttoolbar.page":"Seite","sharelink.buttons.download":"Download","sharelink.downloads":"verbleibende Anzahl Downloads: {0}","sharelink.ttl":"gültig bis {0} Uhr","sharelink.ttl.timeFormat":"d.m.y H:i","sortFlyout.date":"Datum","sortFlyout.name":"Name","sortFlyout.size":"Größe","sortFlyout.sortedBy":"Sortiert nach","sortFlyout.title":"Sortierung","sortFlyout.type":"Typ","toolbar.item.more":"mehr","toolbar.item.upload":"Hochladen","tuev.text":"TÜV-zertifizierte Datensicherheit in deutschen Rechenzentren (ISO 27001)","upload.detail.cancelAll":"Uploads abbrechen","upload.detail.close":"Schließen","upload.detail.moreuploads":"Weitere Dateien hochladen","upload.detail.retryFailedUpload":"Erneut hochladen","upload.detail.retryFailedUploads":"Fehlgeschlagene erneut hochladen","upload.detail.stats.error":"{0} Fehler!","upload.detail.stats.transfer":"{0} von {1} hochgeladen","upload.detail.title":"Uploads","upload.error.abort":"Abgebrochen","upload.error.exists":"Der Verzeichnisname ist bereits vorhanden.","upload.error.failed":"Fehlgeschlagen","upload.error.network":"Netzwerkfehler","upload.error.quota":"Nicht genügend Speicherplatz","upload.size.calculation":"Wird ermittelt…","upload.status.retry":"Netzwerkfehler: Upload wird wiederholt.","viewmode.fluid":"Galerie","viewmode.list":"Liste","viewmode.tiles":"Grid","viewModeFlyout.title":"Anzeige"},"en":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"ascending","common.cancel":"Cancel","common.close":"Close","common.create":"Create","common.download":"Download","common.error.name.maxLength":"The name is too long.","common.error.name.required":"Please enter a name","common.information":"More information","common.rename":"Rename","common.save":"Save","confirm.cancel":"Cancel","confirm.ok":"OK","desc":"descending","details":"Details","error.401":"Not authorised","error.403":"Forbidden","error.404":"Unfortunately we could not find the site you are looking for.","error.410":"This Share Link has unfortunately already expired.","error.500":"An internal error has occurred.","error.503":"Function temporary unavailable.","error.browser.missingFeature":"This function is not supported by your browser.","error.expired":"The session has expired. Please log in again.","error.generic":"An unexpected error has occurred.","error.password":"The share password entered is invalid.","error.password_empty":"Please enter a password.","eu_cookie.url_text":"Find additional information here.","file.category.archive":"Archive","file.category.audio":"Audio","file.category.code":"Code","file.category.directory":"Folder","file.category.image":"Image","file.category.office":"Document","file.category.other":"Other","file.category.software":"Software","file.category.video":"Video","file.details.datetaken":"Date taken","file.details.dimensions":"Dimensions","file.details.exposuretime":"Exposure time","file.details.fnumber":"f-number","file.details.focallength":"Focal length","file.details.iso":"Iso","file.details.location":"Location","file.details.manufacturer":"Camera manufacturer","file.details.model":"Model","file.error.reservedName":"\\"{0}\\" is a reserved name","file.name":"Name","file.overlay.create.name.tooltip.exists":"This name already exists. Please enter another name.","file.overlay.create.name.tooltip.info":"Invalid characters: /","file.size":"Size","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Type","file.type.dir":"Folder","file.type.fileitem":"File","file.update":"Modified","filemanager.delete.error.all":"An error occurred while deleting {0} item(s).","filemanager.delete.error.one":"\\"{0}\\" could not be deleted.","filemanager.delete.error.some":"{0} item(s) were deleted. An error occurred while deleting {1} item(s).","filemanager.delete.prompt.cancel":"Cancel","filemanager.delete.prompt.multi":"Are you sure you want to delete these {0} items?","filemanager.delete.prompt.ok":"Delete","filemanager.delete.prompt.single":"Are you sure you want to delete \\"{0}\\"?","filemanager.deselectAll":"Cancel selection","filemanager.dnd.invitation":"This folder is empty - drag & drop your files and folders into this window.","filemanager.dnd.invitation.noWrite":"This folder is empty.","filemanager.download_dir.error.404":"The folder \\"{0}\\" no longer exists","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"The file can\'t be downloaded. Please contact the share owner.","filemanager.download.error.404":"The file \\"{0}\\" no longer exists","filemanager.download.error.common":"Download error for file \\"{0}\\"","filemanager.downloadAll":"Download all","filemanager.downloadSelected":"Download selection","filemanager.encrypted.text":"This folder was encrypted. You can only read encrypted data in your HiDrive Apps or your HiDrive software with a suitable key.","filemanager.image.error":"An error occurred while loading the image.","filemanager.newfolder.button":"New folder","filemanager.newfolder.defaultname":"New folder","filemanager.newfolder.error.common":"An error occurred while creating a new folder.","filemanager.newFolderDialog.title":"New folder","filemanager.noFiles":"This folder is empty.","filemanager.noFiles.writable":"This folder is empty - drag & drop your files and folders into this window.","filemanager.rename.toast.error.exists":"\\"{0}\\" could not be renamed. This name already exists.","filemanager.rename.toast.error.general":"\\"{0}\\" could not be renamed.","filemanager.renameFileDialog.title":"Rename file","filemanager.renameFolderDialog.title":"Rename directory","filemanager.selectall":"Select all","folder.error.required":"Please enter a directory name","folder.error.reservedName":"\\"{0}\\" is a reserved folder name","folder.loaderror.common":"An error occurred whilst loading {0}.","format.decimal":".","format.thousand":",","header.logout":"Log out","imprint.title":"Imprint","imprint.url":"https://static.hidrive.com/web/0102","js.activate":"Please activate JavaScript to use HiDrive in your web browser.","js.deprecate.message":"The browser you are using is no longer supported. Please use a <a name=faq>supported browser</a>.","js.deprecate.url":"https://static.hidrive.com/web/0031","lang.name":"English","lang.timeFormat":"m/d/y H:i","login.accept":"Next","login.header":"A password is required in order to access the share.","login.placeholder":"Password","malware.scan.test.info":"Files up to 250 megabytes in size are scanned for malware and viruses. Please wait.","moremenu.files.delete":"Delete","office.open":"Open","office.open.error":"The file \\"{0}\\" could not be opened.","pdfview.documenttoolbar.page":"Page","sharelink.buttons.download":"Download","sharelink.downloads":"Remaining downloads: {0}","sharelink.ttl":"Valid until: {0}","sharelink.ttl.timeFormat":"m/d/y H:i","sortFlyout.date":"Date","sortFlyout.name":"Name","sortFlyout.size":"Size","sortFlyout.sortedBy":"Sorted by","sortFlyout.title":"Sorting","sortFlyout.type":"Type","toolbar.item.more":"more","toolbar.item.upload":"Upload","tuev.text":"TÜV-certified data security in German data centres (ISO 27001)","upload.detail.cancelAll":"Abort all uploads","upload.detail.close":"Close","upload.detail.moreuploads":"Upload more files","upload.detail.retryFailedUpload":"Retry failed upload","upload.detail.retryFailedUploads":"Retry failed uploads","upload.detail.stats.error":"{0} errors!","upload.detail.stats.transfer":"{0} of {1} uploaded","upload.detail.title":"Uploads","upload.error.abort":"Cancelled","upload.error.exists":"The directory name already exists.","upload.error.failed":"Failed","upload.error.network":"Network error","upload.error.quota":"Insufficient storage space.","upload.size.calculation":"Searching…","upload.status.retry":"Network error: retrying upload","viewmode.fluid":"Gallery","viewmode.list":"List","viewmode.tiles":"Grid","viewModeFlyout.title":"View"},"es":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"ascendente","common.cancel":"Cancelar","common.close":"Cerrar","common.create":"Crear","common.download":"Descargar","common.error.name.maxLength":"El nombre es muy largo.","common.error.name.required":"Por favor, introduzca un nombre","common.information":"Más información","common.rename":"Cambiar nombre","common.save":"Guardar","confirm.cancel":"Cancelar","confirm.ok":"OK","desc":"descendente","details":"Detalles","error.401":"No autorizado","error.403":"Prohibido","error.404":"No hemos podido encontrar la página que buscas.","error.410":"Este enlace de descarga ya ha caducado.","error.500":"Se ha producido un error interno.","error.503":"Esta función no está disponible temporalmente.","error.browser.missingFeature":"Esta función no está soportada por su navegador.","error.expired":"La sesión ha expirado, vuelve a conectarte de nuevo.","error.generic":"Se ha producido un error.","error.password":"La contraseña de descarga introducida no es válida.","error.password_empty":"Introduce una contraseña.","eu_cookie.url_text":"Más información.","file.category.archive":"Archivo","file.category.audio":"Audio","file.category.code":"Código","file.category.directory":"Carpeta","file.category.image":"Imagen","file.category.office":"Documento","file.category.other":"Otros","file.category.software":"Software","file.category.video":"Video","file.details.datetaken":"Fecha","file.details.dimensions":"Dimensiones","file.details.exposuretime":"Tiempo de exposición","file.details.fnumber":"Diafragma","file.details.focallength":"Distancia focal","file.details.iso":"ISO","file.details.location":"Ubicación","file.details.manufacturer":"Fabricante de la cámara","file.details.model":"Modelo","file.error.reservedName":"\\"{0}\\" es un nombre reservado","file.name":"Nombre","file.overlay.create.name.tooltip.exists":"Este nombre ya existe. Por favor, introduzca otro nombre.","file.overlay.create.name.tooltip.info":"Caracteres no válidos: /","file.size":"Tamaño","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Tipo","file.type.dir":"Carpeta","file.type.fileitem":"Archivo","file.update":"Cambiado","filemanager.delete.error.all":"Se ha producido un error al borrar {0} elementos.","filemanager.delete.error.one":"No se ha podido borrar \\"{0}\\".","filemanager.delete.error.some":"Se han borrado {0} elementos. Se ha producido un error al borrar {1} elementos.","filemanager.delete.prompt.cancel":"Cancelar","filemanager.delete.prompt.multi":"¿Está seguro de que quiere borrar estos {0} elementos?","filemanager.delete.prompt.ok":"Borrar","filemanager.delete.prompt.single":"¿Está seguro de que quiere borrar \\"{0}\\"?","filemanager.deselectAll":"Cancelar la selección","filemanager.dnd.invitation":"Esta carpeta está vacía - arrastre y suelte sus archivos y carpetas en esta ventana.","filemanager.dnd.invitation.noWrite":"Esta carpeta está vacía.","filemanager.download_dir.error.404":"La carpeta \\"{0}\\" ya no existe.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"No se puede descargar el archivo. Póngase en contacto con el creador de la publicación.","filemanager.download.error.404":"El archivo \\"{0}\\" ya no existe","filemanager.download.error.common":"No se ha podido descargar el archivo \\"{0}\\".","filemanager.downloadAll":"Descargar todo","filemanager.downloadSelected":"Descargar seleccionados","filemanager.encrypted.text":"Esta carpeta estaba encriptada. Sólo se pueden leer datos cifrados en las aplicaciones HiDrive o en el software HiDrive con una clave adecuada.","filemanager.image.error":"Se produjo un error al cargar la imagen.","filemanager.newfolder.button":"Nueva carpeta","filemanager.newfolder.defaultname":"Nueva carpeta","filemanager.newfolder.error.common":"Se ha producido un error al crear la carpeta nueva.","filemanager.newFolderDialog.title":"Nueva carpeta","filemanager.noFiles":"Esta carpeta está vacía.","filemanager.noFiles.writable":"Esta carpeta está vacía - arrastre y suelte sus archivos y carpetas en esta ventana.","filemanager.rename.toast.error.exists":"No se ha podido cambiar el nombre de \\"{0}\\", el nombre ya está siendo utilizado.","filemanager.rename.toast.error.general":"No se ha podido cambiar el nombre de \\"{0}\\".","filemanager.renameFileDialog.title":"Cambiar el nombre del archivo","filemanager.renameFolderDialog.title":"Cambiar el nombre del directorio","filemanager.selectall":"Seleccionar todo","folder.error.required":"Por favor, introduzca un nombre de directorio","folder.error.reservedName":"\\"{0}\\" es un nombre de carpeta reservado","folder.loaderror.common":"Se ha producido un error al cargar desde {0}.","format.decimal":",","format.thousand":".","header.logout":"Cerrar sesión","imprint.title":"Datos identificativos","imprint.url":"https://static.hidrive.com/web/0103","js.activate":"Active JavaScript para poder utilizar HiDrive en su navegador web.","js.deprecate.message":"Su navegador ya no es compatible. Por favor, utilice un <a name=faq>navegador compatible</a>.","js.deprecate.url":"https://static.hidrive.com/web/0032","lang.name":"Español","lang.timeFormat":"d/m/y H:i","login.accept":"Seguir","login.header":"Para abrir el archivo compartido necesitas una contraseña.","login.placeholder":"Contraseña","malware.scan.test.info":"Los archivos de hasta 250 megabytes se analizan en busca de malware y virus. Por favor, espere.","moremenu.files.delete":"Borrar","office.open":"Abrir","office.open.error":"El archivo \\"{0}\\" no pudo ser abierto.","pdfview.documenttoolbar.page":"Página","sharelink.buttons.download":"Descarga","sharelink.downloads":"Descargas restantes: {0}","sharelink.ttl":"válido hasta el {0}","sharelink.ttl.timeFormat":"d/m/y H:i","sortFlyout.date":"Fecha","sortFlyout.name":"Nombre","sortFlyout.size":"Tamaño","sortFlyout.sortedBy":"Ordenado por","sortFlyout.title":"Separación","sortFlyout.type":"Tipo","toolbar.item.more":"más","toolbar.item.upload":"Cargar","tuev.text":"Seguridad de datos en centros de datos alemanes certificados por el TÜV (ISO 27001).","upload.detail.cancelAll":"Cancelar cargas","upload.detail.close":"Cerrar","upload.detail.moreuploads":"Subir más archivos","upload.detail.retryFailedUpload":"Volver a cargar","upload.detail.retryFailedUploads":"Volver a cargar las fallidas","upload.detail.stats.error":"{0} errores!","upload.detail.stats.transfer":"{0} de {1} cargados","upload.detail.title":"Uploads","upload.error.abort":"Cancelado","upload.error.exists":"El nombre de directorio ya existe.","upload.error.failed":"Fallida","upload.error.network":"Error de red","upload.error.quota":"No hay suficiente espacio.","upload.size.calculation":"Enviando…","upload.status.retry":"Error de red: se va a repetir la carga.","viewmode.fluid":"Galería","viewmode.list":"Lista","viewmode.tiles":"Cuadrícula","viewModeFlyout.title":"Vista general"},"fr":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"croissant","common.cancel":"Annuler","common.close":"Fermer","common.create":"Créer","common.download":"Télécharger","common.error.name.maxLength":"Le nom est trop long.","common.error.name.required":"Veuillez saisir un nom","common.information":"Plus d\'informations","common.rename":"Renommer","common.save":"Sauvegarder","confirm.cancel":"Annuler","confirm.ok":"Oui","desc":"décroissant","details":"Détails","error.401":"Non autorisé","error.403":"Interdit","error.404":"La page que vous cherchez n\'a pas pu être trouvée.","error.410":"Le lien de partage n\'est plus valide.","error.500":"Une erreur interne s\'est produite.","error.503":"La fonction n\'est provisoirement pas disponible.","error.browser.missingFeature":"Cette fonction n\'est pas prise en charge par votre navigateur.","error.expired":"La session a expiré. Veuillez vous connecter de nouveau.","error.generic":"Une erreur est survenue.","error.password":"Le mot de passe saisi pour le partage est invalide.","error.password_empty":"Veuillez entrer un mot de passe.","eu_cookie.url_text":"Plus d\'infos.","file.category.archive":"Archives","file.category.audio":"Audio","file.category.code":"Code","file.category.directory":"Dossier","file.category.image":"Image","file.category.office":"Document","file.category.other":"Autre","file.category.software":"Logiciels","file.category.video":"Vidéo","file.details.datetaken":"Date","file.details.dimensions":"Dimensions","file.details.exposuretime":"Temps d\'exposition","file.details.fnumber":"Diaphragme","file.details.focallength":"Distance focale","file.details.iso":"ISO","file.details.location":"Emplacement","file.details.manufacturer":"Fabricant de la caméra","file.details.model":"Modèle","file.error.reservedName":"\\"{0}\\" est un nom réservé","file.name":"Nom","file.overlay.create.name.tooltip.exists":"Ce nom existe déjà. Veuillez entrer un autre nom.","file.overlay.create.name.tooltip.info":"Caractères non valides : /","file.size":"Taille","file.size.unit.Bytes":"o","file.size.unit.GB":"Go","file.size.unit.KB":"Ko","file.size.unit.MB":"Mo","file.size.unit.PB":"Po","file.size.unit.TB":"To","file.type":"Type","file.type.dir":"Dossier","file.type.fileitem":"Fichier","file.update":"Modifié","filemanager.delete.error.all":"Une erreur est survenue lors de l\'effacement de « {0} ».","filemanager.delete.error.one":"\\"{0}\\" n\'a pas pu être supprimé.","filemanager.delete.error.some":"« {0} »  éléments ont été effacés. Une erreur est survenue lors de l\'effacement de « {1} ».","filemanager.delete.prompt.cancel":"Annuler","filemanager.delete.prompt.multi":"Souhaitez-vous réellement effacer {0} éléments ?","filemanager.delete.prompt.ok":"Effacer","filemanager.delete.prompt.single":"Souhaitez-vous réellement effacer « {0} » ?","filemanager.deselectAll":"Annuler la sélection","filemanager.dnd.invitation":"Ce dossier est vide - glissez-déposez vos fichiers et dossiers dans cette fenêtre.","filemanager.dnd.invitation.noWrite":"Ce dossier est vide.","filemanager.download_dir.error.404":"Le dossier « {0} » n\'existe plus.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"Le fichier ne peut pas être téléchargé. Veuillez contacter le créateur du partage.","filemanager.download.error.404":"Le fichier « {0} » n\'existe plus.","filemanager.download.error.common":"Le fichier « {0} » n\'a pas pu être téléchargé","filemanager.downloadAll":"Tout télécharger","filemanager.downloadSelected":"Télécharger la sélection","filemanager.encrypted.text":"Ce dossier était crypté. Vous ne pouvez lire les données cryptées dans vos applications HiDrive ou votre logiciel HiDrive qu\'avec une clé appropriée.","filemanager.image.error":"Une erreur s\'est produite lors du chargement de l\'image.","filemanager.newfolder.button":"Nouveau dossier","filemanager.newfolder.defaultname":"Nouveau dossier","filemanager.newfolder.error.common":"Une erreur est survenue lors de la création du nouveau dossier.","filemanager.newFolderDialog.title":"Nouveau dossier","filemanager.noFiles":"Ce dossier est vide.","filemanager.noFiles.writable":"Ce dossier est vide - glissez-déposez vos fichiers et dossiers dans cette fenêtre.","filemanager.rename.toast.error.exists":"\\"{0}\\" n\'a pas pu être renommé, le nom existe déjà.","filemanager.rename.toast.error.general":"\\"{0}\\" n\'a pas pu être renommé.","filemanager.renameFileDialog.title":"Renommer un fichier","filemanager.renameFolderDialog.title":"Renommer le répertoire","filemanager.selectall":"Tout sélectionner","folder.error.required":"Veuillez entrer un nom de répertoire","folder.error.reservedName":"\\"{0}\\" est un nom de dossier réservé","folder.loaderror.common":"Une erreur s\'est produite lors de la charge de {0}.","format.decimal":",","format.thousand":".","header.logout":"Déconnexion","imprint.title":"Mentions légales","imprint.url":"https://static.hidrive.com/web/0104","js.activate":"Activez JavaScript afin de pouvoir utiliser HiDrive dans votre navigateur web.","js.deprecate.message":"Le navigateur que vous utilisez n\'est plus pris en charge. Veuillez utiliser un navigateur <a name=faq>supporté</a>.","js.deprecate.url":"https://static.hidrive.com/web/0033","lang.name":"Français","lang.timeFormat":"d/m/y H:i","login.accept":"Suivant","login.header":"Vous avez besoin du mot de passe pour ouvrir les fichiers partagés","login.placeholder":"Mot de passe","malware.scan.test.info":"Les fichiers d\'une taille maximale de 250 mégaoctets sont analysés pour détecter les logiciels malveillants et les virus. Veuillez patienter.","moremenu.files.delete":"Supprimer","office.open":"Ouvrir","office.open.error":"Le fichier \\"{0}\\" n\'a pas pu être ouvert.","pdfview.documenttoolbar.page":"Page","sharelink.buttons.download":"Télécharge","sharelink.downloads":"Nombre de téléchargements restants : {0}","sharelink.ttl":"valide jusqu\'au {0}","sharelink.ttl.timeFormat":"d/m/y H:i","sortFlyout.date":"Date","sortFlyout.name":"Nom","sortFlyout.size":"Taille","sortFlyout.sortedBy":"Présentation par","sortFlyout.title":"Tri","sortFlyout.type":"Type","toolbar.item.more":"plus","toolbar.item.upload":"Charger","tuev.text":"Sécurité des données dans des centres de calcul allemands, certifiée par TÜV (ISO 27001).","upload.detail.cancelAll":"Annuler les chargements","upload.detail.close":"Fermer","upload.detail.moreuploads":"Charger davantage de fichiers","upload.detail.retryFailedUpload":"Réessayer l\'importation","upload.detail.retryFailedUploads":"Essayez à nouveau","upload.detail.stats.error":"{0} erreurs!","upload.detail.stats.transfer":"{0} sur {1} chargés","upload.detail.title":"Uploads","upload.error.abort":"Annulé","upload.error.exists":"Le nom de répertoire est déjà utilisé.","upload.error.failed":"Échec","upload.error.network":"Erreur réseau","upload.error.quota":"Espace insuffisant.","upload.size.calculation":"Envoi en cours…","upload.status.retry":"Erreur réseau: sera répétée.","viewmode.fluid":"Galerie","viewmode.list":"Liste","viewmode.tiles":"Grille","viewModeFlyout.title":"Vue"},"nl":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"oplopend","common.cancel":"Afbreken","common.close":"Sluiten","common.create":"Aanmaken","common.download":"Downloaden","common.error.name.maxLength":"De naam is te lang.","common.error.name.required":"Voer een naam in","common.information":"Meer informatie","common.rename":"Hernoemen","common.save":"Opslaan","confirm.cancel":"Afbreken","confirm.ok":"OK","desc":"aflopend","details":"Details","error.401":"Geen autorisatie","error.403":"Verboden","error.404":"We kunnen de pagina die je zoekt, niet vinden.","error.410":"Deze sharelink is niet meer geldig.","error.500":"Er is een interne fout opgetreden.","error.503":"Deze functie is tijdelijk niet beschikbaar.","error.browser.missingFeature":"Deze functie wordt niet ondersteund door uw browser.","error.expired":"De sessie is afgelopen. Je kunt nu opnieuw inloggen.","error.generic":"Er is een fout opgetreden.","error.password":"Het ingevoerde vrijgave-wachtwoord is ongeldig.","error.password_empty":"Voer een wachtwoord in.","eu_cookie.url_text":"Meer informatie.","file.category.archive":"Archief","file.category.audio":"Audio","file.category.code":"Code","file.category.directory":"Map","file.category.image":"Beeld","file.category.office":"Document","file.category.other":"Andere","file.category.software":"Software","file.category.video":"Video","file.details.datetaken":"Opnamedatum","file.details.dimensions":"Afmetingen","file.details.exposuretime":"Sluitertijd","file.details.fnumber":"Diafragma","file.details.focallength":"Brandpuntsafstand","file.details.iso":"ISO","file.details.location":"Locatie","file.details.manufacturer":"Cameramerk","file.details.model":"Model","file.error.reservedName":"\\"{0}\\" is een gereserveerde naam","file.name":"Naam","file.overlay.create.name.tooltip.exists":"Deze naam bestaat al. Voer een andere naam in.","file.overlay.create.name.tooltip.info":"Ongeldige tekens: /","file.size":"Grootte","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Type","file.type.dir":"Map","file.type.fileitem":"Bestand","file.update":"Gewijzigd","filemanager.delete.error.all":"Bij het verwijderen van {0} elementen is een fout opgetreden.","filemanager.delete.error.one":"\\"{0}\\" kon niet worden verwijderd.","filemanager.delete.error.some":"Er zijn {0} elementen verwijderd. Bij het verwijderen van {1} elementen is een fout opgetreden.","filemanager.delete.prompt.cancel":"Annuleren","filemanager.delete.prompt.multi":"Wil je deze {0} elementen verwijderen?","filemanager.delete.prompt.ok":"Verwijderen","filemanager.delete.prompt.single":"Wil je \\"{0}\\" verwijderen?","filemanager.deselectAll":"Keuze annuleren","filemanager.dnd.invitation":"Deze map is leeg - sleep uw bestanden en mappen naar dit venster.","filemanager.dnd.invitation.noWrite":"Deze map is leeg.","filemanager.download_dir.error.404":"De map \\"{0}\\" bestaat niet meer.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"Het bestand kan niet worden gedownload. Neem contact op met de maker van de uitgave.","filemanager.download.error.404":"Het bestand \\"{0}\\" bestaat niet meer.","filemanager.download.error.common":"Het bestand \\"{0}\\" kon niet worden gedownload.","filemanager.downloadAll":"Alles downloaden","filemanager.downloadSelected":"Geselecteerde bestanden downloaden","filemanager.encrypted.text":"Deze map is versleuteld. U kunt versleutelde gegevens alleen met een geschikte sleutel in uw HiDrive Apps of uw HiDrive software lezen.","filemanager.image.error":"Er is een fout opgetreden tijdens het laden van de afbeelding.","filemanager.newfolder.button":"Nieuwe map","filemanager.newfolder.defaultname":"Nieuwe map","filemanager.newfolder.error.common":"Bij het aanmaken van de nieuwe map is een fout opgetreden.","filemanager.newFolderDialog.title":"Nieuwe map","filemanager.noFiles":"Deze map is leeg.","filemanager.noFiles.writable":"Deze map is leeg - sleep uw bestanden en mappen naar dit venster.","filemanager.rename.toast.error.exists":"\\"{0}\\" kon niet worden hernoemd. De naam is al in gebruik.","filemanager.rename.toast.error.general":"\\"{0}\\" kon niet worden hernoemd.","filemanager.renameFileDialog.title":"Bestand hernoemen","filemanager.renameFolderDialog.title":"Map hernoemen","filemanager.selectall":"Alles selecteren","folder.error.required":"Geef een mapnaam in","folder.error.reservedName":"\\"{0}\\" is een gereserveerde mapnaam","folder.loaderror.common":"Bij het laden van {0} is iets foutgegaan.","format.decimal":",","format.thousand":".","header.logout":"Afmelden","imprint.title":"Impressum","imprint.url":"https://static.hidrive.com/web/0105","js.activate":"Activeer JavaScript in je browser om HiDrive te gebruiken.","js.deprecate.message":"Uw browser wordt niet langer ondersteund. Gebruik een <a name=faq>ondersteunde browser</a>.","js.deprecate.url":"https://static.hidrive.com/web/0034","lang.name":"Nederlands","lang.timeFormat":"d-m-y H:i","login.accept":"Verder","login.header":"Voor deze sharelink heb je een wachtwoord nodig","login.placeholder":"Wachtwoord","malware.scan.test.info":"Bestanden tot 250 megabyte worden gescand op malware en virussen. Een ogenblik geduld alstublieft.","moremenu.files.delete":"Verwijderen","office.open":"Open","office.open.error":"Het bestand \\"{0}\\" kon niet worden geopend.","pdfview.documenttoolbar.page":"Pagina","sharelink.buttons.download":"Downloaden","sharelink.downloads":"Resterend aantal downloads: {0}","sharelink.ttl":"Geldig tot: {0}","sharelink.ttl.timeFormat":"d-m-y H:i","sortFlyout.date":"Datum","sortFlyout.name":"Naam","sortFlyout.size":"Grootte","sortFlyout.sortedBy":"Gesorteerd op","sortFlyout.title":"Sorteer","sortFlyout.type":"Type","toolbar.item.more":"meer","toolbar.item.upload":"Uploaden","tuev.text":"ISO-gecertificeerde databeveiliging in Duitse datacentra (ISO 27001).","upload.detail.cancelAll":"Uploaden afbreken","upload.detail.close":"Sluiten","upload.detail.moreuploads":"Meer bestanden uploaden","upload.detail.retryFailedUpload":"Opnieuw uploaden","upload.detail.retryFailedUploads":"Probeer mislukte uploads opnieuw","upload.detail.stats.error":"{0} fout(en)!","upload.detail.stats.transfer":"{0} van {1} geüpload","upload.detail.title":"Uploads","upload.error.abort":"Geannuleerd","upload.error.exists":"Deze mapnaam bestaat al.","upload.error.failed":"Mislukt","upload.error.network":"Netwerkfout","upload.error.quota":"Niet genoeg opslagruimte beschikbaar","upload.size.calculation":"Wordt berekend…","upload.status.retry":"Netwerkfout: upload wordt opnieuw uitgevoerd.","viewmode.fluid":"Galerij","viewmode.list":"Lijst","viewmode.tiles":"Rooster","viewModeFlyout.title":"Weergave"},"sv":{"app.tabtitle":"HiDrive","app.title":"HiDrive","asc":"stigande","common.cancel":"Avbryt","common.close":"Stäng","common.create":"Skapa","common.download":"Ladda ner","common.error.name.maxLength":"Namnet är för långt.","common.error.name.required":"Ange ett namn","common.information":"Mer information","common.rename":"Byt namn på","common.save":"Spara","confirm.cancel":"Avbryt","confirm.ok":"OK","desc":"fallande","details":"Detaljer","error.401":"Obehörig","error.403":"Förbjudet","error.404":"Tyvärr kunde vi inte hitta den sida du letar efter.","error.410":"Tyvärr har denna delningslänk redan löpt ut.","error.500":"Ett internt fel har inträffat.","error.503":"Funktionen är för tillfället inte tillgänglig.","error.browser.missingFeature":"Denna funktion stöds inte av din webbläsare.","error.expired":"Sessionen har avslutats. Logga in på nytt.","error.generic":"Ett fel har inträffat.","error.password":"Det angivna lösenordet för delning är ogiltigt.","error.password_empty":"Ange ditt lösenord.","eu_cookie.url_text":"Mer information.","file.category.archive":"Arkiv","file.category.audio":"Ljud","file.category.code":"Kod","file.category.directory":"Mapp","file.category.image":"Bild","file.category.office":"Dokument","file.category.other":"Övriga","file.category.software":"Programvara","file.category.video":"Video","file.details.datetaken":"Datum för inspelning","file.details.dimensions":"Mått","file.details.exposuretime":"Exponeringstid","file.details.fnumber":"Bländartal","file.details.focallength":"Brännvidd","file.details.iso":"Iso","file.details.location":"Plats för inspelning","file.details.manufacturer":"Kameratillverkare","file.details.model":"Modell","file.error.reservedName":"\\"{0}\\" är ett reserverat namn","file.name":"Namn","file.overlay.create.name.tooltip.exists":"Detta namn finns redan. Ange ett annat namn.","file.overlay.create.name.tooltip.info":"Följande tecken är inte tillåtna: /","file.size":"Storlek","file.size.unit.Bytes":"B","file.size.unit.GB":"GB","file.size.unit.KB":"KB","file.size.unit.MB":"MB","file.size.unit.PB":"PB","file.size.unit.TB":"TB","file.type":"Typ","file.type.dir":"Mapp","file.type.fileitem":"Fil","file.update":"Ändrad","filemanager.delete.error.all":"Ett fel inträffade när du tog bort {0} objekt.","filemanager.delete.error.one":"\\"{0}\\" kunde inte tas bort.","filemanager.delete.error.some":"{0} objekt har tagits bort. Ett fel inträffade när du tog bort {1} objekt.","filemanager.delete.prompt.cancel":"Avbryt","filemanager.delete.prompt.multi":"Vill du verkligen ta bort dessa {0} objekt?","filemanager.delete.prompt.ok":"Radera","filemanager.delete.prompt.single":"Vill du verkligen ta bort \\"{0}\\"?","filemanager.deselectAll":"Avbryt val","filemanager.dnd.invitation":"Denna mapp är tom – dra och släpp dina filer och mappar till detta fönster.","filemanager.dnd.invitation.noWrite":"Denna mapp är tom.","filemanager.download_dir.error.404":"Mappen \\"{0}\\" finns inte längre.","filemanager.download.archiveprefix":"HiDrive","filemanager.download.error.403":"Filen kan inte laddas ner. Vänligen kontakta den som har skapat publikationen.","filemanager.download.error.404":"Filen \\"{0}\\" finns inte längre.","filemanager.download.error.common":"Filen \\"{0}\\" kunde inte laddas ner.","filemanager.downloadAll":"Ladda ner allt","filemanager.downloadSelected":"Ladda ner urval","filemanager.encrypted.text":"Denna mapp har krypterats. Du kan endast läsa krypterade data i dina HiDrive-appar eller din HiDrive-programvara med rätt nyckel.","filemanager.image.error":"Ett fel inträffade när bilden laddades.","filemanager.newfolder.button":"Ny mapp","filemanager.newfolder.defaultname":"Ny mapp","filemanager.newfolder.error.common":"Ett fel inträffade när den nya mappen skapades.","filemanager.newFolderDialog.title":"Ny mapp","filemanager.noFiles":"Denna mapp är tom.","filemanager.noFiles.writable":"Denna mapp är tom – dra och släpp dina filer och mappar till detta fönster.","filemanager.rename.toast.error.exists":"\\"{0}\\" kunde inte byta namn, namnet finns redan.","filemanager.rename.toast.error.general":"\\"{0}\\" kunde inte byta namn.","filemanager.renameFileDialog.title":"Byt namn på fil","filemanager.renameFolderDialog.title":"Byt namn på katalogen","filemanager.selectall":"Välj allt","folder.error.required":"Ange ett mappnamn","folder.error.reservedName":"\\"{0}\\" är ett reserverat mappnamn","folder.loaderror.common":"Ett fel inträffade när {0} laddades.","format.decimal":",","format.thousand":".","header.logout":"Logga ut","imprint.title":"Imprint","imprint.url":"https://static.hidrive.com/web/0107","js.activate":"Aktivera JavaScript, för att kunna använda HiDrive i webbläsaren.","js.deprecate.message":"Den webbläsare som du använder stöds inte längre. Använd en <a name=faq>webbläsare som stöds</a>.","js.deprecate.url":"https://static.hidrive.com/web/0037","lang.name":"Svenska","lang.timeFormat":"d.m.y H:i","login.accept":"Fortsätt","login.header":"Det krävs ett lösenord för att öppna delningen.","login.placeholder":"Lösenord","malware.scan.test.info":"Filer upp till 250 megabyte skannas efter skadlig kod och virus. Vänligen vänta.","moremenu.files.delete":"Radera","office.open":"Öppna","office.open.error":"Filen \\"{0}\\" kunde inte öppnas.","pdfview.documenttoolbar.page":"Sidan","sharelink.buttons.download":"Ladda ner","sharelink.downloads":"återstående antal nedladdningar: {0}","sharelink.ttl":"giltigt till klockan {0}","sharelink.ttl.timeFormat":"d.m.y H:i","sortFlyout.date":"Datum","sortFlyout.name":"Namn","sortFlyout.size":"Storlek","sortFlyout.sortedBy":"Sorterat efter","sortFlyout.title":"Sortering","sortFlyout.type":"Typ","toolbar.item.more":"mer","toolbar.item.upload":"Ladda upp","tuev.text":"TÜV-certifierad datasäkerhet i tyska datacenter (ISO 27001)","upload.detail.cancelAll":"Avbryt uppladdningar","upload.detail.close":"Stäng","upload.detail.moreuploads":"Ladda upp fler dokument","upload.detail.retryFailedUpload":"Ladda upp igen","upload.detail.retryFailedUploads":"Ladda upp misslyckade uppladdningar igen","upload.detail.stats.error":"{0} Fel!","upload.detail.stats.transfer":"{0} laddades upp av {1}","upload.detail.title":"Uppladdningar","upload.error.abort":"Avbruten","upload.error.exists":"Mappnamnet finns redan.","upload.error.failed":"Misslyckad","upload.error.network":"Nätverksfel","upload.error.quota":"Inte tillräckligt med lagringsutrymme","upload.size.calculation":"Skickas in...","upload.status.retry":"Nätverksfel: uppladdningen görs om.","viewmode.fluid":"Galleri","viewmode.list":"Lista","viewmode.tiles":"Rutnät","viewModeFlyout.title":"Visa"}}'));var W={detect(e,t){var i,r=g.getNavigatorLang();return r&&(r=-1!==(i=r).indexOf("-")?i.split("-")[0]:i,-1!==e.indexOf(r))?r:t&&-1!==e.indexOf(t)?t:e[0]}};i(5827);function K(e,t){return{result:e,reason:t}}function Y(){return K(!0,null)}function X(e){return K(!1,e)}var Z={editUser(e){if(!e)throw new Error("userModel required for can.editUser");if(w.get("hasExternalAccountManagement"))return X("external_feature");return V.get().getUser().is_owner||V.get().isAdmin()&&!e.get("is_owner")||e.isCurrentUser()?Y():X("permission")},inviteUser(e){if(!e)throw new Error("currentUserModel required for can.inviteUser");return w.get("hasExternalAccountManagement")?X("external_feature"):V.get().isAdmin()?e.get("email")?Y():X("no_email"):X("permission")},deleteUser(e){if(!e)throw new Error("userModel required for can.deleteUser");return w.get("hasExternalAccountManagement")?X("external_feature"):V.get().isAdmin()?e.isCurrentUser()?X("conflict"):Y():X("permission")},createAdmin(e){if("number"!=typeof e)throw new Error("adminCount Number is required for can.createAdmin");return w.get("hasExternalAccountManagement")?X("external_feature"):V.get().isAdmin()?e>=V.get().getFeatures().admins_max?X("max_count"):Y():X("permission")},editAdminFlag(){return V.get().isAdmin()?w.get("hasExternalAccountManagement")?X("external_feature"):Y():X("permission")},editAlias(){return V.get().isAdmin()?w.get("hasExternalAccountManagement")?X("external_feature"):Y():X("permission")},editPermissions(){return V.get().isAdmin()?V.get().isChrooted()?X("chrooted"):Y():X("permission")},showProtocols(){return w.get("hasProtocols")?V.get().getFeatures().protocols.length?Y():X("no_protocol_feature"):X("no_protocol_configured")},editProtocols(){return V.get().isAdmin()?w.get("hasProtocols")?V.get().getFeatures().protocols.length?Y():X("no_protocol_feature"):X("no_protocol_configured"):X("permission")},managePassword(e){return e.isCurrentUser()?w.get("hasExternalAccountManagement")?X("external_feature"):Y():X("not_current_user")},manageSshKeys(){return w.get("hasProtocols")?Y():X("no_protocols_feature")},twoFA(e){return e.isCurrentUser()?e.get("has_2fa")?Y():w.get("has2FA")?V.get().getFeatures().rollout.indexOf("no2fa")>=0?X("no_rollout"):Y():X("no_2fa_feature"):X("not_current_user")},manageTeamfolder(){return V.get().getUser().is_admin?Y():X("permission")},manageMailUploads(){return w.get("hasMailupload")?V.get().getFeatures().mailupload_enabled?Y():X("no_mailupload_feature"):X("client_has_no_mailupload")},manageShareUploads(){return w.get("hasShareuploads")?V.get().getFeatures().shareupload_enabled?Y():X("no_shareupload_feature"):X("client_has_no_shareupload")},useOffice(){return w.get("hasOffice")?Y():X("no_office_config")},editOffice(){const e=this.useOffice();return e.result?V.get().getFeatures().wopi?Y():X("no_office_edit_feature"):X(e.reason)},sendMails(e){return e?e.hasValidEmail()?Y():X("no_valid_email"):X("no_user_model")},orderAddons(){return w.get("hasAddons")?V.get().getUser().is_owner?Y():X("no_owner"):X("client_has_no_addons")}};i(6977);const J={d(e){return te(e.getDate())},j(e){return e.getDate()},m(e){return te(e.getMonth()+1)},F(e){return G.get("lang.monthsList.long").split(",")[e.getMonth()]},M(e){return G.get("lang.monthsList.short").split(",")[e.getMonth()]},n(e){return e.getMonth()+1},Y(e){return e.getFullYear()},y(e){return(""+e.getFullYear()).substr(2)},a(e){return e.getHours()<12?"am":"pm"},A(e){return e.getHours()<12?"AM":"PM"},g(e){return e.getHours()%12||12},G(e){return e.getHours()},h(e){return te(e.getHours()%12||12)},H(e){return te(e.getHours())},i(e){return te(e.getMinutes())},s(e){return te(e.getSeconds())}},Q=/^(\d{4})[:-](\d{2})[:-](\d{2})[\sT]?(\d{2}):(\d{2}):(\d{2})$/,ee={[M.fileCategories.archive]:()=>G.get("file.category.archive"),[M.fileCategories.audio]:()=>G.get("file.category.audio"),[M.fileCategories.code]:()=>G.get("file.category.code"),[M.fileCategories.directory]:()=>G.get("file.category.directory"),[M.fileCategories.image]:()=>G.get("file.category.image"),[M.fileCategories.office]:()=>G.get("file.category.office"),[M.fileCategories.other]:()=>G.get("file.category.other"),[M.fileCategories.software]:()=>G.get("file.category.software"),[M.fileCategories.video]:()=>G.get("file.category.video")};function te(e){return("0"+e).slice(-2)}function ie(e){switch(e){case 0:return G.get("file.size.unit.Bytes");case 1:return G.get("file.size.unit.KB");case 2:return G.get("file.size.unit.MB");case 3:return G.get("file.size.unit.GB");case 4:return G.get("file.size.unit.TB");default:return G.get("file.size.unit.PB")}}function re(e){let t="";if("number"!=typeof e||isNaN(e))return t;const i=e.toString().split("."),r=G.get("format.thousand");if(t=i[0],r&&t.length>3){const e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1"+r+"$2")}return i.length>1&&(t+=G.get("format.decimal")+i[1]),t}function ne(e){const t=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),i=`(?:${Object.keys(t).join("|")})`,r=RegExp(i),n=RegExp(i,"g"),o=null==e?"":""+e;return r.test(o)?o.replace(n,(function(e){return t[e]})):o}var oe={sec2days(e){if(void 0!==e){const t=e/60/60/24;return t<=0?"0":t<1?"< 1":""+Math.round(t)}return""},date(e,t){if(void 0===e)return"";const i=Number(e);if(isNaN(i))throw new Error("time input parameter is not a number");if("string"!=typeof t)throw new Error("formatstring of type string required");const r=new Date(1e3*i);return t.replace(/[djmnYyaAgGhHisFM]/g,(function(e){return e in J?J[e](r):e.substring(1)}))},exifDate(e,t){const i=Q.exec(e);if(!i)return e;let r=new Date(i[1],i[2]-1,i[3],i[4],i[5],i[6]);return r=r.getTime()/1e3,this.date(r,t)},exposureTime(e){if(isNaN(e))throw new Error("Argument needs to be a number!");return e>=1?e.toFixed(1):"1/"+(1/e).toFixed(0)},size(e,t){const i=t||1,r=parseInt(Math.floor(Math.log(Math.max(e,i))/Math.log(1024)),10);if(isNaN(e))throw new Error("input parameter is not a number");return 0===r?re(e)+" "+ie(0):re(Math.round(e/Math.pow(1024,r)*10)/10)+" "+ie(r)},sizeWithUnitCap(e,t){if(isNaN(e))throw new Error("parameter bytes is not a number");if("string"!=typeof t)throw new Error("parameter unitCap is not a String");let i;switch(t.toUpperCase()){case"B":i=0;break;case"KB":i=1;break;case"MB":i=2;break;case"GB":i=3;break;case"TB":i=4;break;default:throw new Error(t+" is not a supported Unit.")}const r=parseInt(Math.floor(Math.log(Math.abs(e))/Math.log(1024)),10)||0,n=Math.min(r,i);return re(Math.round(e/Math.pow(1024,n)*10)/10)+" "+ie(n)},number:re,escapedBreakable(e){return ne(this.breakable(e))},breakable(e){return"string"!=typeof e?"":Array.from(e).join("​")},nameAndEmail(e,t){return e&&t?e+" ("+t+")":e||t||""},userDisplayName(e,t){const i=(t||"").trim();return i||(e||"")},htmlEscape:ne,categoryName(e){return(ee[e]||ee[M.fileCategories.other])()},subscribe(e){const t=()=>e(this);return G.on("change",t),t(),()=>G.off("change",t)}};var se={ignorable:function(e,t){if("function"!=typeof e)throw new Error("ignorable(): 'func' argument must be function");if("function"!=typeof t)throw new Error("ignorable(): 'ignored' argument must be function");return function(){var i,r=a().Deferred();if(t())return r.promise();try{(i=e.apply(this,arguments))&&"function"==typeof i.then||(i=a().Deferred().resolve(i))}catch(e){i=a().Deferred().reject(e)}return i.then((function(){t()||r.resolve.apply(this,arguments)}),(function(){t()||r.reject.apply(this,arguments)})),r.promise()}},timeoutPromise:function(e){var t=a().Deferred();return setTimeout((function(){t.resolve()}),e),t.promise()}},ae=o().View.extend({_viewState:M.viewStates.initialized,constructor:function(e){d().has(e,"template")&&(this.template=e.template),d().has(e,"subviews")&&(this.subviews=e.subviews),d().has(e,"templateData")&&(this.templateData=e.templateData),this._subviews={},o().View.apply(this,arguments),this._buildSubviews()},empty(){this.el.innerHTML=""},renderTemplate(e){let t=e||this.template;if(!t)return this;const i={lang:G,formatters:oe,config:w,constants:M,can:Z,auth:V,encoding:F};this.model&&(i.model=this.model),this.collection&&(i.collection=this.collection);const r=d().extend(i,d().result(this,"templateData",{}));return d().isFunction(t)&&(t=t.call(this,r)),this.el.innerHTML=t,this._viewState=M.viewStates.rendered,this},renderSubviews(){return d().chain(this._subviews).sortBy("order").each((e=>{if(e.target){const t=this.querySelector(e.target);if(t){const i=e.view.render().el;e.appendToTarget?t.append(i):t.parentElement.replaceChild(i,t)}}})),this},querySelector(e){return this.el.querySelector(e)},registerSubview(e,t,i,r){return this._registerSubviewByName(e.cid,e,t,i,r),this},getSubview(e){return d().has(this._subviews,e)?this._subviews[e].view:null},render(){return this.onBeforeRender(),this.renderTemplate(),this.renderSubviews(),this.onAfterRender(),this},remove(){return this._removeSubviews(),this._viewState=M.viewStates.removed,o().View.prototype.remove.call(this)},onBeforeRender(){},onAfterRender(){},_buildSubviews(){const e=d().result(this,"subviews",{});d().isEmpty(e)||d().each(e,((e,t)=>{const i=new e.klass(e.options||{});d().each(e.listeners||{},((e,t)=>{this.listenTo(i,t,e)})),this._registerSubviewByName(t,i,e.target,e.appendToTarget,e.order)}))},_registerSubviewByName(e,t,i,r,n){this._subviews[e]={view:t,target:i,appendToTarget:!!r,order:n}},_removeSubviews(){d().each(this._subviews,(e=>{const t=e.view;this.stopListening(t),t.remove()})),this._subviews={}},liveLoad(){const e=()=>this._viewState===M.viewStates.removed;let t=Array.from(arguments);if(!t.length)throw new Error("liveLoad(): at least one function argument is required");return t=d().map(t,(t=>se.ignorable(t,e))),d().reduce(t,((e,t)=>e.then(t)),a().Deferred().resolve())}}),le=o().View.extend({constructor:function(e){e=e||{},d().defaults(this,d().pick(e,"subviews","defaultView","keepInstances")),o().View.apply(this,arguments);const t=d().result(this,"subviews");if(!this.subviews||!Object.keys(t).length)throw new Error("No subviews defined in ViewSwitcher");if(this.defaultView&&!t[this.defaultView])throw new Error("Defined default does not exist in subviews");this.viewsConfig=t,this.views={},this.defaultView&&(this.current=this.defaultView,this.currentView=this.createView(this.current),this.last=this.current),this.keepInstances=!!this.keepInstances},createView(e){const t=this.viewsConfig[e];let i,r;return d().has(this.views,e)||(i=d().result(this,"subviews"),r=new i[e].klass(d().result(t,"options")),this.views[e]=r),this.stopListening(this.views[e]),d().each(t.listeners||{},(function(t,i){this.listenTo(this.views[e],i,t)}),this),this.views[e]},getCurrentViewName(){return this.current},show(e,t){return(t||e!==this.current)&&(this.current=e,this._renderCurrentView()),this.currentView},render(){if(!this.defaultView)throw new Error("No default view defined in ViewSwitcher");return this._renderCurrentView(),this},clear(){return this.current=null,this.last=null,this._clearCurrentView(),this},_renderCurrentView(){this.last!==this.current&&(this._clearCurrentView(),this.currentView=this.createView(this.current),this.last=this.current),this.$el.contents().detach(),this.$el.append(this.currentView.render().$el)},_clearCurrentView(){this.currentView&&(this.stopListening(this.currentView),this.keepInstances||(this.currentView.remove(),this.views={}),this.currentView=null)},remove(){d().invoke(this.views,"remove"),this.views=null,this.currentView=null,o().View.prototype.remove.apply(this,arguments)}}),de={Object:f,View:ae,ViewSwitcher:le},ce=de.Object.extend({initialize(){this._cache={}},set(e,t){if("string"!=typeof e)throw new Error("Provided key must be a string");if("string"!=typeof t)throw new Error("Provided value must be a string");this._cache[e]=t},get(e){if("string"!=typeof e)throw new Error("Provided key must be a string");return d().has(this._cache,e)?this._cache[e]:null},remove(e){if("string"!=typeof e)throw new Error("Provided key must be a string");d().has(this._cache,e)&&delete this._cache[e]}}),he=ce.extend({initialize(e){if(!(e instanceof window.Storage))throw new Error("Provided backend needs to be instance of window.Storage");this._backend=e},set(e,t){const i=this._getKey(e);if("string"!=typeof t)throw new Error("Provided value must be a string");try{this._backend.setItem(i,t)}catch(e){}},get(e){const t=this._backend.getItem(this._getKey(e));return null!=t?String(t):null},remove(e){this._backend.removeItem(this._getKey(e))},_getKey(e){if("string"!=typeof e)throw new Error("Provided key must be a string");return w.getAppNamespaceKey(e)}},{isAvailable(e){let t;const i="__storage_test__";try{return t=window[e],t.setItem(i,i),t.removeItem(i),!0}catch(e){return!1}}}),ue=he.isAvailable("localStorage")?new he(window.localStorage):new ce;const pe=de.Object.extend({initialize(){this._overlays=[],this._checkFocusInListener=this._checkFocusIn.bind(this),this._checkKeyDownListener=this._checkKeyDown.bind(this)},trapFocus(){document.addEventListener("focusin",this._checkFocusInListener),document.addEventListener("keydown",this._checkKeyDownListener)},untrapFocus(){document.removeEventListener("focusin",this._checkFocusInListener),document.removeEventListener("keydown",this._checkKeyDownListener)},push(e){if(!e)throw new Error("OverlayManager.push: overlay parameter required.");this._overlays.push(e),this.trigger("pushed",e),1===this._overlays.length&&(this.trigger("pushed:first"),this.trapFocus()),e.overlayEl.focus()},pop(e){if(0===this._overlays.length)throw new Error("OverlayManager.pop() called while there aren't any open overlays?!");if(this._overlays[this._overlays.length-1]!==e)throw new Error("OverlayManager.pop() called with non-top overlay");this._overlays.pop(),this.trigger("popped",e),0===this._overlays.length&&(this.trigger("popped:last"),this.untrapFocus())},getStack(){return[...this._overlays]},closeAll(){this.getStack().reverse().forEach((e=>e.close()))},_checkKeyDown(e){"Tab"===e.key&&this._handleTab(e)},_checkFocusIn(e){this._topOverlay().overlayEl.contains(e.target)||this._focusable()[0].focus()},_handleTab(e){let t=this._focusable(),i=t.indexOf(e.target),r=t[t.length-1],n=t[0];if(e.preventDefault(),e.stopImmediatePropagation(),e.shiftKey)return e.target===n||-1===i?void r.focus():void t[i-1].focus();e.target!==r&&-1!==i?t[i+1].focus():n.focus()},_topOverlay(){return this._overlays[this._overlays.length-1]},_focusable(){return this._topOverlay().getFocusableElements()}});pe.instance=()=>(pe._instance||(pe._instance=new pe),pe._instance);var ge=pe;var me=new function(){var e=[];function t(){var e,t=g.getAnchor();switch(!0){case/^\$\/users\/*/.test(t):e="files.list.my";break;case/^\$/.test(t):e="files.list.common";break;case/^shares$/.test(t):e="shared.files";break;case/^mailuploads$/.test(t):e="shared.mail";break;case/^shareuploads$/.test(t):e="shared.upload";break;case/^teamfolder$/.test(t):e="settings.common";break;case/^team$/.test(t):e="settings.user";break;case/^backups$/.test(t):e="settings.backupcontrol";break;case/^devicebackups$/.test(t):e="settings.devicebackups";break;case/^login$/.test(t):e="login";break;case/^password-request$/.test(t):e="password-request";break;case/^settings$/.test(t):e="settings";break;case/^user\/invite$/.test(t):e="user-invite";break;case/^user\/invite\/display\/.*$/.test(t):e="user-invite-display";break;default:e="unknown"}return e}this.track=function(i){if(w.get("hasTracking")){if(!i)throw new Error("track() must have an object to track as parameter");var r=w.get("app");d().extend(i,{namespace:r.name,version:r.version,lang:G.getLang(),page:t()}),e.length&&e.forEach((function(e){"track"in e&&e.track(i)}))}},this.addAdapter=function(t){e.push(t)},this.clear=function(){e=[]}},fe=o().Router.extend({defaultRoute:"login",routesHit:0,defaults:{langStorageKey:"lang",lang:"en"},_extractParameters(e,t){var i=e.exec(t).slice(1);return d().map(i,(function(e){return e||null}))},initialize(){this.route("lang/:lang",this.language);var e=W.detect(G.getLanguages(),this.defaults.lang),t=this.getStoredLanguageKey();try{G.setLang(t||e)}catch(t){G.setLang(e),this.removeStoredLanguageKey()}this.auth=V.get(),o().history.on("route",(function(){this.routesHit++,me.track({op:"page_view",target:"history"})}),this),this.buildViews()},execute(e,t,i){var r,n=ge.instance().getStack();if(n.length>0)return n[n.length-1].canClose&&n.reverse().forEach((function(e){e.close()})),void(t&&t.originalEvent.oldURL&&(r=t.originalEvent.oldURL.split("#")[1])&&this.navigate(r));o().Router.prototype.execute.call(this,e,t,i)},buildViews(){},back(e){this.routesHit>e?window.history.go(0-e):this.navigate(this.defaultRoute,{trigger:!0,replace:!1})},restart(e){this.buildViews(),e&&this.back(e)},language(e){var t=this;a()("body").fadeOut("fast",(function(){try{t.setLanguage(e),t.restart(1)}catch(e){console.error("Error while switch language: ",e),t.back(1)}finally{a()("body").show()}}))},setLanguage(e){G.setLang(e),this.setStoredLanguageKey(e)},getStoredLanguageKey(){return ue.get(this.defaults.langStorageKey)||null},setStoredLanguageKey(e){ue.set(this.defaults.langStorageKey,e)},removeStoredLanguageKey(){ue.remove(this.defaults.langStorageKey)}}),be=de.Object.extend({initialize(){this.actions={}},register(e,t,i){if(this.isRegistered(e))throw new Error('an action with the name "'+e+'" is already registered.');this.actions[e]={callback:t,config:i,state:{"":!0}}},unregister(e){this._ensureActionIsRegistered(e),delete this.actions[e],this.off("state:"+e)},isRegistered(e){return Object.prototype.hasOwnProperty.call(this.actions,this._parseName(e).name)},execute(e){var t,i=this._parseName(e),r=d().rest(arguments);return this._ensureActionIsRegistered(i.name),void 0!==(t=this.actions[i.name]).config&&(r=r.concat([t.config])),this.trigger("execute",i.name),t.callback.apply(t.callback,r)},getState(e){var t,i=this._parseName(e);return this._ensureActionIsRegistered(i.name),t=this.actions[i.name].state,i.namespace in t||(t[i.namespace]=t[""]),t[i.namespace]},setState(e,t){var i,r=this._parseName(e);this._ensureActionIsRegistered(r.name),"*"===r.namespace?(i=Object.keys(this.actions[r.name].state),d().each(i,(function(e){this._setNamespaceState(r.name,e,t)}),this)):this._setNamespaceState(r.name,r.namespace,t)},registerAll(e){d().each(e,function(e,t){this.register(t,e.callback,e.config)}.bind(this))},_setNamespaceState(e,t,i){var r=this.actions[e].state,n=e+(""===t?"":":"+t);i=!!i,t in r&&r[t]===i||(r[t]=i,this.trigger("state:"+n,i))},_ensureActionIsRegistered(e){if(!this.isRegistered(e))throw new Error('no action with the name "'+e+'" is registered.')},_parseName(e){var t=e.indexOf(":"),i=t>-1;return{name:i?e.substr(0,t):e,namespace:i?e.substr(t+1):""}}}),ye=new be,we={initialize(){G.subscribe((()=>{document.documentElement.setAttribute("lang",G.getLang()),g.setTitle(G.get("app.tabtitle"))}))}},ve=i(1724),_e=i.n(ve),xe=new f,Ee=i(2932);i(7460);function Oe(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?e:()=>{}}var je={TILES:"tiles",FLUID:"fluid",LIST:"list"};const{doubleClickDelay:ke}=M;const{loadState:Se}=M;var Te=(e,t)=>i=>{if(t.get("loadState")!==Se.done)return;const r=function(e){const i=e.closest("[data-id]");return i?t.files.get(i.dataset.id):null}(i.target);if(!r)return t.files.deselectAll(),void e("contextmenu",i);r.get("readable")&&(r.selected||(t.files.deselectAll(),t.files.select(r)),e("contextmenu",i))};var Pe=i(7518),De=i.n(Pe),Ce=i(5327),Ie=i.n(Ce),ze=i(3287),Le=i.n(ze),$e=(i(6699),i(2023),Object.freeze({file:"file",directory:"dir",symlink:"symlink"}));i(4944),i(3792),i(2707),i(6755);const Me="\\/D_HDTLRN_[^/]{20}\\.c",Ae=new RegExp(`${Me}(?:\\/|$)`),Ve=new RegExp(`^(.*?)${Me}`),Fe=/\/\.DAV(\/|$)/,Be=/^root([/]|$)/,Ne=/^(.*)\/[^/]+\/?$/,Re=/\/([^/]+)\/?$/,Ue=/\/{2,}/g,qe=/([^/])\/$/,He=[M.userFilesPath,M.appdataPath];var Ge={findCommonPath:function(e){let t,i,r=[];if(!Array.isArray(e)||!e.length)throw new Error("findCommonPath: array of paths required");const n=e.sort();return t=n[0],i=n[n.length-1],t===i?t:(t=t.split("/"),i=i.split("/"),t.every(((e,t)=>e===i[t]&&(r.push(e),!0))),0===r.length||1===r.length&&0===r[0].length?M.rootPath:r.join("/"))},getFirstNonEncrypted:function(e){const t=e.match(Ve);return t?t[1]:e},getLastComponent:function(e){const t=e.match(Re);return t?t[1]:null},getParentPath:function(e){const t=e.match(Ne);return t?0===t[1].length?M.rootPath:t[1]:null},isEncrypted:function(e){return Ae.test(e)},isWebDAVRelated:function(e){return Fe.test(e)},isTeamfolder:function(e){return!He.find((function(t){return e===t||0===e.indexOf(t+"/")}))},startsWith:function(e,t){return t===M.rootPath||(e===t||0===e.indexOf(t+"/"))},isDescendantOf:function(e,t){return e!==t&&(t===M.rootPath||`${e}/`.startsWith(`${t}/`))},joinPath:function(){const e=Array.from(arguments).flat();if(e.findIndex((e=>"string"!=typeof e))>-1)throw new Error("joinPath: non-string path component");return e.join("/").replace(Ue,"/").replace(qe,"$1")},unifyPath:function(e){return"string"!=typeof e?e:e.replace(Be,"/")}},We=(e,t,i)=>{if(i.get("type")!==$e.directory)return!1;if(!i.get("writable"))return!1;if(!t.length)return!1;const r=t.map((t=>e.get(t))).every((e=>i.id!==e.id&&(!!e.get("parent_writable")&&(e.get("parentPath")!==i.get("path")&&!Ge.isDescendantOf(i.get("path"),e.get("path"))))));return r};const Ke="application/x-hdf-file-ids";var Ye=(e,t)=>{let{collection:i,onDragStart:r,onDragOver:n,onDrop:o}=t,s=[];function a(e){const t=e.closest("[data-id]");return t?i.get(t.getAttribute("data-id")):null}function l(e){if(!e.target.getAttribute("draggable"))return;const t=i.getSelected().map((e=>e.id)),n=!!t.length,o=a(e.target);if(!o)return;const l=o.get("id");n&&t.includes(l)?s=[...t]:n?(i.deselectAll(),s=[l]):s=[l];const d=e.dataTransfer;if(d.effectAllowed="move",d.dropEffect="move",d.setData(Ke,JSON.stringify([...s])),"function"!=typeof r)return;const c=r(s);c&&d.setDragImage(c,0,0)}function d(e){e.dataTransfer.dropEffect="none",n(null)}function c(e){if(!e.target)return;if(!e.dataTransfer.types.includes(Ke))return;const t=a(e.target);if(!t)return void d(e);We(i,s,t)?(e.preventDefault(),e.stopPropagation(),n(t)):d(e)}function h(e){if(!e.target)return;const t=a(e.target);if(!t)return;if(!e.dataTransfer.types.includes(Ke))return;if(!We(i,s,t))return;const r=s.map((e=>i.get(e)));o(r,t),s=[]}return e.addEventListener("dragstart",l),e.addEventListener("dragover",c),e.addEventListener("drop",h),{destroy(){e.removeEventListener("dragstart",l),e.removeEventListener("dragover",c),e.removeEventListener("drop",h)}}};function Xe(e){let t;return{c(){t=(0,Ee.fLW)(e[1])},m(e,i){(0,Ee.$Tr)(e,t,i)},p(e,i){2&i&&(0,Ee.rTO)(t,e[1])},d(e){e&&(0,Ee.ogt)(t)}}}function Ze(e){let t;return{c(){t=(0,Ee.fLW)("999+")},m(e,i){(0,Ee.$Tr)(e,t,i)},p:Ee.ZTd,d(e){e&&(0,Ee.ogt)(t)}}}function Je(e){let t,i;function r(e,t){return e[1]>999?Ze:e[1]>0?Xe:void 0}let n=r(e),o=n&&n(e);return{c(){t=(0,Ee.bGB)("drag-shadow"),i=(0,Ee.bGB)("div"),o&&o.c(),(0,Ee.Ljt)(i,"class","drag-shadow-counter")},m(r,n){(0,Ee.$Tr)(r,t,n),(0,Ee.R3I)(t,i),o&&o.m(i,null),e[4](t)},p(e,[t]){n===(n=r(e))&&o?o.p(e,t):(o&&o.d(1),o=n&&n(e),o&&(o.c(),o.m(i,null)))},i:Ee.ZTd,o:Ee.ZTd,d(i){i&&(0,Ee.ogt)(t),o&&o.d(),e[4](null)}}}function Qe(e,t,i){let r,n=0;return[r,n,function(){return r},function(e){i(1,n=e)},function(e){Ee.VnY[e?"unshift":"push"]((()=>{r=e,i(0,r)}))}]}class et extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Qe,Je,Ee.N8,{getElement:2,setCount:3})}get getElement(){return this.$$.ctx[2]}get setCount(){return this.$$.ctx[3]}}var tt=et;const{loadState:it}=M;var rt=(e,t)=>{if(e.get("loadState")!==it.done)return null;if(null!==t){if(t.get("type")!==$e.directory&&e.get("writable"))return e;if(t.get("type")===$e.directory&&t.get("writable"))return t}else if(e.get("writable"))return e;return null},nt=(e,t)=>{let{folder:i,collection:r,onDragOver:n,onDrop:o}=t;function s(e){const t=e.closest("[data-id]");return t&&r.get(t.getAttribute("data-id"))||null}function a(e){if(!e.target)return;if(!e.dataTransfer.types.includes("Files"))return;const t=rt(i,s(e.target));null!==t?(e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation(),n(t)):function(e){e.dataTransfer.dropEffect="none",n(null)}(e)}function l(t){t.relatedTarget||!t.target||t.target.closest("[data-id]")?t.relatedTarget&&(e.contains(t.relatedTarget)||n(null)):n(null)}function d(e){if(!e.target)return;if(!e.dataTransfer.types.includes("Files"))return;const t=rt(i,s(e.target));null!==t&&(e.preventDefault(),o(e.dataTransfer,t))}return e.addEventListener("dragover",a),e.addEventListener("dragleave",l),e.addEventListener("drop",d),{destroy(){e.removeEventListener("dragover",a),e.removeEventListener("dragleave",l),e.removeEventListener("drop",d)}}};class ot{_onViewportChanged(){const e=this.getBoundingBox();this._scrollY=g.getScrollY(),this._viewportHeight=g.getViewportHeight(),this._topRect=this._getTopBoundaryClientRect(e),this._bottomRect=this._getBottomBoundaryClientRect()}isWithinTop(e){return this._isWithin(e,this._topRect)}isWithinBottom(e){return this._isWithin(e,this._bottomRect)}depth(e){return this.isWithinTop(e)?this._topRect.yBottom-e:this.isWithinBottom(e)?e-this._bottomRect.yTop:0}_isWithin(e,t){return e>=t.yTop&&e<=t.yBottom}_getTopBoundaryClientRect(e){const{top:t}=e;return{yTop:0,yBottom:t+this._scrollY+this.boundaryHeight}}_getBottomBoundaryClientRect(){return{yTop:this._viewportHeight-this.boundaryHeight,yBottom:this._viewportHeight}}constructor({getBoundingBox:e,boundaryHeight:t}){this.getBoundingBox=e,this.boundaryHeight=t,this.onViewportChanged=()=>this._onViewportChanged()}}var st=e=>{let{getBoundingBox:t,boundaryHeight:i}=e;return new ot({getBoundingBox:t,boundaryHeight:i})};class at{setBy(e){return this.by=e,this}up(){return this._direction="up",this}down(){return this._direction="down",this}start(){return this._interval||(this._interval=setInterval((()=>this._scroll()),this.rate)),this}stop(){return clearInterval(this._interval),this._interval=null,this}_scroll(){"up"===this._direction?window.scrollBy(0,-this.by):window.scrollBy(0,this.by)}constructor({rate:e,by:t}){this.rate=e,this.by=t,this._direction=null,this._interval=null}}var lt=e=>{let{rate:t,by:i}=e;return new at({rate:t,by:i})};function dt(e){let t,i;return{c:Ee.ZTd,m(r,n){t||(i=[(0,Ee.oLt)(document.body,"dragenter",e[0]),(0,Ee.oLt)(document.body,"dragleave",e[1]),(0,Ee.oLt)(document.body,"dragover",e[3],!0),(0,Ee.oLt)(document.body,"drop",e[2])],t=!0)},p:Ee.ZTd,i:Ee.ZTd,o:Ee.ZTd,d(e){t=!1,(0,Ee.j7q)(i)}}}function ct(e,t,i){let{getBoundingBox:r}=t;const n=lt({rate:75,by:5}),o=st({getBoundingBox:r,boundaryHeight:60});return e.$$set=e=>{"getBoundingBox"in e&&i(4,r=e.getBoundingBox)},[function(){o.onViewportChanged()},function(e){null===e.relatedTarget&&n.stop()},function(){n.stop()},function(e){let{clientY:t}=e;o.isWithinTop(t)?n.setBy(Math.min(120,5*o.depth(t))).up().start():o.isWithinBottom(t)?n.setBy(Math.min(120,5*o.depth(t))).down().start():n.stop()},r]}class ht extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,ct,dt,Ee.N8,{getBoundingBox:4})}}var ut=ht,pt=i(218),gt=i(2246),mt=i(3975),ft=e=>{let t={selected:!1,preselected:!1,predeselected:!1};return t.selected=e.selected,t.preselected=e.preselected===M.selectionStates.select,t.predeselected=e.preselected===M.selectionStates.deselect,e.selected&&e.preselected===M.selectionStates.deselect?(t.selected=!1,t.preselected=!1):e.selected&&(t.preselected=!1),t},bt=i(8646),yt=i(954),wt=i(471),vt=i(417),_t=i(4079),xt=i(7728),Et=i(896),Ot=i(7258),jt=i(4618),kt=(i(6535),i(9244),i(8559),JSON.parse('{"a":[{"category":"other","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":[""]},{"category":"image","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["arw","cr2","crw","dng","heic","heif","mrw","nef","orf","pef","raf","tiff","webp"]},{"category":"image","supportsThumbnail":true,"officeEditable":false,"apiEditable":true,"extensions":["bmp","gif","jpeg","jpg","nrw","png","tif"]},{"category":"image","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["cr3","dcr","3dmf","3ds","aae","ac","act","ag","ai","apversion","b3d","blend","blp","bm","bmi","bw","c4d","catpart","cdr","cdx","cdxml","cfl","cgm","cit","cmx","cob","cod","cop","csl","cur","cut","dae","dcm","dds","de","dib","djv","djvu","dsi","dst","dwf","dwg","dxf","e2d","e57","emf","eod","eox","eps","epsf","epsi","esw","exr","fbk","fbs","fbx","fh","fh5","fh7","fif","fig","flo","fpx","fst","gpr","hed","iam","icns","ico","idrc","iff","indd","int","ipt","ithmb","jfif","jp2","jpe","jps","kdc","lbm","lrcat","lrprev","lwo","lws","lxo","mac","max","mb","mcf","mdc","mdi","mdx","mesh","miff","mmr","msp","mtx","nif","obj","off","ota","pbm","pc1","pc3","pcd","pct","pcx","pdd","pdn","pgm","pi1","pi2","pi3","pic","pil","pix","pln","pnm","pov","ppm","prf","pro","prt","ps","psb","psp","ptn","px","pxr","qdv","qfx","qif","qsv","raw","rcs","rgb","rlc","rle","rp","rvt","rw2","sbs","sct","sff","sgi","shp","shx","sia","sib","sk","skp","sldasm","slddrw","sldprt","srf","sta","step","stl","stp","sun","surf","svf","svgz","tga","u3d","vpe","vst","vwx","wdp","wig","wmf","x","x3d","x3f","xar","xbm","xcf","xpm"]},{"category":"image","supportsThumbnail":true,"officeEditable":true,"apiEditable":false,"extensions":["fodg","odg"]},{"category":"office","supportsThumbnail":true,"officeEditable":true,"apiEditable":false,"extensions":["doc","docm","docx","dotx","fodt","odt","rtf"]},{"category":"office","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["dot","otg","ott"]},{"category":"office","supportsThumbnail":false,"officeEditable":true,"apiEditable":false,"extensions":["dotm","otm"]},{"category":"office","categorySubname":"slide","supportsThumbnail":false,"officeEditable":true,"apiEditable":false,"extensions":["fodp"]},{"category":"office","categorySubname":"spreadsheet","supportsThumbnail":true,"officeEditable":true,"apiEditable":false,"extensions":["fods","xls","xlsm","xlsx","xltm","xltx"]},{"category":"office","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["odm","3dml","abc","abw","accdb","acl","adt","afp","aip","ans","as","asd","ass","aw","aws","aww","bib","cat","cil","clf","clp","conf","crd","dbx","def","dic","dif","diff","dtx","eml","emlx","ent","eot","epub","etx","fb2","final","flw","flx","fly","fo","frm","ftm","gdl","gnumeric","gp","gv","hlp","ice","ics","idc","idx","igs","ime","ims","imy","in","info","ins","ivr","kon","kpr","kra","kud","kwd","latex","ldif","list","lsp","lst","ltx","lwp","ly","ma","man","mar","mcw","md","mdb","mime","mny","mpp","mpt","ms","msf","msg","msh","mts","mvb","nb","nfo","not","obd","odc","odf","one","opf","opml","ost","otc","otf","oxt","pages","pap","pdc","pem","pgs","pko","pmd","ppa","ppz","prd","prz","pst","psw","pub","pwz","reg","rexx","rms","rpt","rt","rtx","sam","scd","sda","sdc","sdd","sdp","sds","sdw","shw","sig","slk","smd","smf","ssa","sst","stc","std","sti","strings","stw","sty","svr","sxd","sxi","sxm","sxw","tab","talk","tex","texi","tnf","trm","tsv","ttf","txt","uue","vc","vcf","vcs","vhdl","vis","vor","vrt","vsd","vss","wbk","wdb","wdseml","wiz","wk1","wk3","wk4","wks","wp","wp5","wpd","wpl","wpp","wps","wpt","wrd","wrf","wri","wsc","xaf","xap","xbap","xht","xl","xla","xlb","xlc","xlf","xlk","xll","xlm","xlr","xlw","xmz","xps"]},{"category":"office","categorySubname":"slide","supportsThumbnail":true,"officeEditable":true,"apiEditable":false,"extensions":["odp","ppt","pptm","pptx"]},{"category":"office","categorySubname":"spreadsheet","supportsThumbnail":false,"officeEditable":true,"apiEditable":false,"extensions":["ods","csv"]},{"category":"office","categorySubname":"slide","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["otp","potm","potx"]},{"category":"office","categorySubname":"spreadsheet","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["ots","xlsb"]},{"category":"office","categorySubname":"pdf","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["pdf"]},{"category":"video","supportsThumbnail":true,"officeEditable":false,"apiEditable":false,"extensions":["avi","m4v","mov","mp4","mpeg","mpg","webm"]},{"category":"video","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["qt","rv","wmv","3ga","3gp","3gpp","aaf","asf","asr","avs","cam","dir","divx","dl","dsh","dv","dvb","f4v","fla","flc","fli","flv","fmf","gl","h264","isu","jpm","lrfprev","lrv","lsf","lsx","m1v","m2t","m2ts","m2v","mce","meta","mjpg","mkv","movie","mpe","mswmm","mv","mxf","mxv","myd","nl","ogm","ogv","ppj","qtc","rdb","rep","rm","rmvb","scm","sub","swf","trec","vdo","vfo","vid","viv","vob","vos","vro","wm","xdr","xsr"]},{"category":"archive","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["0","1","2","3","4","5","6","7","8","9","0","00","1","01","2","02","3","03","4","04","5","05","6","06","7","07","8","08","9","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","0","00","000","1","01","001","2","02","002","3","03","003","4","04","004","5","05","005","6","06","006","7","07","007","8","08","008","9","09","009","10","010","11","011","12","012","13","013","14","014","15","015","16","016","17","017","18","018","19","019","20","020","21","021","22","022","23","023","24","024","25","025","26","026","27","027","28","028","29","029","30","030","31","031","32","032","33","033","34","034","35","035","36","036","37","037","38","038","39","039","40","040","41","041","42","042","43","043","44","044","45","045","46","046","47","047","48","048","49","049","50","050","51","051","52","052","53","053","54","054","55","055","56","056","57","057","58","058","59","059","60","060","61","061","62","062","63","063","64","064","65","065","66","066","67","067","68","068","69","069","70","070","71","071","72","072","73","073","74","074","75","075","76","076","77","077","78","078","79","079","80","080","81","081","82","082","83","083","84","084","85","085","86","086","87","087","88","088","89","089","90","090","91","091","92","092","93","093","94","094","95","095","96","096","97","097","98","098","99","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","7z","a","ace","adf","adi","afi","air","apk","arc","arj","ba","backup","bak","bbb","bin","bkf","bpn","bz","bz2","bzip","c4","cab","cb7","cbr","cbt","cbz","cdb","cfs","chm","cpt","d64","daa","daf","dar","deb","dmg","dmp","dms","dsk","dump","egg","ess","filepart","gdb","gho","ghs","gz","gzip","hds","ibd","img","ipg","iso","jar","jpa","lbr","lha","lhz","lz","lzh","lzma","lzo","lzx","mdf","mobackup","mpq","nbd","nrg","olm","ova","pack","pak","par","par2","part","pbd","pbf","pcv","pfi","pk3","pkg","rar","rpm","sdi","sen","sit","sitx","skb","sle","sna","spf","spi","tar","tar2","tb","tbk","tbz","tc","tgz","tib","tibx","trn","txz","vbk","vdi","vhd","vhdx","vib","vmdk","vol","vrb","wim","xva","xwd","xyz","xz","z","z0","z1","z2","z3","z4","z5","z6","z7","z8","z9","z0","z00","z1","z01","z2","z02","z3","z03","z4","z04","z5","z05","z6","z06","z7","z07","z8","z08","z9","z09","z10","z11","z12","z13","z14","z15","z16","z17","z18","z19","z20","z21","z22","z23","z24","z25","z26","z27","z28","z29","z30","z31","z32","z33","z34","z35","z36","z37","z38","z39","z40","z41","z42","z43","z44","z45","z46","z47","z48","z49","z50","z51","z52","z53","z54","z55","z56","z57","z58","z59","z60","z61","z62","z63","z64","z65","z66","z67","z68","z69","z70","z71","z72","z73","z74","z75","z76","z77","z78","z79","z80","z81","z82","z83","z84","z85","z86","z87","z88","z89","z90","z91","z92","z93","z94","z95","z96","z97","z98","z99","zip","zipx"]},{"category":"audio","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["aa","aac","aax","ac3","adp","aif","aifc","aiff","amr","ape","asx","au","aup","band","cel","cht","cpr","cust","dra","dsp","dts","dus","es","flac","flp","gp3","gsd","gsm","gym","it","itc2","jam","la","lma","m3u","m3u8","m4a","m4b","m4p","med","mfb","mid","midi","mka","mo3","mod","mp2","mp3","mpa","mpc","mpga","msj","mus","oga","ogg","omf","opus","pac","pla","plist","pls","psf","ptb","ra","ram","rip","rka","rmi","rmp","s3m","ses","sfl","snd","spx","stf","swa","syn","sz","tdms","toc","tsi","tsp","ult","uni","vcd","vgm","voc","vox","wav","wax","wma","xm","xspf","ym","zpl"]},{"category":"code","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["akt","aspx","blb","c","cfg","class","cpp","cs","css","db","frx","go","h","hpp","htm","html","i","inc","java","js","json","jsonlz4","jsp","ksh","less","lua","m","mht","mo","o","pbe","pdy","php","phpt","phtml","pickle","pl","pm","pri","prj","proj","properties","py","pyc","pyi","pyo","r","rb","resources","scss","sh","shtml","sql","sqlite","stx","tcsh","ts","twig","url","vb","woff","woff2","wpress","xhtml","xml","xmp","xsd","xsl","yaml","yml","zsh"]},{"category":"image","supportsThumbnail":false,"officeEditable":false,"apiEditable":true,"extensions":["avif","jng","mng","psd","svg"]},{"category":"office","categorySubname":"slide","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["key","keynote","pot","ppam","pps","ppsm","ppsx","sldm","sldx","thmx"]},{"category":"office","categorySubname":"spreadsheet","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["num","numbers","sxc","xlam","xlt"]},{"category":"software","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["0tx","abcdp","acs","adm","adml","afm","alnk","apdetected","apmaster","asc","auf","aux","azi","bcmap","bix","blob","btr","bytes","ccm","cif","cof","cos","cot","d","da_","dat","data","dbf","dbt","dcu","deploy","dfm","diriv","doy","ds_store","dtd","edb","elprot","emessage","enz","esd","etc","etl","fac","fdb","file","fiu","fmp12","fpt","frt","ftq2","geo","glif","gnt","gpx","grp","gze","index","inf_loc","ini","ipa","items","izv","jrl","ko","laz","lck","ldb","ldf","ldt","lib","ll","lng","lnk","lock","log","mai","manifest","map","mat","mbd","mbini","mbox","mca","md5","mfl","mobi","mof","mpr","msi","mst","mui","mum","nc","ndw","ndx","net","nib","npl","nsf","old","out","pag","pas","pat","pdb","peak","pes","pfb","pfm","plt","po","pqi","prg","prn","ptk","ptp","qml","r3d","ref","rek","res","resx","rst","rtm","run","sav","scpt","sdlxliff","sess","slf","so","sor","sym","t2h","test","tfm","tfx","thm","tmb","tms","top","tpl","uasset","vew","xaml"]},{"category":"software","categorySubname":"system","supportsThumbnail":false,"officeEditable":false,"apiEditable":false,"extensions":["app","bat","cache","com","config","crumb","dl_","dll","exe","inf","journal","sys","thumb","tmp"]}]}'));function St(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Tt=null;var Pt={forward(){if(Tt)return Tt;const e=kt.a.flatMap((e=>{const t=e.extensions,i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){St(e,t,i[t])}))}return e}({},e);return delete i.extensions,t.map((e=>[e,i]))}));return Tt=Object.fromEntries(e),Tt},_resetCacheForTestsOnly(){Tt=null}},Dt=i(8632),Ct=i(2774),It=i(5963),zt=i(4874),Lt=i(8680),$t=i(6701),Mt=i(7127),At=i(9956);function Vt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ft=Object.freeze({dir:"dir",dirEncrypted:"dir-encrypted",dirDecrypted:"dir-decrypted",dirGit:"dir-git",file:"file",symlink:"symlink",syncedfolder:"syncedfolder"}),Bt=Object.freeze({pdf:"pdf",slide:"slide",spreadsheet:"spreadsheet"}),Nt=Object.freeze((Rt=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Vt(e,t,i[t])}))}return e}({},Ft,Bt),Ut=null!=(Ut={archive:"archive",audio:"audio",code:"code",default:"default",image:"image",office:"office",other:"other",software:"software",system:"system",text:"text",video:"video"})?Ut:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Rt,Object.getOwnPropertyDescriptors(Ut)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(Ut)).forEach((function(e){Object.defineProperty(Rt,e,Object.getOwnPropertyDescriptor(Ut,e))})),Rt));var Rt,Ut;const qt={md:{category:Nt.text},txt:{category:Nt.text}},Ht=Object.freeze({[Nt.archive]:bt,[Nt.audio]:yt,[Nt.code]:wt,[Nt.default]:vt,[Nt.dir]:Ot,[Nt.dirGit]:Et,[Nt.dirEncrypted]:_t,[Nt.dirDecrypted]:xt,[Nt.office]:jt,[Nt.file]:vt,[Nt.image]:Dt,[Nt.syncedfolder]:$t,[Nt.other]:vt,[Nt.pdf]:Ct,[Nt.slide]:It,[Nt.software]:Mt,[Nt.spreadsheet]:zt,[Nt.symlink]:Lt,[Nt.system]:Mt,[Nt.text]:jt,[Nt.video]:At}),Gt={category:Nt.default};function Wt(e){const t=`${e}`.toLowerCase();return qt[t]?qt[t]:Pt.forward()[t]||Gt}var Kt={get(e){const t=Wt(e);return t.category===Nt.default?t.category:(null==t?void 0:t.categorySubname)||t.category},groups:Nt,isOfficeEditable(e){return!!Wt(e).officeEditable},icons:Ht,supportThumbnail(e){return!!Wt(e).supportsThumbnail}},Yt={addSshKey(e,t){var i=new window.FormData;if(!e)throw new Error("accountId missing in api.addSshKey");if(!(t&&t instanceof File))throw new Error("file missing in api.addSshKey");return i.append("account",e),i.append("keydata",t),V.get().ajax({url:"/api/user/key",type:"POST",data:i,contentType:!1,processData:!1})}},Xt={confirmInvitation(e){if(!d().isObject(e))throw new Error("attributes object required for confirmInvitation");return d().each(["invite_token","alias","password"],(function(t){if(!d().isString(e[t]))throw new Error("string-like "+t+" missing for confirmInvitation");if(""===e[t].trim())throw new Error(t+" is empty for confirmInvitation")})),a().ajax({url:"/api/user/invite/confirm",method:"POST",data:d().pick(e,"invite_token","alias","password")})}},Zt=(i(9601),{getMeta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.context)throw new Error("getMeta: context required");if(!e.path&&!e.pid)throw new Error("getMeta: either pid or path are required");if(e.fields&&!Array.isArray(e.fields))throw new Error("getMeta: fields option must be an array");const{path:t,pid:i,snapshot:r}=e,n={path:t,pid:i,snapshot:r};return e.fields&&e.fields.length&&(n.fields=e.fields.join(",")),V.get(e.context).ajax({url:"/api/meta",data:n})}}),Jt=i(4950);const Qt=(0,Jt.fZ)({});Qt.subscribe;var ei=(e,t)=>{Qt.update((i=>(i[e]=t,i)))},ti=e=>(0,Jt.U2)(Qt)[e],ii=()=>(0,Jt.U2)(Qt),ri=Object.freeze({encrypted:"encrypted",decrypted:"decrypted",unencrypted:"unencrypted"});var ni=e=>{let{type:t,ext:i,encrypted:r,syncedfolder:n}=e;return t===$e.directory&&n?Kt.groups.syncedfolder:t===$e.directory&&"git"===i?Kt.groups.dirGit:t===$e.directory&&r===ri.encrypted?Kt.groups.dirEncrypted:t===$e.directory&&r===ri.decrypted?Kt.groups.dirDecrypted:t===$e.directory?Kt.groups.dir:t===$e.symlink?Kt.groups.symlink:i?Kt.get(i):Kt.groups.default};function oi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function si(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var ai={parse(e){if(!e)return;if(!e.exif)return e;let t={};const{Orientation:i}=e.exif;return i&&(t.Orientation=Number(i)),si(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){oi(e,t,i[t])}))}return e}({},e),{exif:t})}},li={addReplaceParam(e,t,i){var r=!1;const n=decodeURIComponent(i)===i?encodeURIComponent(i):i;let o=e.replace(new RegExp("([\\?&]"+t+"=)[^&]+"),(function(e,t){return r=!0,t+n}));return r||(o+=(o.indexOf("?")<0?"?":"&")+t+"="+n),o},queryToObject(e){var t={};if(!d().isString(e))return t;return e.replace(/#.*$/,"").replace(/^[^?]*\?+/,"").split("&").forEach((e=>{const i=e.split("=");i[0]&&(i[0]=decodeURIComponent(i[0]),1===i.length?i[1]=!0:i[1]=decodeURIComponent(i[1]),t[i[0]]=i[1])})),t},paramsToString(e){if(!(e instanceof Object))throw new Error("urlHelper.paramsToString(): Object input expected.");const t=new URLSearchParams;for(const[i,r]of Object.entries(e))t.append(i,r);return t.toString()}};function di(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ci(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function hi(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var ui={createMailupload(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.path)throw new Error("path required to create mailupload");if(!e.unique||!e.unique_mac)throw new Error("unique and unique_mac required to create mailupload");const{path:t}=e,i=hi(e,["path"]),r=`path=${t}&type=dir&${li.paramsToString(i)}`;return new Promise(((e,t)=>{V.get().ajax({type:"POST",url:"/api/mailupload",data:r,processData:!1}).then((t=>{const i=Ge.unifyPath(t.path);xe.trigger("api:createMailupload",i),e(ci(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){di(e,t,i[t])}))}return e}({},t),{path:i}))}),t)}))}};function pi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function mi(e){return gi(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){pi(e,t,i[t])}))}return e}({},e),{path:Ge.unifyPath(e.path)})}var fi={getMailupload(){let e,{pid:t,path:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){if("string"!=typeof t)throw new Error("getMailupload: optional pid has to be of type string");e=`pid=${t}`}if(i){if("string"!=typeof i)throw new Error("getMailupload: optional path has to be of type string");e=`path=${i}`}return new Promise(((t,i)=>V.get().ajax({type:"GET",url:"/api/mailupload",processData:!1,data:e}).then((e=>{Array.isArray(e)&&t(e.map(mi)),t(mi(e))}),i)))}},bi={getUnique(){return new Promise(((e,t)=>{V.get().ajax({type:"GET",url:"/api/unique"}).then(e,t)}))}};const yi=["add","add:end","change:preselected","change:selected","deselectAll","remove","remove:end","reset","selectAll","sort"].join(" ");var wi=o().Collection.extend({initialize(e,t){this._context=(t||{}).context||M.authContext.default},getContext(){return this._context},_prepareModel(e,t){const i=Object.assign({},t,{context:this.getContext()});return o().Collection.prototype._prepareModel.call(this,e,i)},sync(e,t,i){return N.call(this,e,t,i)},subscribe(e){const t=()=>e(this);return this.on(yi,t),t(),()=>this.off(yi,t)}});const vi={[M.fileCategories.directory]:1,[M.fileCategories.office]:2,[M.fileCategories.image]:3,[M.fileCategories.video]:4,[M.fileCategories.audio]:5,[M.fileCategories.archive]:6,[M.fileCategories.code]:7,[M.fileCategories.software]:8,[M.fileCategories.other]:9};var _i={isDir(e){return e.get("type")===$e.directory},compareType(e,t){return this.isDir(t)-this.isDir(e)},compare(e,t,i){const{sortable:{direction:r}}=e.collection;let n="asc"===r?this.compareType(e,t):this.compareType(t,e);return n||(n=i?i(e,t):n,n||(n=this.compareString(e.get("display_name"),t.get("display_name")),n||this.compareString(e.id,t.id)))},compareString(e,t){return G.getCollator().compare(e,t)},compareDisplayNames(e,t){return this.compareString(e.get("display_name"),t.get("display_name"))},compareZones(e,t){return e.id===M.teamfoldersPath?-1:t.id===M.teamfoldersPath?1:e.id===M.commonFilesPath?-1:t.id===M.commonFilesPath?1:this.compareDisplayNames(e,t)},compareFileCategories(e,t){const i=vi[M.fileCategories.other];return(vi[e]||i)-(vi[t]||i)}};function xi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ei(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){xi(e,t,i[t])}))}return e}const Oi=/\.git$/,ji=e=>{let{path:t,name:i,type:r}=e;const n=i?F.urlDecode(i):"",o=r===$e.directory?n:n.replace(/(.+)\.[^.]+$/,"$1");let s="";if(r===$e.directory)Oi.test(t)&&(s="git");else if(r===$e.file){const e="._"===i.substring(0,2),t=i.lastIndexOf("."),r=t>0&&t<i.length-1;!e&&r&&(s=i.substring(t+1))}return{display_name:n,base_name:o,ext:s}};var ki={parseForFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e.file;const i=Ge.unifyPath(e),r=Ge.getParentPath(i);let n=null;r&&r!==M.rootPath&&(n=F.urlDecode(Ge.getLastComponent(r)));const o=Ge.getLastComponent(i)||"";let s=!!e&&Ge.isEncrypted(F.urlDecode(e));s=s?ri.encrypted:ri.unencrypted;return Ei({path:i,parentPath:r,parentName:n,name:o,encrypted:s,type:t},ji({path:i,name:o,type:t}))},parseForSharelink(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=$e.file;return Ei({path:e,name:e,type:t},ji({path:e,name:e,type:t}))}},Si={fromNative(e){const t=a().Deferred();return e.then((e=>t.resolve(e)),(e=>t.reject(e))),t.promise()},toNative(e){return new Promise(((t,i)=>{e.then((function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t.call(this,[...i])}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.call(this,[...t])}))}))}},Ti={getSyncedfolders(){const e=V.get().ajax({type:"GET",url:"/api/syncedfolder"});return Si.toNative(e).then((e=>{let[t]=e;return t}),(()=>[]))}};const Pi=(0,Jt.fZ)([]);var Di={get:()=>({subscribe:Pi.subscribe}),update:async function(){const e=(await Ti.getSyncedfolders()).map((e=>ki.parseForFile(e,$e.directory).path));return Pi.set(e),e}},Ci=e=>{if(e.type!==$e.directory)return{};const t=Di.get();return{syncedfolder:(0,Jt.U2)(t).includes(e.path)}};function Ii(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var zi=U.extend({defaults:{syncedfolder:!1,name:"",overwrite:!1,rcpt:"",successReportToSender:!1,incomingReportToOwner:M.mailuploads.reportToNone,parentPath:null,path:"",status:M.mailuploads.statusInvalid,ttl:1/0},idAttribute:"path",initialize(){U.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:syncedfolder",this._onSyncedfolderChange)},getPid(){return this.get("pid")},getItemType(){return"MailuploadItem"},parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ii(e,t,i[t])}))}return e}({syncedfolder:this.defaults.syncedfolder},e,ki.parseForFile(e.path,$e.directory));return Object.assign(t,Ci(t)),t.group=ni({type:$e.directory,ext:t.ext,encrypted:t.encrypted,syncedfolder:t.syncedfolder}),t.type=$e.directory,t.incomingReportToOwner=e.reportto,delete t.reportto,t.successReportToSender=e.reportok,delete t.reportok,delete t.writable,delete t.readable,"ttl"in e||(t.ttl=1/0),t},_onSyncedfolderChange(){const e=ni({encrypted:this.get("encrypted"),ext:this.get("ext"),syncedfolder:this.get("syncedfolder"),type:this.get("type")});this.set({group:e})}}),Li=wi.extend({model:zi,comparator(e,t){return _i.compareString(e.get("name"),t.get("name"))},sync(e,t,i){const r=fi.getMailupload();return r.then(i.success,i.error),r}});const $i=new Li([]);var Mi=()=>$i,Ai={visit(e){const t=Mi();return t.add(e,{parse:!0,merge:!0}),!!t.get(e.path)}};function Vi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Fi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function Bi(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Ni={createShareupload(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.path)throw new Error("path required to create shareupload");const{path:t}=e,i=Bi(e,["path"]),r=`path=${t}&type=dir&${li.paramsToString(i)}`;return new Promise(((e,t)=>{V.get().ajax({type:"POST",url:"/api/shareupload",data:r,processData:!1}).then((t=>{const i=Ge.unifyPath(t.path);xe.trigger("api:createShareupload",i,t.id),e(Fi(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Vi(e,t,i[t])}))}return e}({},t),{path:i}))}),t)}))}},Ri={deleteShareupload(e){if(!e)throw new Error("id required for deleteShareupload()");return new Promise(((t,i)=>{V.get().ajax({type:"DELETE",url:"/api/shareupload",processData:!1,data:`id=${e}`}).then((()=>{xe.trigger("api:deleteShareupload",e),t()}),(r=>{404===r.status&&(xe.trigger("api:deleteShareupload",e),t()),i()}))}))}};function Ui(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const Hi=["count","has_password","id","maxcount","maxsize","path","pid","status","ttl"].join(",");function Gi(e){return qi(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ui(e,t,i[t])}))}return e}({},e),{path:Ge.unifyPath(e.path)})}var Wi={getShareupload(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={fields:Hi};if(e){if("string"!=typeof e)throw new Error("getShareupload: optional id has to be of type string");t.id=e}return new Promise(((e,i)=>V.get().ajax({type:"GET",url:"/api/shareupload",data:t}).then((t=>{Array.isArray(t)&&e(t.map(Gi)),e(Gi(t))}),i)))}};function Ki(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Yi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function Xi(e){return Yi(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ki(e,t,i[t])}))}return e}({},e),{path:Ge.unifyPath(e.path)})}var Zi={updateShareupload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)throw new Error("updateShareupload: non-empty id required.");if(0===Object.keys(t).length)throw new Error("updateShareupload: non-empty attributes required.");const i=`id=${e}&${li.paramsToString(t)}`;return new Promise(((e,t)=>{V.get().ajax({type:"PUT",url:"/api/shareupload",data:i,processData:!1}).then((t=>e(Xi(t))),t)}))}};function Ji(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Qi=U.extend({defaults:{has_password:!1,maxcount:1/0,maxsize:1/0,syncedfolder:!1,name:"",path:"",status:M.shareuploads.statusInvalid,share_type:M.shareuploads.shareType,ttl:1/0,remaining:1/0,expirytime:null},idAttribute:"path",initialize(){U.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:syncedfolder",this._onSyncedfolderChange)},getPid(){return this.get("pid")},getItemType(){return"ShareuploadItem"},parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ji(e,t,i[t])}))}return e}({syncedfolder:this.defaults.syncedfolder},e,ki.parseForFile(e.path,$e.directory));return Object.assign(t,Ci(t)),t.group=ni({type:$e.directory,ext:t.ext,encrypted:t.encrypted,syncedfolder:t.syncedfolder}),delete t.created,delete t.last_modified,delete t.password,delete t.uri,t.type=$e.directory,"maxcount"in e||(t.maxcount=1/0),"maxsize"in e||(t.maxsize=1/0),"ttl"in e?t.expirytime=Date.now()/1e3+t.ttl|0:(t.ttl=1/0,t.expirytime=null),t.maxcount?t.remaining=t.maxcount-(t.count||0):t.remaining=1/0,t},getPreviewUri(){const e=g.getLocation();let t=e.origin+e.pathname.replace(/\/$/,"");return t+="/upl/",t+=this.get("id"),t},_onSyncedfolderChange(){const e=ni({encrypted:this.get("encrypted"),ext:this.get("ext"),syncedfolder:this.get("syncedfolder"),type:this.get("type")});this.set({group:e})}}),er=wi.extend({model:Qi,comparator(e,t){return _i.compareString(e.get("name"),t.get("name"))},sync(e,t,i){const r=Wi.getShareupload();return r.then(i.success,i.error),r}});const tr=new er([]);var ir=()=>tr,rr={visit(e){const t=ir();return t.add(e,{parse:!0,merge:!0}),!!t.get(e.path)}};function nr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function or(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){nr(e,t,i[t])}))}return e}function sr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var ar=U.extend({defaults:{encrypted:ri.unencrypted,mailupload:!1,syncedfolder:!1,name:"",parentName:null,parentPath:null,path:"",share:null,shareupload:null,teamfolder:!1,type:""},initialize(){U.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:syncedfolder",this._onSyncedfolderChange),this.listenTo(this,"change:encrypted",this._onEncryptionStateChange)},isDownloadable(){return!!this.get("readable")&&this.get("type")!==$e.symlink},getPid(){return this.id},getItemType(){return"FileItem-"+this.getContext()},hasMailupload(){return this.get("mailupload")},hasShareupload(){return!!this.get("shareupload")},canMailupload(){return this.get("type")===$e.directory&&this.get("writable")},canShareupload(){return this.get("type")===$e.directory&&this.get("writable")},parse(e,t){const i={dir:$e.directory,file:$e.file,symlink:$e.symlink}[e.type]||e.type,r=e.image&&e.image.height&&e.image.width?or({},e.image,ai.parse(e.image)):void 0,n=sr(or(sr(or({encrypted:this.defaults.encrypted,syncedfolder:this.defaults.syncedfolder},e),{type:i}),ki.parseForFile(e.path,i)),{image:r,share:this.defaults.share,mailupload:this.defaults.mailupload,shareupload:this.defaults.shareupload});if(Object.assign(n,Ci(n)),n.encrypted===ri.encrypted){const e=ti(n.name);e&&(n.display_name=e.nameDecrypted,n.encrypted=ri.decrypted,n.ext=n.type===$e.file?e.nameDecrypted.split(".").pop():"",n.category=(e=>{let{type:t,ext:i}=e;if(t===$e.directory)return M.fileCategories.directory;if(i){const e=Kt.get(i);if(e===Kt.groups.pdf||e===Kt.groups.text||e===Kt.groups.spreadsheet||e===Kt.groups.slide)return M.fileCategories.office;if(e in Kt.groups)return e}return M.fileCategories.other})({type:i,ext:n.ext}))}return n.group=ni({type:i,ext:n.ext,encrypted:n.encrypted,syncedfolder:n.syncedfolder}),n.isTempUploadFile="webupload"===n.ext,n.writable=!!n.writable&&n.encrypted===ri.unencrypted,n.renamable=!(n.encrypted!==ri.unencrypted||!n.writable&&!n.teamfolder||n.isTempUploadFile),n.teamfolder=!!n.teamfolder,n.isTempUploadFile&&t.stripTempfileMtime&&delete n.mtime,n.type===$e.directory&&delete n.mime_type,e.rshare&&(n.share=this._getShareId(e.rshare),n.mailupload=this._getMailupload(n.path,e.rshare),n.shareupload=this._getShareupload(n.path,e.rshare),delete n.rshare),n},_onSyncedfolderChange(){const e=ni({encrypted:this.get("encrypted"),ext:this.get("ext"),syncedfolder:this.get("syncedfolder"),type:this.get("type")});this.set({group:e})},_onEncryptionStateChange(){const e=ni({encrypted:this.get("encrypted"),ext:this.get("ext"),type:this.get("type")});this.set({group:e})},_getShareId(e){const t=e.find((e=>["sharedir","sharelink"].indexOf(e.share_type)>-1));return t&&t.id||null},_getMailupload(e,t){const i=t.find((e=>["mailupload"].indexOf(e.share_type)>-1));return!!i&&!!Ai.visit(or({path:e},i))},_getShareupload(e,t){const i=t.find((e=>["shareupload"].indexOf(e.share_type)>-1));return i?!!rr.visit(or({path:e},i))&&i.id:null},setName(e){let t=this.get("path");t=t.split("/").slice(0,-1).join("/"),t+="/"+encodeURIComponent(e),this.set(this.parse(sr(or({},this.attributes),{path:t})))},getMeta(e){const t={context:this.getContext(),fields:e};if(this.getPid()?t.pid=this.getPid():t.path=this.urlDecode("path"),!t.pid&&!t.path)throw new Error("FileModel.getMeta: model must provide either pid or path.");return Zt.getMeta(t)}}),lr={copyFiles(e,t){const i=t.map((e=>e.id)),r=a().Deferred(),n=e.getContext();if(t.some((e=>e.getContext()!==n)))throw new Error("context of source and target must be the same in copyFiles");return V.get(n).ajax({method:"POST",url:"/api/fs/copy",traditional:!0,data:{src_id:i,dst_id:e.get("id"),on_exist:"autoname",preserve_mtime:!0}}).done(((i,o,s)=>{const a=i.done.map((e=>new ar(e,{parse:!0,context:n}))),l=i.failed.map((e=>t.find((t=>{let{id:i}=t;return i===e.src_id}))));xe.trigger("api:copyFiles:done",e.get("path"),a),l.length>0?(xe.trigger("api:copyFiles:error",l,a),r.reject(l,a,s)):(xe.trigger("api:copyFiles:success",e,a),r.resolve(a))})).fail((e=>{const i=t;xe.trigger("api:copyFiles:error",i,[]),r.reject(i,[],e)})),r.promise()}},dr={createGitRepository(e,t){var i={};if(!e)throw new Error("parentFolder required in api.createGitRepository");if(!d().isString(t)||""===t)throw new Error("name for new repository required in api.createGitRepository");return i.pid=e.get("id"),i.path=t,V.get().ajax({url:"/api/git/init",type:"POST",data:i}).done((function(t){var i=new ar(t,{parse:!0,context:e.getContext()});xe.trigger("api:newFolder:created",e.get("path"),i)}))}},cr={createShareDir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.pid)throw new Error(`pid required to create sharedir, config given: ${JSON.stringify(e)}`);return new Promise(((t,i)=>{V.get().ajax({type:"POST",url:"/api/share",data:e}).then((e=>{xe.trigger("api:createShareDir",e.pid,e.id),t(e)}),i)}))}};function hr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ur(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var pr={createShareLink(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.pid)throw new Error("pid required in createShareLink()");const t=ur(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){hr(e,t,i[t])}))}return e}({},e),{type:"file"});return new Promise(((i,r)=>{V.get().ajax({type:"POST",url:"/api/sharelink",data:t}).then((t=>{xe.trigger("api:createShareLink",e.pid,t.id),i(t)}),r)}))}};function gr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var mr=U.extend({url:"/api/snapshot",parse(e){let t;return e.zone&&(t=Ge.unifyPath(e.zone)),function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){gr(e,t,i[t])}))}return e}({id:e.name+"@"+t},e,t?{zone:t}:null)}}),fr={createSnapshot(e,t){var i={};if("string"!=typeof e)throw new Error("zone required for Api.createSnapshot");if("string"!=typeof t)throw new Error("name required for Api.createSnapshot");return i.zone=e,i.name=t,V.get().isAdmin()&&(i.scope="all"),V.get().ajax({method:"POST",url:"/api/snapshot",data:i}).done((function(e){var t=new mr(e,{parse:!0});xe.trigger("api:createSnapshot:success",t)}))}},br={createTeamfolder(e){var t,i=a().Deferred();if(!d().isString(e))throw new Error("path is required for Api.createTeamfolder");return t={path:e,shareable:!0},V.get().ajax({method:"POST",url:"/api/teamfolder",data:t}).done((function(e){var t=new ar(e,{parse:!0,context:M.authContext.default});xe.trigger("api:createTeamfolder:success",t),i.resolve(t)})).fail((function(e){i.reject(e)})),i.promise()}},yr={deleteApp(e,t){var i;if(!e)throw new Error("AccountId required for deleteApp()");if(!t)throw new Error("AppId required for deleteApp()");return i={account:e,id:t},V.get().isAdmin()&&(i.scope="all"),new Promise(((e,t)=>{V.get().ajax({type:"DELETE",url:"/api/app",data:i}).then(e,(i=>404===i.status?e():t()))}))}},wr=de.Object.extend({initialize(){this.queues={}},_checkType(e){return d().isString(e)},_checkArray(e){return Array.isArray(e)},_testForInvalidModels(e){var t=d().find(e,(function(e){return!(e instanceof o().Model)}));return!!t},_getQueue(e){return this.queues[e]||(this.queues[e]=new(o().Collection)),this.queues[e]},_remove(e,t,i){return(t=d().compact(this._getQueue(e).remove(t,{silent:!0}))).length&&this.trigger(i,e,t),t},add(e,t){var i;if(!this._checkType(e))throw new Error("invalid type in DeleteList.add()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.add()");if(this._testForInvalidModels(t))throw new Error("not only models in array given in DeleteList.add()");return i=t.map((function(e){return e.clone()})),i=this._getQueue(e).add(i,{silent:!0}),this.trigger("added",e,i),i},recover(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.recover()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.recover()");return this._remove(e,t,"recovered")},drop(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.drop()");if(!this._checkArray(t))throw new Error("no models array given in DeleteList.drop()");return this._remove(e,t,"dropped")},findByType(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.findByType()");if(d().isUndefined(t))throw new Error("missing model in DeleteList.findByType()");return this._getQueue(e).get(t)},filterByType(e,t){if(!this._checkType(e))throw new Error("invalid type in DeleteList.filterByType()");return"function"==typeof t?this._getQueue(e).models.filter(t):d().where(this._getQueue(e).models,t)}}),vr=new wr,_r={deleteFiles(e){const t=a().Deferred();if(!Array.isArray(e))throw new Error("deleteFiles accepts only an array");if(0===e.length)return t.resolve([],[]),t.promise();const i=e[0].getContext(),r=e[0].getItemType();if(e.some((e=>e.getContext()!==i)))throw new Error("context of all files must be the same in deleteFiles");if(e.some((e=>e.getItemType()!==r)))throw new Error("itemType of all files must be the same in deleteFiles");const n=vr.add(r,e);return V.get(i).ajax({url:"/api/fs/delete",method:"POST",data:{pid:e.map((e=>{let{id:t}=e;return t})),recursive:!0},traditional:!0}).then(null,(e=>a().Deferred().resolve(e.responseJSON||{},e.statusText,e))).then(((i,o,s)=>{const a=[];let l=[];if("timeout"===o)return t.reject([],[],s),void vr.drop(r,e);i.done&&i.failed?(i.failed.forEach((e=>{"404"===e.code?a.push(n.find((t=>{let{id:i}=t;return i===e.id}))):l.push(n.find((t=>{let{id:i}=t;return i===e.id})))})),i.done.forEach((e=>{a.push(n.find((t=>{let{id:i}=t;return i===e.id})))}))):l=n,a.length&&vr.drop(r,a),l.length&&vr.recover(r,l),l.length&&xe.trigger("api:deleteFiles:error",l,a),a.length?t.resolve(l,a,s):t.reject(l,[],s)})),t.promise()}},xr={deleteInvitation(e){if("string"!=typeof e||0===e.trim().length)throw new Error("inviteId must be non-empty string");return V.get().ajax({type:"DELETE",url:"/api/user/invite",data:{invite_id:e}})}},Er={deleteShareDir(e){if(!e)throw new Error("id required for deleteShareDir()");return new Promise(((t,i)=>{V.get().ajax({type:"DELETE",url:"/api/share",data:{id:e}}).then((()=>{xe.trigger("api:deleteShareDir",e),t()}),(r=>{404===r.status&&(xe.trigger("api:deleteShareDir",e),t()),i()}))}))}},Or={deleteShareLink(e){if(!e)throw new Error("id required for deleteShareLink()");return new Promise(((t,i)=>{V.get().ajax({type:"DELETE",url:"/api/sharelink",data:{id:e}}).then((()=>{xe.trigger("api:deleteShareLink",e),t()}),(r=>{404===r.status&&(xe.trigger("api:deleteShareLink",e),t()),i()}))}))}},jr={deleteSnapshot(e){var t,i="SnapshotItem",r=a().Deferred();if(d().isUndefined(e))throw new Error("argument required for api.deleteSnapshot");if(!(e instanceof mr))throw new Error("snapshot model required for api.deleteSnapshot");return vr.add(i,[e]),t={zone:e.get("zone"),name:e.get("name")},V.get().isAdmin()&&(t.scope="all"),V.get().ajax({type:"DELETE",url:"/api/snapshot",data:t}).done((function(){vr.drop(i,[e]),r.resolve()})).fail((function(t){404===t.status?(vr.drop(i,[e]),r.resolve()):(vr.recover(i,[e]),r.reject())})),r.promise()}},kr={deleteSshKey(e,t){if(!e)throw new Error("accountId required for deleteSshKey()");if(!t)throw new Error("keyId required for deleteSshKey()");return V.get().ajax({type:"DELETE",url:"/api/user/key",data:{account:e,id:t}})}},Sr={deleteTeamfolder(e){if(!e)throw new Error("apiWrapper.deleteTeamfolder: teamfolderId required.");return V.get().ajax({type:"DELETE",url:"/api/teamfolder",data:{pid:e}})}},Tr={deleteUser(e){if(!e)throw new Error("accountId must be provided for deleteUser()");if("string"!=typeof e)throw new Error("accountId must be a string for deleteUser()");return V.get().ajax({type:"DELETE",url:"/api/user",data:{account:e}})}},Pr={disable2FA(){return V.get().ajax({url:"/api/user/2fa",type:"DELETE"})}};var Dr={download(e){let t,i,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e||e.length<=0?Promise.reject(new Error("no models given to download")):(r=e.length?e:[e],r.length>1?(t=!0,i=n.base||function(e){const t=Ge.findCommonPath(e.map((e=>e.get("path"))));return new ar({path:t},{parse:!0,context:e[0].getContext()})}(r)):r[0].get("type")===$e.directory?(t=!0,i=r[0]):(t=!1,i=r[0]),new Promise(((e,o)=>{i.getMeta(["id","name"]).then((e=>t?function(e,t,i,r,n){const o=[],s=new URLSearchParams;r&&o.push(r),n?o.push(n.replace(/\/|\n|\r/g,"")):o.length&&""!==t&&o.push(t);for(const e of i)s.append("src_id",e.getPid());return s.append("base_id",e),o.length&&s.append("filename",`${o.join("-")}.zip`),`/api/file/archive/download?${s.toString()}`}(e.id,e.name,r,n.archivePrefix,n.archiveName):function(e){const t=`/api/file?attachment=true&pid=${e.getPid()}`;return V.get().ajax({type:"HEAD",url:t}).then((()=>t))}(r[0]))).then((t=>{g.setLocation(V.get(i.getContext()).addAuthToUrl(t)),e()}),(e=>{o(e)}))})))}},Cr={enable2FA(e,t){if(!e)throw new Error("verifyToken is missing in api.enable2FA");if(!d().isString(t)||""===t)throw new Error("secret should be a string in api.enable2FA");return V.get().ajax({url:"/api/user/2fa",type:"POST",data:{verify_token:e,secret:t}})}},Ir={getApps(e){var t;if(!e)throw new Error("accountId required for getApps()");return t={account:e},V.get().isAdmin()&&(t.scope="all"),V.get().ajax({type:"GET",url:"/api/app/list",data:t})}},zr=M.authContext.deviceBackups,Lr={getDeviceBackupSize(){if(!V.get().getFeatures().backup)return a().Deferred().resolve(0).promise();return V.get(zr).login().then(function(){return this.getMeta({context:zr,path:M.rootPath,fields:["size"]}).then((function(e){return e.size}))}.bind(this),(function(){return a().Deferred().resolve(0).promise()}))}};function $r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Mr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){$r(e,t,i[t])}))}return e}var Ar={getDir:(e,t,i)=>{const r=a().Deferred(),n=r.promise();let o;const s=5e3;let l={},d=[];return function n(){const a=d.length,c=Mr({},i);c.limit=[a,s].join(","),c.sort=c.sort||"none",o=V.get(t).ajax({type:"GET",dataType:"json",url:"/api/dir?path="+e,data:c}),o.then((e=>{Array.isArray(e.members)&&(d=d.concat(e.members)),l=Mr({},e),delete l.members,Array.isArray(e.members)&&e.members.length===s?n():(l.members=d,r.resolve(l))}),((e,t,i)=>{"abort"!==i&&r.reject(e,t,i)}))}(),n.abort=()=>{o.abort()},n}};const Vr="X-hdcrypt-dirkey";function Fr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Br(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Fr(e,t,i[t])}))}return e}function Nr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var Rr={getEncryptedDir:(e,t,i,r,n)=>{const o=a().Deferred(),s=o.promise();let l;const d=5e3;let c={},h=[];return function s(){const a=h.length,u=Br({},i);u.limit=[a,d].join(","),u.sort=u.sort||"none",l=V.get(t).ajax({type:"GET",dataType:"json",url:`/local/transparent-decrypt/dir?path=${e}`,data:u,beforeSend:e=>{e.setRequestHeader(n,r)}}),l.then((e=>{Array.isArray(e.members)&&(h=h.concat(e.members)),c=Nr(Br({},e),{dirKey:l.getResponseHeader(Vr)}),delete c.members,Array.isArray(e.members)&&e.members.length===d?s():(c.members=h,o.resolve(c))}),((e,t,i)=>{"abort"!==i&&o.reject(e,t,i)}))}(),s.abort=()=>{l.abort()},s}},Ur={getFile(e){if(!e.pid&&!e.path)throw new Error("apiWrapper.getFile: either pid or path parameter are mandatory.");return V.get(e.context).ajax({url:"/api/file",method:"GET",data:d().pick(e,"pid","path")})}},qr={getInvitations(e){var t={url:"/api/user/invite",data:{}};if(void 0!==e){if("string"!=typeof e||""===e)throw new Error("Api.getInvitations: invitationId-parameter must be non-empty string");t.data.invite_id=e}return V.get().ajax(t).then((function(e){return e}))}},Hr={getOrderableAddons(){return new Promise(((e,t)=>{V.get().ajax({type:"GET",url:"/api/status/orderables"}).then(e,t)}))}},Gr={getOrderLink(e){if(!Object.values(M.addonCategories).includes(e))throw new Error(`getOrderLink: unknown category '${e}'. Use valid category of AddonCategory type`);const t={category:e};return new Promise(((e,i)=>{V.get().ajax({data:t,type:"GET",url:"/api/status/orderables/link"}).then((t=>{e({base_url:t.base_url,shop_url:t.shop_url})}),i)}))}},Wr={getPermission(e,t){if(!e)throw new Error("accountId required for getPermission()");if(!t)throw new Error("path required for getPermission()");return V.get().ajax({type:"GET",url:"/api/permission",data:{path:t,account:e}})}},Kr={getProperties(){return new Promise(((e,t)=>{V.get().ajax({url:"/api/properties"}).then(e,t)}))}},Yr=["id","pid","count","ttl","has_password","path","status","created","writable","last_modified","share_type","viewmode"].join(","),Xr={getShareDir(e){var t={fields:Yr};return e&&(t.id=e),V.get().ajax({type:"GET",url:"/api/share",data:t})}};const Zr=["count","created","has_password","id","image.exif","image.height","image.width","last_modified","maxcount","mime_type","path","pid","share_type","size","status","ttl"].join(",");var Jr={getShareLink(e){const t={fields:Zr};return e&&(t.id=e),V.get().ajax({type:"GET",url:"/api/sharelink",data:t})}},Qr={getShareLinkInfo(){let{id:e,fields:t,password:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("getShareLinkInfo: id required");if(t&&!Array.isArray(t))throw new Error("getShareLinkInfo: fields option must be an array");const r={id:e};return i&&(r.password=i),t&&t.length>0&&(r.fields=t.join(",")),a().post("/api/sharelink/info",r)}},en={getShareLinkThumbnail(e,t){const i={id:e};if(!(null!=e&&"string"==typeof e))throw new Error("shareId parameter to getShareLinkThumbnail() has to be a string");if(!isNaN(Number(t.width))&&t.width>0&&(i.width=t.width),!isNaN(Number(t.height))&&t.height>0&&(i.height=t.height),!i.height&&!i.width)throw new Error("At least width or height should be passed");return t.password&&(i.password=t.password),new Promise(((e,t)=>{const r=new XMLHttpRequest;g.isCreateObjectURLSupported()||t("createObjectURL is not supported"),r.open("POST","/api/sharelink/thumbnail",!0),r.responseType="blob",r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onload=function(){200===r.status?e(g.createObjectURL(r.response)):t(r)},r.onerror=function(){t(r)},r.send(li.paramsToString(i))}))}},tn={getSnapshots(e){var t={};if("string"!=typeof e)throw new Error("path required for api.getSnapshots");return t.path=e,V.get().isAdmin()&&(t.scope="all"),V.get().ajax({url:"/api/snapshot",data:t})}},rn={getSshKeys(e){if(!e)throw new Error("accountId required for getSshKeys()");return V.get().ajax({type:"GET",url:"/api/user/key",data:{account:e}})}};var nn={getTeamfolder(e){var t;return t=function(e){if(void 0!==e){if("object"!=typeof e)throw new Error("params of type object is required by api.getTeamfolder");if(void 0!==e.path){if("string"!=typeof e.path)throw new Error("path of type string required by api.getTeamfolder");if("/"!==e.path.substr(0,1))throw new Error("path should start with /");return{path:e.path}}if(void 0!==e.pid){if("string"!=typeof e.pid)throw new Error("pid of type string required by api.getTeamfolder");if(0===e.pid.length)throw new Error("pid is required by api.getTeamfolder");return{pid:e.pid}}throw new Error("pid or path parameters is always mandatory")}}(e),V.get().ajax({type:"GET",url:"/api/teamfolder",data:t})}},on={getTeamfolderUsers(e){if(!e||"string"!=typeof e)throw new Error("getTeamfolderUsers: teamfolderId must be non-empty string");return V.get().ajax({type:"GET",url:"/api/teamfolder/users",data:{pid:e}})}},sn={a:je.TILES,b:je.LIST,c:je.FLUID},an=d().invert(sn);function ln(e){return Object.keys(an).indexOf(e)>-1?e:je.LIST}var dn={fromApi(e,t){return sn[e]||ln(t)},toApi(e,t){return an[e]||an[ln(t)]}};function cn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){cn(e,t,i[t])}))}return e}const un=je.LIST;var pn=U.extend({defaults:{syncedfolder:!1,name:"",type:"",path:"",parentPath:null,remaining:1/0,viewmode:un},initialize(){U.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:syncedfolder",this._onSyncedfolderChange)},getPid(){return this.get("pid")},getItemType(){return"ShareItem"},parse(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e="share_type"in t?"sharelink"===t.share_type?$e.file:$e.directory:{dir:$e.directory,file:$e.file}[t.type]||t.type;const i=hn({syncedfolder:this.defaults.syncedfolder},t,ki.parseForFile(t.path,e),ai.parse(t.image));return Object.assign(i,Ci(i)),i.group=ni({type:e,ext:i.ext,encrypted:i.encrypted,syncedfolder:i.syncedfolder}),i.maxcount?i.remaining=i.maxcount-(i.count||0):i.remaining=1/0,i.viewmode&&(i.viewmode=dn.fromApi(i.viewmode,un)),i},async updateShare(e){let t;const i=Object.assign({},{id:this.get("id")},e);t="sharelink"===this.get("share_type")?"/api/sharelink":"/api/share";const[r]=await Si.toNative(V.get().ajax({type:"PUT",url:t,data:i}));if(r){const e=this.parse(hn({type:this.get("type")},r));this.set(e);["has_password","ttl","maxcount","remaining"].forEach((t=>{t in e||this.unset(t)}))}},getPreviewUri(){const e=g.getLocation();let t=e.origin+e.pathname.replace(/\/$/,"");return t+="sharedir"===this.get("share_type")?"/share/":"/lnk/",t+=this.get("id"),t},loadFolderWritableAttribute(){if(this.get("type")!==$e.directory)return Promise.resolve();const e={context:this.getContext(),pid:this.getPid(),fields:["writable"]};return Zt.getMeta(e).then(function(e){this.set("folderWritable",e.writable)}.bind(this))},async invite(e,t,i){let r,n;if(Array.isArray(e)||(e=[e]),!(e=e.filter((function(e){return"string"==typeof e}))).length)throw new Error("no emails given for invite");if(t&&"string"!=typeof t)throw new Error("msg should be a string");n={id:this.get("id"),recipient:e,msg:t},i&&"string"==typeof i.lang&&(n.lang=i.lang),r="sharelink"===this.get("share_type")?"/api/sharelink/invite":"/api/share/invite";try{const[e]=await Si.toNative(V.get().ajax({type:"POST",url:r,traditional:!0,data:n}));if(e&&e.failed&&e.failed.length)throw[e];return this.trigger("invite:success"),e}catch(e){let[t]=e;const i={done:t.done.map((e=>e.to)),failed:t.failed.map((e=>e.to))};throw this.trigger("invite:error",i),[i]}},_onSyncedfolderChange(){const e=ni({encrypted:this.get("encrypted"),ext:this.get("ext"),syncedfolder:this.get("syncedfolder"),type:this.get("type")});this.set({group:e})}});var gn={getThumbnail(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof ar||e instanceof pn))throw new Error("expecting ShareItem or FileModel");return t=function(e,t){const i=e.getPid();if(!i)throw new Error("pid missing in model");let r="/api/file/thumbnail?pid="+i;return t.width&&(r+="&width="+Math.ceil(t.width)),t.height&&(r+="&height="+Math.ceil(t.height)),e.has("mtime")&&(r+="&refresh_time="+e.get("mtime")),r=V.get(e.getContext()).addAuthToUrl(r),r}(e,i),t}};const mn=M.userFields.join(",");var fn={getUsers(e,t){const i={};if(e){if(!Array.isArray(e)||0===e.length)throw new Error("Api.getUsers: fields-parameter must be non-empty array.");if(e.find((e=>"string"!=typeof e)))throw new Error("Api.getUsers: fields-parameter must be string array.");i.fields=[...e].join(",")}else i.fields=`${mn},protocols`;if(void 0!==t){if("string"!=typeof t||0===t.length)throw new Error("Api.getUsers: accountId-parameter must be non-empty string");i.account=t}return V.get().isAdmin()&&(i.scope="all"),V.get().ajax({url:"/api/user",data:i})}},bn={getUserTeamfolders(e){if(!e||"string"!=typeof e)throw new Error("getUserTeamfolders: accountId must be non-empty string");return V.get().ajax({type:"GET",url:"/api/user/teamfolders",data:{account:e}})}},yn={getZones(){var e={};return V.get().isAdmin()&&(e.scope="all"),V.get().ajax({url:"/api/zone",data:e})}},wn={async initDecryptedDownload(e){if(!e||e.get("encrypted")!==ri.decrypted)return Promise.reject(new Error("no decrypted model given to initDecryptedDownload"));if(!e.has("_encrypted")||!e.get("_encrypted").keyFilePid)return Promise.reject(new Error("no keyFilePid found in model given to initDecryptedDownload"));const t=ti(e.get("name")),i=null==t?void 0:t.parentDirKey;if(!i)return Promise.reject(new Error(`No directory key mapping found for "${e.get("parentName")}"`));const r=e.get("_encrypted").keyFilePid,n=`Bearer ${V.get()._accessToken}`,o=`/local/transparent-decrypt/init-download?pid=${r}`,s=await fetch(o,{headers:{Authorization:n,[Vr]:i,"X-hdcrypt-decrypted-filename":encodeURIComponent(e.get("display_name"))}}),a=await s.json();if(!a.code)return Promise.reject(new Error("No download code in response data."));const l=a.code;return`/local/transparent-decrypt/file?pid=${e.getPid()}&code=${l}`}},vn={inviteUser(e){if(!d().isObject(e))throw new Error("attributes should not be empty for inviteUser()");if(!e.email)throw new Error("no email provided as attribute for inviteUser()");if(!e.descr)throw new Error("no descr provided as attribute for inviteUser()");return V.get().ajax({type:"POST",url:"/api/user/invite",traditional:!0,data:e})}},_n={moveFiles(e,t){var i=e.getItemType(),r=d().pluck(t,"id"),n=[],o=[],s=a().Deferred(),l=e.getContext();if(d().some(t,(function(e){return e.getContext()!==l})))throw new Error("context of source and target must be the same in moveFiles");if(d().some(t,(function(e){return e.getItemType()!==i})))throw new Error("itemType of source and target must be the same in moveFiles");return vr.add(i,t),V.get(l).ajax({method:"POST",url:"/api/fs/move",traditional:!0,data:{src_id:r,dst_id:e.get("id"),on_exist:"autoname"}}).done((function(r,a,c){var h;n=r.done.map((function(e){return new ar(e,{parse:!0,context:l})})),o=r.failed.map((function(e){return d().find(t,(function(t){return t.get("id")===e.src_id}))})),h=d().difference(t,o),o.length&&vr.recover(i,o),h.length&&vr.drop(i,h),xe.trigger("api:moveFiles:done",e.get("path"),n),o.length>0?(xe.trigger("api:moveFiles:error",o,n),s.reject(o,n,c)):(xe.trigger("api:moveFiles:success",e,n),s.resolve(n))})).fail((function(e){if("timeout"===e.statusText)return s.reject([],[],e),void vr.drop(i,t);vr.recover(i,t),xe.trigger("api:moveFiles:error",t,[]),s.reject(t,[],e)})),s.promise()}};function xn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function En(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){xn(e,t,i[t])}))}return e}function On(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var jn={newFile(e){let t,i={},r="POST";if("object"!=typeof e)throw new Error("newFile needs a valid options object parameter");if(!(e.folder instanceof ar))throw new Error("newFile needs a valid target folder");if("string"!=typeof e.filename)throw new Error("newFile needs a filename");if(e.content&&!(e.content instanceof Blob))throw new Error("newFile content must be Blob.");if(e.onProgress&&"function"!=typeof e.onProgress)throw new Error("newFile needs a function as onProgress callback.");if(e.on_exist&&!["autoname","overwrite"].includes(e.on_exist))throw new Error("newFile needs only accepts {autoname|overwrite|falsy} to on_exist.");const n=e.folder.get("path"),o={dir_id:e.folder.get("id"),name:e.filename};"overwrite"===e.on_exist?r="PUT":o.on_exist="autoname",e.mtime&&(o.mtime=e.mtime),e.content&&(i={timeout:0,processData:!1,contentType:!1,data:e.content}),e.onProgress&&(i=On(En({},i),{xhr(){const t=a().ajaxSettings.xhr();return t.upload.onprogress=e.onProgress,t}}));const s=new Promise(((s,a)=>{V.get(e.folder.getContext()).ajax(En({method:r,url:"/api/file?"+li.paramsToString(o),beforeSend(e){t=e}},i)).then((t=>{var i=new ar(t,{parse:!0,context:e.folder.getContext()});xe.trigger("api:newFile:created",n,i),s(i)}),a)}));return s.abort=()=>{t&&t.abort()},s}},kn={newFileFromTemplate(){let{folder:e,filename:t,template:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e instanceof ar))throw new Error("newFileFromTemplate: 'folder' model required.");if(!t||"string"!=typeof t)throw new Error("newFileFromTemplate: non-empty 'filename' string required.");if(!i||"string"!=typeof i)throw new Error("newFileFromTemplate: non-empty 'template' string required.");const r=e.get("path"),n={dir_id:e.get("id"),name:t,tmpl:i};return new Promise(((t,i)=>{V.get(e.getContext()).ajax({method:"POST",url:"/api/file/new",data:n}).then((i=>{const n=new ar(i,{parse:!0,context:e.getContext()});xe.trigger("api:newFile:created",r,n),t(n)}),i)}))}},Sn={newFolder(e,t,i){if("object"!=typeof e)throw new Error("newFolder needs a target folder");if("string"!=typeof t)throw new Error("newFolder needs a new folder name");const r={pid:e.get("id"),path:t};return i&&(r.on_exist="autoname"),new Promise(((t,i)=>{V.get(e.getContext()).ajax({method:"POST",url:"/api/dir",data:r}).done((function(i){const r=new ar(i,{parse:!0,context:e.getContext()});xe.trigger("api:newFolder:created",e.get("path"),r),t(r)})).fail(i)}))}},Tn={patchFile(e,t,i,r){let n;if(!(e instanceof ar))throw new Error("model parameter to patchFile() should be a FileModel");if(!d().isNumber(i))throw new Error("offset parameter to patchFile() should be a number");if(i<0)throw new Error("offset parameter to patchFile() should be >= 0");if(!(t instanceof window.Blob))throw new Error("chunk parameter to patchFile() should be instance of Blob");const o=new Promise(((o,s)=>{V.get(e.getContext()).ajax({method:"PATCH",url:"/api/file?"+li.paramsToString({pid:e.getPid(),offset:i,mtime:e.get("mtime")}),timeout:0,processData:!1,contentType:!1,data:t,xhr(){var e=a().ajaxSettings.xhr();return d().isFunction(r)&&(e.upload.onprogress=r),e},beforeSend(e){n=e}}).then(o,s)}));return o.abort=()=>{n&&n.abort()},o}},Pn={rename(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e instanceof ar!=!0)throw new Error("FileItem Model required to rename");if(!d().isString(t))throw new Error("new name of type string required by rename");const n=e.get("type")===$e.directory;if(i&&["autoname","overwrite"].indexOf(i)<0)throw new Error("invalid conflict decision given to rename");if("overwrite"===i&&n)throw new Error("overwrite not possible for directories on rename");return new Promise(((o,s)=>{let a=!0;const l=e.clone();function d(t,i,r){l.set(l.parse(t)),xe.trigger("api:rename:success",e,l,r),o(l)}function c(t){r||xe.trigger("api:rename:error",e,l,t),s(t)}l.setName(t),(t.indexOf("/")>=0||t.match(/^\.{1,2}$/))&&(a=!1,c({status:400,statusText:"invalid name"})),e.get("display_name")===t&&(a=!1,d(l.attributes,0,{status:200,statusText:"OK"})),xe.trigger("api:rename:start",e,l);const h=n?"/api/dir/rename":"/api/file/rename";a&&V.get(e.getContext()).ajax({type:"POST",url:h,data:{pid:l.get("id"),name:l.get("display_name"),on_exist:i}}).done(d).fail(c)}))}};function Dn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Cn={search(e){let{context:t,path:i,fields:r,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=a().Deferred(),s=o.promise();if(!e||"object"!=typeof e)throw new Error("search: queryParams object is required");const l=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Dn(e,t,i[t])}))}return e}({},e);if(n){if(!/^\d+$/.test(n))throw new Error("search: limit option must be a number");l.limit=n}else if(0===n)throw new Error("search: limit option must be greater or equal 1");if(r){if(!Array.isArray(r))throw new Error("search: fields option must be an array");r.length>0&&(l.fields=r.join(","))}return i&&(l.path=i),V.get(t||"").ajax({url:"/api/search",data:l,beforeSend(e){s.abort=e.abort},traditional:!0}).done((function(e){o.resolve(e.result)})).fail((function(e){o.reject(e)})),s}},In={unzip(e,t){var i=a().Deferred();if(!d().isObject(e))throw new Error("unzip needs a valid file");if(!d().isObject(t))throw new Error("unzip needs a valid destination folder");if(e.getContext()!==t.getContext())throw new Error("context of source file and destination must be the same in unzip");return V.get(t.getContext()).ajax({method:"POST",url:"/api/file/archive/inflate",data:{pid:e.id,dst_id:t.id,exists:"skipall",forbidden:"skipall",unprocessable:"skipall"}}).done((function(e){i.resolve(e)})).fail((function(t){i.reject(e,t)})),i.promise()}},zn={updatePermission(e){var t,i,r,n=a().Deferred();if(!d().isObject(e))throw new Error("attributes object required for updatePermission()");if(!e.account&&!e.invite_id)throw new Error("attributes.account or invite_id required for updatePermission()");if(e.account&&e.invite_id)throw new Error("attributes.account and invite_id are exclusive for updatePermission()");if(e.account&&(t=e.account),e.invite_id&&(t=e.invite_id),!e.path)throw new Error("attributes.path required for updatePermission()");if(i=e.path,r=d().pick(e.permissions,"readable","writable"),d().isEmpty(r))throw new Error("a valid permission needs to be specified");return V.get().ajax({type:"PUT",url:"/api/permission",data:d().extend(d().pick(e,"invite_id","account","path"),r)}).done((function(e){n.resolve(e)})).fail((function(e){n.reject(t,i,e)})),n.promise()}},Ln={updateProperties(e){if("object"!=typeof e)throw new Error("updateProperties: object required.");return new Promise(((t,i)=>{V.get().ajax({method:"PUT",url:"/api/properties",contentType:"application/json",data:JSON.stringify(e)}).then((()=>t()),i)}))}};function $n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Mn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){$n(e,t,i[t])}))}return e}function An(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var Vn={updateShareDir(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)throw new Error("updateShareDir: non-empty id required.");return new Promise(((i,r)=>{V.get().ajax({type:"PUT",url:"/api/share",data:An(Mn({},t),{id:e})}).then(i,r)}))}};function Fn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Bn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Fn(e,t,i[t])}))}return e}var Nn={updateShareLink(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)throw new Error("updateShareLink: non-empty id required.");if(0===Object.keys(t).length)throw new Error("updateShareLink: non-empty attributes required.");return new Promise(((i,r)=>{V.get().ajax({type:"PUT",url:"/api/sharelink",data:Bn({id:e},t)}).then(i,r)}))}},Rn={updateTeamfolder(e,t){var i;if(!d().isString(e))throw new Error("source pid is required for Api.updateTeamfolder");if(!d().isString(t))throw new Error("target name is required for Api.updateTeamfolder");return i={pid:e,name:t},V.get().ajax({method:"PUT",url:"/api/teamfolder",data:i})}};function Un(e,t){return e&&"object"==typeof e?"string"!=typeof e[t]?new Error("permissionsFormat: permission."+t+" is not string"):e[t]?"boolean"!=typeof e.readable?new Error("permissionsFormat: permission.readable is not boolean"):"boolean"!=typeof e.writable?new Error("permissionsFormat: permission.writable is not boolean"):null:new Error("permissionsFormat: permission."+t+" must be non-empty string"):new Error("permissionsFormat: permission is not an object")}var qn={ensureFolderPermissionFormat(e){var t,i;if(!Array.isArray(e))return new Error("ensureFolderPermissionFormat: expected array");for(t=0;t<e.length;t++)if(i=Un(e[t],"pid"))return i;return null},ensureAccountPermissionFormat(e){var t,i;if(!Array.isArray(e))return new Error("ensureAccountPermissionFormat: expected array");for(t=0;t<e.length;t++)if(i=Un(e[t],"account"))return i;return null}},Hn={updateTeamfolderUsers(e,t){var i;if(!e||"string"!=typeof e)throw new Error("updateTeamfolderUsers: teamfolderId must be non-empty string");if(i=qn.ensureAccountPermissionFormat(t))throw i;return V.get().ajax({type:"PUT",url:"/api/teamfolder/users",contentType:"application/json",data:JSON.stringify({pid:e,users:t})})}};function Gn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Wn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Gn(e,t,i[t])}))}return e}function Kn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var Yn={updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=a().Deferred();if(!e)throw new Error("accountId required for updateUser()");if(0===Object.entries(t).length)throw new Error("attributes should not be empty for updateUser()");return i.notify(),V.get().ajax({type:"PUT",url:"/api/user",data:Kn(Wn({},t),{account:e})}).done((r=>{t.email&&t.email!==r.email&&xe.trigger("api:email:dirty",e,t.email),xe.trigger("api:updateUser:success",e,r),i.resolve(r)})).fail((r=>{xe.trigger("api:updateUser:error",e,t,r),i.reject(r)})),i.promise()}},Xn={updateUserTeamfolders(e,t){var i;if("string"!=typeof e||""===e)throw new Error("updateUserTeamfolders: accountId must be non-empty string");if(i=qn.ensureFolderPermissionFormat(t))throw i;return V.get().ajax({type:"PUT",url:"/api/user/teamfolders",contentType:"application/json",data:JSON.stringify({account:e,teamfolders:t})})}},Zn=U.extend({idAttribute:"name",url:"/api/zone",defaults:{quota:0,available:0,used:0,usedbysnapshots:0,usedbyfiles:0,sched_interval:null,sched_ttl:null},parse(e){var t=[null,null],i=d().extend({},e);return d().has(i,"name")&&(i.name=Ge.unifyPath(i.name)),d().has(i,"parent")&&(i.parent=i.parent?Ge.unifyPath(i.parent):i.parent),w.get("hasBackup")||(i.usedbysnapshots=0),i.usedbyfiles=i.used-i.usedbysnapshots,i&&i.sched&&(t=i.sched.split(":")),delete i.sched,d().extend(i,{sched_interval:t[0],sched_ttl:t[1]}),i},fetch(){throw new Error("fetch zones collection, not the model!")}}),Jn={zipInfo(e){var t=a().Deferred();if(!(e instanceof ar))throw new Error("FileModel required for zipInfo");if("zip"!==e.get("ext"))throw new Error(".zip extension required for zipInfo");return V.get(e.getContext()).ajax({url:"/api/file/archive",method:"GET",data:{pid:e.id}}).done((function(e){t.resolve(e)})).fail((function(i){t.reject(e,i)})),t.promise()}};function Qn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var eo=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Qn(e,t,i[t])}))}return e}({},Yt,Xt,lr,ui,cr,pr,Ni,fr,br,dr,yr,_r,xr,Er,Or,Ri,jr,kr,Sr,Tr,Pr,Dr,Cr,Ir,Ar,Lr,Rr,Ur,qr,fi,Zt,Ti,Hr,Gr,Kr,Wr,Xr,Jr,Qr,en,Wi,tn,nn,on,bi,bn,rn,gn,fn,yn,wn,vn,_n,jn,kn,Sn,Tn,Pn,Cn,In,zn,Ln,Vn,Nn,Zi,Rn,Hn,Yn,Xn,{updateZone(e,t){var i;if(!(e instanceof Zn))throw new Error("Api.updateZone: zone model required");if(!t||d().isEmpty(t))throw new Error("Api.updateZone: attributes not set or empty");return i=d().extend({},t),V.get().isAdmin()&&(i.scope="all"),i.name=e.id,V.get().ajax({type:"PUT",url:"/api/zone",data:i}).done((function(t){e.set(e.parse(t))})).fail((function(){xe.trigger("api:updateZone:error",e.id,t)}))}},{userAvailable(e){var t=a().Deferred();if(!e)throw new Error("alias required for userAvailable()");return a().ajax({type:"GET",url:"/api/user/available",data:{alias:e,suggestions:!1}}).done((function(e){e.available?t.resolve(e):t.reject("taken")})).fail((function(e){t.reject("error",e)})),t.promise()}},{wopiInit(e){if(!e)throw new Error("PID required in wopiInit()");return new Promise(((t,i)=>{V.get().ajax({type:"GET",url:"/api/wopi/init",data:{pid:e}}).then(t,i)}))}},{zip(e,t){var i,r,n=a().Deferred();if(!Array.isArray(e)||!e.length)throw new Error("zip needs valid source files array.");if(!(t&&t instanceof ar))throw new Error("zip needs valid destination file.");if(r=t.getContext(),d().some(e,(function(e){return e.getContext()!==r})))throw new Error("context of source files and destination must be the same in zip");return i=d().map(e,(function(e){return e.urlDecode("path")})),V.get(r).ajax({method:"POST",url:"/api/file/archive/deflate",traditional:!0,data:{dst:t.urlDecode("path"),src:i}}).done((function(i,r,o){var s=[],a=[];d().each(i.done,(function(t){a.push(d().find(e,(function(e){return e.get("path")===t.src})))})),0===a.length?s=e:d().each(i.failed,(function(t){s.push(d().find(e,(function(e){return e.get("path")===t.src})))})),i.file&&t.set(t.parse(i.file)),0===a.length?n.reject(s,a,t,o):n.resolve(s,a,t,o)})).fail((function(i){n.reject(e,[],t,i)})),n.promise()}},Jn),to=i(4982);const io=[1280,640,210];function ro(e){return io.find(((t,i)=>i===io.length-1||e<=t&&e>io[i+1]||e>t))}var no={preload(e){return new Promise(((t,i)=>{const r=new Image;r.onload=function(){r.onload=null,t(r)},r.onerror=i,r.src=e}))},calc(e,t,i,r){const n={};if(!i||!r)throw new Error("displayWidth and displayHeight need to be filled!");return e&&t?e/t<i/r?(n.height=ro(Math.min(t,r)),n.shouldScale=t>r):(n.width=ro(Math.min(e,i)),n.shouldScale=e>i):(n.width=ro(i),n.height=ro(r),n.shouldScale=!0),n},calcThumbSize(e,t,i,r,n){if(!i||!r)throw new Error("targetWidth and targetHeight need to be filled!");if(n>4){const i=e;e=t,t=i}return e/t>1&&t>=r||e<i?{height:r}:{width:i}},calcPlaceholderSize(e,t,i,r,n){let o;if(!i||!r)throw new Error("targetWidth and targetHeight need to be filled!");if(n>4){const i=e;e=t,t=i}const s=e/t;return s>1&&t>=r||s<1&&t>=r||e>i?(o=r/t,{width:Math.round(e*o),height:Math.round(t*o)}):{width:Math.round(i),height:Math.round(r)}}},oo=async e=>{let{extension:t,size:i,thumbUrl:r}=e;if(!r)return Promise.reject();if(!Kt.supportThumbnail(t))return Promise.reject();return((e,t)=>{const i=e.width>e.height,r=e.width===e.height,n=e.width>=t.width,o=e.width>=t.width-20,s=e.height>=t.height,a=e.height>=t.height-20,l={src:e.src};return n||s?r&&s?l.position="max_width_height":i&&s?l.position="max_height":!i&&n?l.position="max_width":i||n||!a?i&&!s&&o&&(l.position="max_small_width"):l.position="max_small_height":l.size="auto",l})(await no.preload(r),i)};function so(e){let t,i,r=Kt.icons[e[6]]+"";return{c(){t=new Ee.FWw(!1),i=(0,Ee.cSb)(),t.a=i},m(e,n){t.m(r,e,n),(0,Ee.$Tr)(e,i,n)},p(e,i){64&i&&r!==(r=Kt.icons[e[6]]+"")&&t.p(r)},d(e){e&&((0,Ee.ogt)(i),t.d())}}}function ao(e){let t,i,r,n,o,s=`url('${e[15].src}')`;return{c(){t=(0,Ee.bGB)("div"),(0,Ee.Ljt)(t,"class",i="thumbnail "+(e[15].position?e[15].position:"")),(0,Ee.czc)(t,"background-image",s),(0,Ee.czc)(t,"background-size",e[15].size)},m(i,s){(0,Ee.$Tr)(i,t,s),n||(o=(0,Ee.TVh)(r=e[8].call(null,t)),n=!0)},p(e,r){172&r&&i!==(i="thumbnail "+(e[15].position?e[15].position:""))&&(0,Ee.Ljt)(t,"class",i),172&r&&s!==(s=`url('${e[15].src}')`)&&(0,Ee.czc)(t,"background-image",s),172&r&&(0,Ee.czc)(t,"background-size",e[15].size)},d(e){e&&(0,Ee.ogt)(t),n=!1,o()}}}function lo(e){let t,i,r=Kt.icons[e[6]]+"";return{c(){t=new Ee.FWw(!1),i=(0,Ee.cSb)(),t.a=i},m(e,n){t.m(r,e,n),(0,Ee.$Tr)(e,i,n)},p(e,i){64&i&&r!==(r=Kt.icons[e[6]]+"")&&t.p(r)},d(e){e&&((0,Ee.ogt)(i),t.d())}}}function co(e){let t,i,r,n={ctx:e,current:null,token:null,hasCatch:!0,pending:lo,then:ao,catch:so,value:15};return(0,Ee.CR_)(i=oo({extension:e[7],size:{width:e[2],height:e[3]},thumbUrl:e[5]}),n),{c(){t=(0,Ee.bGB)("span"),n.block.c(),(0,Ee.Ljt)(t,"class",r="file-item-icon icon-mimetype-group-"+e[6]+" "+e[0]),(0,Ee.VHj)(t,"file-item-image-preview",e[4])},m(e,i){(0,Ee.$Tr)(e,t,i),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null},p(o,[s]){e=o,n.ctx=e,172&s&&i!==(i=oo({extension:e[7],size:{width:e[2],height:e[3]},thumbUrl:e[5]}))&&(0,Ee.CR_)(i,n)||(0,Ee.xfz)(n,e,s),65&s&&r!==(r="file-item-icon icon-mimetype-group-"+e[6]+" "+e[0])&&(0,Ee.Ljt)(t,"class",r),81&s&&(0,Ee.VHj)(t,"file-item-image-preview",e[4])},i:Ee.ZTd,o:Ee.ZTd,d(e){e&&(0,Ee.ogt)(t),n.block.d(),n.token=null,n=null}}}function ho(e,t,i){let r,n,o,s,a,l=Ee.ZTd,d=()=>(l(),l=(0,Ee.LdU)(u,(e=>i(12,a=e))),u);e.$$.on_destroy.push((()=>l()));const c=(0,to.x)();let{class:h=""}=t,{item:u}=t;d();let{width:p}=t,{height:g}=t,{targetWidth:m=p}=t,{targetHeight:f=g}=t,b=!1,y=a.get("encrypted")===ri.unencrypted;return e.$$set=e=>{"class"in e&&i(0,h=e.class),"item"in e&&d(i(1,u=e.item)),"width"in e&&i(2,p=e.width),"height"in e&&i(3,g=e.height),"targetWidth"in e&&i(9,m=e.targetWidth),"targetHeight"in e&&i(10,f=e.targetHeight)},e.$$.update=()=>{2&e.$$.dirty&&i(7,r=u.get("ext")),2&e.$$.dirty&&i(6,n=u.get("group")),2&e.$$.dirty&&i(11,o=u.get("image")),3586&e.$$.dirty&&i(5,s=y?eo.getThumbnail(u,((e,t)=>t?no.calcThumbSize(t.width,t.height,e.width,e.height,t.exif&&t.exif.Orientation):e)({width:m,height:f},o)):"")},[h,u,p,g,b,s,n,r,function(){c("load"),i(4,b=!0)},m,f,o]}class uo extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,ho,co,Ee.N8,{class:0,item:1,width:2,height:3,targetWidth:9,targetHeight:10})}}var po=uo;function go(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){go(e,t,i[t])}))}return e}function fo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const bo=2;function yo(e){const t=[];let i=0,r=0;const n=mo({itemSpacing:4,width:1024,scaleToFit:!1},e),o=n.scaleToFit?.8:1;this.add=function(e){let s,a;const l={id:e.id,left:0,width:e.width,height:e.height};if(function(e){if("object"!=typeof e)throw new Error("no itemSize object given");if(!e.width)throw new Error("itemSize without width");if(!e.height)throw new Error("itemSize without height")}(e),t.length){if(s=n.width/o,a=i+n.itemSpacing+e.width,s<a)return!1;l.left=i+n.itemSpacing,i=a}else l.width=Math.min(e.width,n.width),i=l.width;return t.push(l),r=Math.max(r,l.height),!0},this.fitToWidth=function(){let e=0;const o={items:t,height:r},s=t.length-1;if(!n.scaleToFit)return o;const a=(t.length-1)*n.itemSpacing,l=(n.width-a)/(i-a);return l>=bo?o:(t.forEach((function(t,i){let r=Math.round(t.width*l);const o=Math.round(t.height*l);i===s&&(r=n.width-e),t.width=r,t.height=o,t.left=e,e+=r+n.itemSpacing})),r=Math.max.apply(null,t.map((e=>e.height))),{items:t,height:r})}}function wo(e){return new yo({width:e.width,itemSpacing:e.itemSpacing,scaleToFit:e.scaleToFit})}function vo(e){return Math.floor(e)===e&&e<1/0}var _o={calculateLayout(e,t){if(!Array.isArray(e))throw new Error("items array missing");const i=[],r=function(e){return mo({itemSpacing:4,width:1024,scaleToFit:!1,top:0},e)}(t);let n=0,o=r.top,s=wo(r);const a=function(){const e=s.fitToWidth();e.items.forEach((function(e){i.push(fo(mo({},e),{top:o}))})),n+=e.height,o+=e.height};if(!vo(r.width)||r.width<=0)throw new Error("width is not a number > 0");if(!vo(r.itemSpacing)||r.itemSpacing<0)throw new Error("itemSpacing it not a number >= 0");return e.forEach((function(e){s.add(e)||(a(),n+=r.itemSpacing,o+=r.itemSpacing,s=wo(r),s.add(e))})),e.length&&a(),{items:i,height:n}}};function xo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Eo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){xo(e,t,i[t])}))}return e}function Oo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const jo=140;var ko=(e,t)=>{if(!e.length||t<=0)return{height:0,items:[]};let i,r,n={height:0,items:[]},o={height:0,items:[]},s=0;const a=e.reduce(((e,t)=>(e[t.cid]=t,e)),{}),{images:l,nonImages:d}=e.reduce(((e,t)=>(t.attributes.image?e.images.push(t):e.nonImages.push(t),e)),{images:[],nonImages:[]});l.length&&(i=function(e,t,i){return e.map((e=>{const r=e.get("image"),n=r.exif?r.exif.Orientation:void 0,o=no.calcPlaceholderSize(r.width,r.height,t,i,n);return{height:o.height,id:e.cid,width:o.width}}))}(l,jo,230),i=i.map((e=>Oo(Eo({},e),{imageWidth:e.width,imageHeight:e.height,width:Math.max(e.width,jo)}))),n=_o.calculateLayout(i,{width:t,itemSpacing:4,scaleToFit:!0,top:0}),n.items=n.items.map(((e,t)=>Oo(Eo({},e),{imageWidth:i[t].imageWidth,imageHeight:i[t].imageHeight}))),s+=n.height),d.length&&(l.length&&(s+=22),r=d.map((e=>({height:160,id:e.cid,width:160}))),o=_o.calculateLayout(r,{width:t,itemSpacing:22,top:s}),s+=o.height);const c=e=>({item:a[e.id],infos:{},rect:{height:e.height,imageWidth:e.imageWidth,imageHeight:e.imageHeight,left:e.left,top:e.top,width:e.width}});return{height:s,items:[...n.items.map(c),...o.items.map((e=>Oo(Eo({},c(e)),{infos:{nonImage:!0}})))]}};function So(e){let t;return{c(){t=(0,Ee.bGB)("div"),t.innerHTML='<div class="icon-item-selected"></div>',(0,Ee.Ljt)(t,"class","selecticon icon-item-selector")},m(e,i){(0,Ee.$Tr)(e,t,i)},d(e){e&&(0,Ee.ogt)(t)}}}function To(e){let t,i;return{c(){t=(0,Ee.bGB)("span"),(0,Ee.Ljt)(t,"class","icon-item-shared is-shared-icon"),(0,Ee.Ljt)(t,"data-action","share-info"),(0,Ee.Ljt)(t,"title",i=e[9]===$e.directory?e[13].get("filemanager.share.dir.tooltip"):e[13].get("filemanager.share.fileitem.tooltip"))},m(e,i){(0,Ee.$Tr)(e,t,i)},p(e,r){8704&r&&i!==(i=e[9]===$e.directory?e[13].get("filemanager.share.dir.tooltip"):e[13].get("filemanager.share.fileitem.tooltip"))&&(0,Ee.Ljt)(t,"title",i)},d(e){e&&(0,Ee.ogt)(t)}}}function Po(e){let t,i,r,n,o,s,a,l,d,c,h,u=e[6].get("readable"),p=e[6].get("share"),g=`${e[1].top}px`,m=`${e[1].left}px`,f=`${e[1].width}px`,b=`${e[1].height}px`,y=u&&So();n=new po({props:{item:e[0],width:jo,height:jo,targetWidth:e[1].imageWidth||160,targetHeight:e[1].imageHeight||160,class:e[4]?"drag-handle":""}}),n.$on("load",e[14]);let w=p&&To(e);return{c(){t=(0,Ee.bGB)("fluid-item"),y&&y.c(),i=(0,Ee.DhX)(),r=(0,Ee.bGB)("div"),(0,Ee.YCL)(n.$$.fragment),o=(0,Ee.DhX)(),s=(0,Ee.bGB)("span"),w&&w.c(),a=(0,Ee.DhX)(),l=(0,Ee.bGB)("span"),d=(0,Ee.fLW)(e[10]),(0,Ee.Ljt)(l,"class","label-text display_name"),(0,Ee.Ljt)(s,"class","file-item-label file-item-displayname"),(0,Ee.Ljt)(s,"data-field","display_name"),(0,Ee.Ljt)(s,"title",e[10]),(0,Ee.Ljt)(r,"class","itemcontent"),(0,Ee.Epf)(t,"data-id",c=e[0].id),(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[8]),(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[7]),(0,Ee.Epf)(t,"data-qa","layout-item"),(0,Ee.Epf)(t,"data-type",e[9]),(0,Ee.Epf)(t,"draggable",e[4]),(0,Ee.Epf)(t,"class","svelte-pgmos6"),(0,Ee.VHj)(t,"notReadable",e[11]),(0,Ee.VHj)(t,"selected",e[12].selected||!1),(0,Ee.VHj)(t,"preselected",e[12].preselected||!1),(0,Ee.VHj)(t,"predeselected",e[12].predeselected||!1),(0,Ee.VHj)(t,"isthumbnail",e[7]),(0,Ee.VHj)(t,"fluid-thumbnail",!e[2].nonImage&&e[8]),(0,Ee.VHj)(t,"sj-dragged-over",e[5]),(0,Ee.VHj)(t,"sj-grid-highlight",e[3]),(0,Ee.czc)(t,"top",g),(0,Ee.czc)(t,"left",m),(0,Ee.czc)(t,"width",f),(0,Ee.czc)(t,"height",b)},m(e,c){(0,Ee.$Tr)(e,t,c),y&&y.m(t,null),(0,Ee.R3I)(t,i),(0,Ee.R3I)(t,r),(0,Ee.yef)(n,r,null),(0,Ee.R3I)(r,o),(0,Ee.R3I)(r,s),w&&w.m(s,null),(0,Ee.R3I)(s,a),(0,Ee.R3I)(s,l),(0,Ee.R3I)(l,d),h=!0},p(e,[r]){64&r&&(u=e[6].get("readable")),u?y||(y=So(),y.c(),y.m(t,i)):y&&(y.d(1),y=null);const o={};1&r&&(o.item=e[0]),2&r&&(o.targetWidth=e[1].imageWidth||160),2&r&&(o.targetHeight=e[1].imageHeight||160),16&r&&(o.class=e[4]?"drag-handle":""),n.$set(o),64&r&&(p=e[6].get("share")),p?w?w.p(e,r):(w=To(e),w.c(),w.m(s,a)):w&&(w.d(1),w=null),(!h||1024&r)&&(0,Ee.rTO)(d,e[10]),(!h||1024&r)&&(0,Ee.Ljt)(s,"title",e[10]),(!h||1&r&&c!==(c=e[0].id))&&(0,Ee.Epf)(t,"data-id",c),(!h||256&r)&&(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[8]),(!h||128&r)&&(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[7]),(!h||512&r)&&(0,Ee.Epf)(t,"data-type",e[9]),(!h||16&r)&&(0,Ee.Epf)(t,"draggable",e[4]),(!h||2048&r)&&(0,Ee.VHj)(t,"notReadable",e[11]),(!h||4096&r)&&(0,Ee.VHj)(t,"selected",e[12].selected||!1),(!h||4096&r)&&(0,Ee.VHj)(t,"preselected",e[12].preselected||!1),(!h||4096&r)&&(0,Ee.VHj)(t,"predeselected",e[12].predeselected||!1),(!h||128&r)&&(0,Ee.VHj)(t,"isthumbnail",e[7]),(!h||260&r)&&(0,Ee.VHj)(t,"fluid-thumbnail",!e[2].nonImage&&e[8]),(!h||32&r)&&(0,Ee.VHj)(t,"sj-dragged-over",e[5]),(!h||8&r)&&(0,Ee.VHj)(t,"sj-grid-highlight",e[3]),2&r&&g!==(g=`${e[1].top}px`)&&(0,Ee.czc)(t,"top",g),2&r&&m!==(m=`${e[1].left}px`)&&(0,Ee.czc)(t,"left",m),2&r&&f!==(f=`${e[1].width}px`)&&(0,Ee.czc)(t,"width",f),2&r&&b!==(b=`${e[1].height}px`)&&(0,Ee.czc)(t,"height",b)},i(e){h||((0,Ee.Ui)(n.$$.fragment,e),h=!0)},o(e){(0,Ee.etI)(n.$$.fragment,e),h=!1},d(e){e&&(0,Ee.ogt)(t),y&&y.d(),(0,Ee.vpE)(n),w&&w.d()}}}function Do(e,t,i){let r,n,o,s,a,l,d,c=Ee.ZTd,h=()=>(c(),c=(0,Ee.LdU)(u,(e=>i(6,l=e))),u);(0,Ee.FIv)(e,G,(e=>i(13,d=e))),e.$$.on_destroy.push((()=>c()));let{item:u}=t;h();let{rect:p}=t,{infos:g={}}=t,{isHighlighted:m}=t,{draggable:f=!1}=t,{isDraggedOver:b=!1}=t,y=!1;return e.$$set=e=>{"item"in e&&h(i(0,u=e.item)),"rect"in e&&i(1,p=e.rect),"infos"in e&&i(2,g=e.infos),"isHighlighted"in e&&i(3,m=e.isHighlighted),"draggable"in e&&i(4,f=e.draggable),"isDraggedOver"in e&&i(5,b=e.isDraggedOver)},e.$$.update=()=>{64&e.$$.dirty&&i(12,r=ft(l)),64&e.$$.dirty&&i(11,n=!1===l.get("readable")),64&e.$$.dirty&&i(10,o=l.get("display_name")),64&e.$$.dirty&&i(9,s=l.get("type")),64&e.$$.dirty&&i(8,a=Kt.supportThumbnail(l.get("ext")))},[u,p,g,m,f,b,l,y,a,s,o,n,r,d,()=>{i(7,y=!0)}]}class Co extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Do,Po,Ee.N8,{item:0,rect:1,infos:2,isHighlighted:3,draggable:4,isDraggedOver:5})}}var Io=Co;var zo=(e,t)=>t.items.filter((t=>{let{rect:i}=t;return((e,t)=>e.topY<=t.top+t.height&&e.bottomY>=t.top&&e.topX<=t.left+t.width&&e.bottomX>=t.left)(e,i)}));function Lo(e,t,i){const r=e.slice();return r[6]=t[i],r}function $o(e){let t,i,r,n,o,s,a,l,d,c,h=e[6].text+"";return{c(){t=(0,Ee.bGB)("span"),i=(0,Ee.fLW)(h),r=(0,Ee.DhX)(),n=(0,Ee.bGB)("span"),o=(0,Ee.DhX)(),s=(0,Ee.bGB)("span"),(0,Ee.Ljt)(n,"class","icon-list-ascending"),(0,Ee.Ljt)(s,"class","icon-list-descending"),(0,Ee.Ljt)(t,"class",a="file-item-label file-item-"+e[6].class+" sortable"),(0,Ee.Ljt)(t,"data-field",l=e[6].dataField),(0,Ee.VHj)(t,"sorted",e[6].dataField===e[3].getKey()),(0,Ee.VHj)(t,"asc","asc"===e[3].getDir()),(0,Ee.VHj)(t,"desc","desc"===e[3].getDir())},m(a,l){(0,Ee.$Tr)(a,t,l),(0,Ee.R3I)(t,i),(0,Ee.R3I)(t,r),(0,Ee.R3I)(t,n),(0,Ee.R3I)(t,o),(0,Ee.R3I)(t,s),d||(c=(0,Ee.oLt)(t,"click",(function(){(0,Ee.sBU)(e[4](e[6].dataField))&&e[4](e[6].dataField).apply(this,arguments)})),d=!0)},p(r,n){e=r,4&n&&h!==(h=e[6].text+"")&&(0,Ee.rTO)(i,h),4&n&&a!==(a="file-item-label file-item-"+e[6].class+" sortable")&&(0,Ee.Ljt)(t,"class",a),4&n&&l!==(l=e[6].dataField)&&(0,Ee.Ljt)(t,"data-field",l),12&n&&(0,Ee.VHj)(t,"sorted",e[6].dataField===e[3].getKey()),12&n&&(0,Ee.VHj)(t,"asc","asc"===e[3].getDir()),12&n&&(0,Ee.VHj)(t,"desc","desc"===e[3].getDir())},d(e){e&&(0,Ee.ogt)(t),d=!1,c()}}}function Mo(e){let t,i,r,n,o,s,a,l,d=e[1].get("search.filemanager.header.path")+"",c=(0,Ee.NXn)(e[2]),h=[];for(let t=0;t<c.length;t+=1)h[t]=$o(Lo(e,c,t));return{c(){t=(0,Ee.bGB)("list-header"),i=(0,Ee.bGB)("list-item"),r=(0,Ee.bGB)("div"),n=(0,Ee.bGB)("span"),o=(0,Ee.DhX)();for(let e=0;e<h.length;e+=1)h[e].c();s=(0,Ee.DhX)(),a=(0,Ee.bGB)("span"),l=(0,Ee.fLW)(d),(0,Ee.Ljt)(n,"class","file-item-icon"),(0,Ee.Ljt)(n,"data-field","group"),(0,Ee.Ljt)(a,"class","file-item-label file-item-path"),(0,Ee.Ljt)(r,"class","itemcontent"),(0,Ee.Epf)(i,"class","sj-grid-item")},m(e,d){(0,Ee.$Tr)(e,t,d),(0,Ee.R3I)(t,i),(0,Ee.R3I)(i,r),(0,Ee.R3I)(r,n),(0,Ee.R3I)(r,o);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(r,null);(0,Ee.R3I)(r,s),(0,Ee.R3I)(r,a),(0,Ee.R3I)(a,l)},p(e,[t]){if(28&t){let i;for(c=(0,Ee.NXn)(e[2]),i=0;i<c.length;i+=1){const n=Lo(e,c,i);h[i]?h[i].p(n,t):(h[i]=$o(n),h[i].c(),h[i].m(r,s))}for(;i<h.length;i+=1)h[i].d(1);h.length=c.length}2&t&&d!==(d=e[1].get("search.filemanager.header.path")+"")&&(0,Ee.rTO)(l,d)},i:Ee.ZTd,o:Ee.ZTd,d(e){e&&(0,Ee.ogt)(t),(0,Ee.RMB)(h,e)}}}function Ao(e,t,i){let r,n,o,s=Ee.ZTd,a=()=>(s(),s=(0,Ee.LdU)(l,(e=>i(5,o=e))),l);(0,Ee.FIv)(e,G,(e=>i(1,n=e))),e.$$.on_destroy.push((()=>s()));let{collection:l}=t;a();let d=[];return e.$$set=e=>{"collection"in e&&a(i(0,l=e.collection))},e.$$.update=()=>{32&e.$$.dirty&&i(3,r=o.sortable),2&e.$$.dirty&&i(2,d=[{class:"displayname",dataField:"display_name",text:n.get("file.name")},{class:"category",dataField:"category",text:n.get("file.type")},{class:"size",dataField:"size",text:n.get("file.size")},{class:"date",dataField:"mtime",text:n.get("file.update")}])},[l,n,d,r,e=>{let t;t=e===r.getKey()&&"asc"===r.getDir()?"desc":"asc",r.sortBy(e,t)},o]}class Vo extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Ao,Mo,Ee.N8,{collection:0})}}var Fo=Vo;function Bo(e){let t;return{c(){t=(0,Ee.bGB)("div"),t.innerHTML='<div class="icon-item-selected"></div>',(0,Ee.Ljt)(t,"class","selecticon icon-item-selector")},m(e,i){(0,Ee.$Tr)(e,t,i)},d(e){e&&(0,Ee.ogt)(t)}}}function No(e){let t,i,r,n,o,s,a,l,d,c,h,u,p,g,m,f,b,y,w,v,_,x,E,O,j,k,S,T,P,D,C,I,z=e[7].get("readable"),L=e[7].get("display_name")+"",$=e[8].categoryName(e[7].get("category"))+"",M=e[10]?`…/${e[10]}`:"",A=`${e[1].top}px`,V=z&&Bo();return n=new po({props:{class:e[3]?"drag-handle":"",item:e[0],width:48,height:48}}),n.$on("load",e[19]),{c(){t=(0,Ee.bGB)("list-item"),V&&V.c(),i=(0,Ee.DhX)(),r=(0,Ee.bGB)("div"),(0,Ee.YCL)(n.$$.fragment),o=(0,Ee.DhX)(),s=(0,Ee.bGB)("span"),a=(0,Ee.bGB)("span"),l=(0,Ee.fLW)(L),c=(0,Ee.DhX)(),h=(0,Ee.bGB)("span"),p=(0,Ee.DhX)(),g=(0,Ee.bGB)("span"),m=(0,Ee.bGB)("span"),f=(0,Ee.fLW)($),b=(0,Ee.DhX)(),y=(0,Ee.bGB)("span"),w=(0,Ee.bGB)("span"),v=(0,Ee.fLW)(e[11]),_=(0,Ee.DhX)(),x=(0,Ee.bGB)("span"),E=(0,Ee.bGB)("span"),O=(0,Ee.fLW)(e[12]),j=(0,Ee.DhX)(),k=(0,Ee.bGB)("span"),S=(0,Ee.bGB)("span"),T=(0,Ee.fLW)(M),(0,Ee.Ljt)(a,"class","label-text display_name"),(0,Ee.VHj)(a,"drag-handle",e[3]),(0,Ee.Ljt)(s,"class","file-item-label file-item-displayname"),(0,Ee.Ljt)(s,"title",d=e[7].get("display_name")),(0,Ee.Ljt)(h,"class","file-item-share-icon"),(0,Ee.Ljt)(h,"data-action",u=e[6]?"share-info":""),(0,Ee.Ljt)(h,"title",e[13]),(0,Ee.VHj)(h,"icon-item-shared",e[6]),(0,Ee.VHj)(h,"drag-handle",e[3]),(0,Ee.Ljt)(m,"class","label-text category"),(0,Ee.VHj)(m,"drag-handle",e[3]),(0,Ee.Ljt)(g,"class","file-item-label file-item-category"),(0,Ee.Ljt)(w,"class","label-text size"),(0,Ee.VHj)(w,"drag-handle",e[3]),(0,Ee.Ljt)(y,"class","file-item-label file-item-size"),(0,Ee.Ljt)(E,"class","label-text mtime"),(0,Ee.VHj)(E,"drag-handle",e[3]),(0,Ee.Ljt)(x,"class","file-item-label file-item-date"),(0,Ee.Ljt)(S,"class","label-text path"),(0,Ee.VHj)(S,"drag-handle",e[3]),(0,Ee.Ljt)(k,"class","file-item-label file-item-path"),(0,Ee.Ljt)(k,"data-action","open-parent"),(0,Ee.Ljt)(k,"title",P=e[7].urlDecode("parentPath")),(0,Ee.Ljt)(r,"class","itemcontent"),(0,Ee.Epf)(t,"class",D=(0,Ee.H1I)(e[5])+" svelte-1kfcuf"),(0,Ee.Epf)(t,"data-id",C=e[0].id),(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[16]),(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[9]),(0,Ee.Epf)(t,"data-qa","layout-item"),(0,Ee.Epf)(t,"data-type",e[14]),(0,Ee.Epf)(t,"draggable",e[3]),(0,Ee.VHj)(t,"notReadable",e[15]),(0,Ee.VHj)(t,"selected",e[17].selected||!1),(0,Ee.VHj)(t,"preselected",e[17].preselected||!1),(0,Ee.VHj)(t,"predeselected",e[17].predeselected||!1),(0,Ee.VHj)(t,"sj-grid-highlight",e[2]),(0,Ee.VHj)(t,"sj-dragged-over",e[4]),(0,Ee.czc)(t,"top",A)},m(e,d){(0,Ee.$Tr)(e,t,d),V&&V.m(t,null),(0,Ee.R3I)(t,i),(0,Ee.R3I)(t,r),(0,Ee.yef)(n,r,null),(0,Ee.R3I)(r,o),(0,Ee.R3I)(r,s),(0,Ee.R3I)(s,a),(0,Ee.R3I)(a,l),(0,Ee.R3I)(r,c),(0,Ee.R3I)(r,h),(0,Ee.R3I)(r,p),(0,Ee.R3I)(r,g),(0,Ee.R3I)(g,m),(0,Ee.R3I)(m,f),(0,Ee.R3I)(r,b),(0,Ee.R3I)(r,y),(0,Ee.R3I)(y,w),(0,Ee.R3I)(w,v),(0,Ee.R3I)(r,_),(0,Ee.R3I)(r,x),(0,Ee.R3I)(x,E),(0,Ee.R3I)(E,O),(0,Ee.R3I)(r,j),(0,Ee.R3I)(r,k),(0,Ee.R3I)(k,S),(0,Ee.R3I)(S,T),I=!0},p(e,[r]){128&r&&(z=e[7].get("readable")),z?V||(V=Bo(),V.c(),V.m(t,i)):V&&(V.d(1),V=null);const o={};8&r&&(o.class=e[3]?"drag-handle":""),1&r&&(o.item=e[0]),n.$set(o),(!I||128&r)&&L!==(L=e[7].get("display_name")+"")&&(0,Ee.rTO)(l,L),(!I||8&r)&&(0,Ee.VHj)(a,"drag-handle",e[3]),(!I||128&r&&d!==(d=e[7].get("display_name")))&&(0,Ee.Ljt)(s,"title",d),(!I||64&r&&u!==(u=e[6]?"share-info":""))&&(0,Ee.Ljt)(h,"data-action",u),(!I||8192&r)&&(0,Ee.Ljt)(h,"title",e[13]),(!I||64&r)&&(0,Ee.VHj)(h,"icon-item-shared",e[6]),(!I||8&r)&&(0,Ee.VHj)(h,"drag-handle",e[3]),(!I||384&r)&&$!==($=e[8].categoryName(e[7].get("category"))+"")&&(0,Ee.rTO)(f,$),(!I||8&r)&&(0,Ee.VHj)(m,"drag-handle",e[3]),(!I||2048&r)&&(0,Ee.rTO)(v,e[11]),(!I||8&r)&&(0,Ee.VHj)(w,"drag-handle",e[3]),(!I||4096&r)&&(0,Ee.rTO)(O,e[12]),(!I||8&r)&&(0,Ee.VHj)(E,"drag-handle",e[3]),(!I||1024&r)&&M!==(M=e[10]?`…/${e[10]}`:"")&&(0,Ee.rTO)(T,M),(!I||8&r)&&(0,Ee.VHj)(S,"drag-handle",e[3]),(!I||128&r&&P!==(P=e[7].urlDecode("parentPath")))&&(0,Ee.Ljt)(k,"title",P),(!I||32&r&&D!==(D=(0,Ee.H1I)(e[5])+" svelte-1kfcuf"))&&(0,Ee.Epf)(t,"class",D),(!I||1&r&&C!==(C=e[0].id))&&(0,Ee.Epf)(t,"data-id",C),(!I||65536&r)&&(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[16]),(!I||512&r)&&(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[9]),(!I||16384&r)&&(0,Ee.Epf)(t,"data-type",e[14]),(!I||8&r)&&(0,Ee.Epf)(t,"draggable",e[3]),(!I||32800&r)&&(0,Ee.VHj)(t,"notReadable",e[15]),(!I||131104&r)&&(0,Ee.VHj)(t,"selected",e[17].selected||!1),(!I||131104&r)&&(0,Ee.VHj)(t,"preselected",e[17].preselected||!1),(!I||131104&r)&&(0,Ee.VHj)(t,"predeselected",e[17].predeselected||!1),(!I||36&r)&&(0,Ee.VHj)(t,"sj-grid-highlight",e[2]),(!I||48&r)&&(0,Ee.VHj)(t,"sj-dragged-over",e[4]),2&r&&A!==(A=`${e[1].top}px`)&&(0,Ee.czc)(t,"top",A)},i(e){I||((0,Ee.Ui)(n.$$.fragment,e),I=!0)},o(e){(0,Ee.etI)(n.$$.fragment,e),I=!1},d(e){e&&(0,Ee.ogt)(t),V&&V.d(),(0,Ee.vpE)(n)}}}function Ro(e,t,i){let r,n,o,s,a,l,d,c,h,u,p,g,m,f=Ee.ZTd,b=()=>(f(),f=(0,Ee.LdU)(y,(e=>i(7,p=e))),y);(0,Ee.FIv)(e,oe,(e=>i(8,g=e))),(0,Ee.FIv)(e,G,(e=>i(18,m=e))),e.$$.on_destroy.push((()=>f()));let{item:y}=t;b();let{rect:w}=t,{isHighlighted:v=!1}=t,{draggable:_=!1}=t,{isDraggedOver:x=!1}=t;const E={[$e.file]:"file",[$e.directory]:"dir",[$e.symlink]:"symlink"};let O=!1;return e.$$set=e=>{"item"in e&&b(i(0,y=e.item)),"rect"in e&&i(1,w=e.rect),"isHighlighted"in e&&i(2,v=e.isHighlighted),"draggable"in e&&i(3,_=e.draggable),"isDraggedOver"in e&&i(4,x=e.isDraggedOver)},e.$$.update=()=>{128&e.$$.dirty&&i(17,r=ft(p)),128&e.$$.dirty&&i(16,n=Kt.supportThumbnail(p.get("ext"))),128&e.$$.dirty&&i(15,o=!1===p.get("readable")),128&e.$$.dirty&&i(6,s=p.get("share")),128&e.$$.dirty&&i(5,a=E[p.get("type")]||p.get("type")),128&e.$$.dirty&&i(14,l=p.get("type")),262240&e.$$.dirty&&i(13,d=s?a===$e.directory?m.get("filemanager.share.dir.tooltip"):m.get("filemanager.share.fileitem.tooltip"):""),262528&e.$$.dirty&&i(12,c=p.has("mtime")?g.date(p.get("mtime"),m.get("lang.timeFormat")):""),385&e.$$.dirty&&i(11,h=p.has("size")?g.size(y.get("size")):""),128&e.$$.dirty&&i(10,u=p.urlDecode("parentName"))},[y,w,v,_,x,a,s,p,g,O,u,h,c,d,l,o,n,r,m,()=>{i(9,O=!0)}]}class Uo extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Ro,No,Ee.N8,{item:0,rect:1,isHighlighted:2,draggable:3,isDraggedOver:4})}}var qo=Uo;var Ho=(e,t)=>{let i=-60;const r=e.map((e=>(i+=60,{rect:{left:0,top:i,height:60,width:t},item:e})));return{items:r,height:60*e.length}};class Go{isDragging(){return this._dragging}isMinDistance(e){return this._distance()>=e}isDraggingUp(){return!!this._dragging&&this._currentY<this._startY}isDraggingDown(){return!!this._dragging&&this._currentY>this._startY}_down(e){let{clientY:t}=e;this._startY=this._currentY=t,this._dragging=!0}_move(e){const{clientY:t}=e;this._currentY=t,this._dragging&&this.onDrag(e)}_up(e){this._dragging&&this.onDragEnd(e),this._dragging=!1}_distance(){return this._dragging?Math.abs(this._currentY-this._startY):0}constructor({onDrag:e,onDragEnd:t}){this._dragging=!1,this._startY=0,this._currentY=0,this.onDrag=e,this.onDragEnd=t,this.onMouseDown=e=>this._down(e),this.onMouseMove=e=>this._move(e),this.onMouseUp=e=>this._up(e)}}var Wo=e=>{let{scrollRate:t,scrollByMax:i,scrollByIncrement:r,boundaryHeight:n,getBoundingBox:o}=e;const s=lt({rate:t,by:r}),a=(e=>{let{onDrag:t,onDragEnd:i}=e;return new Go({onDrag:t,onDragEnd:i})})({onDrag:function(e){let{clientY:t}=e;a.isDraggingUp()&&l.isWithinTop(t)?s.setBy(Math.min(i,r*l.depth(t))).up().start():a.isDraggingDown()&&l.isWithinBottom(t)?s.setBy(Math.min(i,r*l.depth(t))).down().start():s.stop()},onDragEnd:function(){s.stop()}}),l=st({getBoundingBox:o,boundaryHeight:n});return{onViewportChanged:l.onViewportChanged,onMouseDown:a.onMouseDown,onMouseMove:a.onMouseMove,onMouseUp:a.onMouseUp}};function Ko(e){let t,i,r,n;return{c(){t=(0,Ee.DhX)(),i=(0,Ee.bGB)("mouse-selector"),(0,Ee.Epf)(i,"class","svelte-1kkktex"),(0,Ee.VHj)(i,"drag",e[0]),(0,Ee.czc)(i,"left",e[1].left+"px"),(0,Ee.czc)(i,"top",e[1].top+"px"),(0,Ee.czc)(i,"width",e[1].width+"px"),(0,Ee.czc)(i,"height",e[1].height+"px")},m(o,s){(0,Ee.$Tr)(o,t,s),(0,Ee.$Tr)(o,i,s),r||(n=[(0,Ee.oLt)(window,"resize",e[2].onViewportChanged),(0,Ee.oLt)(window,"scroll",e[8]),(0,Ee.oLt)(window,"keydown",e[3]),(0,Ee.oLt)(window,"keyup",e[3]),(0,Ee.oLt)(document.body,"mousedown",e[4]),(0,Ee.oLt)(document.body,"mousemove",e[5]),(0,Ee.oLt)(document.body,"mouseup",e[6]),(0,Ee.oLt)(document.body,"click",e[7],!0)],r=!0)},p(e,[t]){1&t&&(0,Ee.VHj)(i,"drag",e[0]),2&t&&(0,Ee.czc)(i,"left",e[1].left+"px"),2&t&&(0,Ee.czc)(i,"top",e[1].top+"px"),2&t&&(0,Ee.czc)(i,"width",e[1].width+"px"),2&t&&(0,Ee.czc)(i,"height",e[1].height+"px")},i:Ee.ZTd,o:Ee.ZTd,d(e){e&&((0,Ee.ogt)(t),(0,Ee.ogt)(i)),r=!1,(0,Ee.j7q)(n)}}}const Yo=5,Xo=30;function Zo(e,t){return[{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)},{x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)}]}function Jo(e,t,i){let{getBoundingBox:r}=t,{isTarget:n=(()=>!1)}=t;const o=(0,to.x)(),s=Wo({getBoundingBox:r,scrollRate:75,scrollByMax:120,scrollByIncrement:5,boundaryHeight:60});let a=!1,l={clientX:0,clientY:0},d=!1,c=!1,h={x:0,y:0},u={x:0,y:0},p={left:0,top:0,width:0,height:0};function g(e,t){const i=r();return{x:e-i.x,y:t-i.y}}function m(e){const t=r(),[n,s]=Zo(h,u);let a=s.x+t.x,l=s.y+t.y;i(1,p.left=n.x+t.x,p),i(1,p.top=n.y+t.y,p),i(1,p.left=Math.max(p.left,t.x-Xo),p),i(1,p.top=Math.max(p.top,t.y-Xo),p),l=Math.min(l,t.bottom+Xo),a=Math.min(a,t.right+Xo),i(1,p.width=a-p.left,p),i(1,p.height=l-p.top,p),e&&o("preselecting",{topX:Math.max(0,n.x),topY:Math.max(0,n.y),bottomX:Math.min(s.x,t.width),bottomY:Math.min(s.y,t.height),shiftKey:e.shiftKey})}return(0,to.H3)((()=>{s.onViewportChanged()})),e.$$set=e=>{"getBoundingBox"in e&&i(9,r=e.getBoundingBox),"isTarget"in e&&i(10,n=e.isTarget)},[a,p,s,function(e){"Shift"===e.key&&a&&(e.repeat||m(e))},function(e){!e.target.closest(".drag-handle, .selected")&&n(e.target)&&function(e,t){const i=r();return e>i.x-Xo&&t>i.y-Xo&&e<i.right+Xo&&t<i.bottom+Xo}(e.clientX,e.clientY)&&(i(0,a=!0),h=g(e.clientX,e.clientY),s.onMouseDown(e),e.preventDefault())},function(e){l.clientY=e.clientY,l.clientX=e.clientX,a&&function(e,t){const i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))>=Yo}(h,g(e.clientX,e.clientY))&&(c||(o("selectionStart"),c=!0),s.onMouseMove(e),u=g(e.clientX,e.clientY),m(e))},function(e){if(!a)return;s.onMouseUp(e),i(0,a=!1);const t=r(),[n,l]=Zo(h,u);c&&(o("selectionDone",{topX:Math.max(0,n.x),topY:Math.max(0,n.y),bottomX:Math.min(l.x,t.width),bottomY:Math.min(l.y,t.height),shiftKey:e.shiftKey}),d=!0,c=!1),i(1,p.left=i(1,p.top=i(1,p.width=i(1,p.height=0,p),p),p),p)},function(e){d&&(e.preventDefault(),e.stopPropagation(),d=!1)},function(){s.onViewportChanged(),c&&(u=g(l.clientX,l.clientY),m())},r,n]}class Qo extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Jo,Ko,Ee.N8,{getBoundingBox:9,isTarget:10})}}var es=Qo;var ts={select(e,t,i,r,n){const o=(e=>e.filter((e=>{let{item:t}=e;return t.get("readable")})))(t);return i?o.forEach((t=>e.toggleSelected({model:t.item,viewMode:r||je.LIST,planItems:n?n.map((e=>e.item)):[]}))):o.forEach((t=>e.select(t.item)))},preselect(e,t,i){e.setPreselected(t.map((e=>{let{item:t}=e;return t})),i)}},is=(i(541),{bind(e,t){var i,r;function n(){me.track(i())}if(!(e&&e instanceof o().View))throw new Error("first argument needs to be a Backbone view.");if(!d().isObject(t))throw new Error("options has to be an object.");i=t.data,d().isFunction(i)||(i=d().constant(i)),(r=t.event)&&e.on(r,n,is),e.track=n},unbind(e){e.off(null,null,is),delete e.track}}),rs=is,ns=o().View.extend({trackEvent:"executed",events:{click:"_onClick",mousedown:"_trigger"},constructor:function(e){e=d().isObject(e)?e:{},this.hasAction=!1,this.hasTracking=!1,d().has(e,"state")?(this.state=e.state,this.listenTo(this.state,"state",this.onActionState)):d().has(e,"action")&&ye.isRegistered(e.action)&&(this.hasAction=!0,this.action=e.action,d().has(e,"actionData")&&(this.actionData=e.actionData),this.listenTo(ye,"state:"+this.action,this.onActionState)),d().has(e,"tracking")&&(rs.bind(this,{data:e.tracking,event:this.trackEvent}),this.hasTracking=!0),o().View.call(this,e)},remove(){return this.hasTracking&&rs.unbind(this),o().View.prototype.remove.call(this)},execute(){var e=d().toArray(arguments);this.state&&this.state.getState()?(this.state.getAction().apply(null,e),this.trigger("executed")):this.hasAction&&this.getActionState()&&(d().isUndefined(this.actionData)||e.unshift(d().result(this,"actionData")),e.unshift(this.action),ye.execute.apply(ye,e),this.trigger("executed"))},getActionState(){return this.state?this.state.getState():this.hasAction?ye.getState(this.action):void 0},onActionState(e){this.trigger("state",e)},_onClick(e){this.execute(),this.trigger("click",e)},_trigger(e){this.trigger(e.type,e)}});const os={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ss=/\\|'|\r|\n|\u2028|\u2029/g,as=function(e){return"\\"+os[e]},ls={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ds=RegExp([ls.escape.source,ls.interpolate.source,ls.evaluate.source].join("|")+"|$","g");var cs={factory(e){let t,i=0,r="__p+='";e.replace(ds,(function(t,n,o,s,a){return r+=e.slice(i,a).replace(ss,as),i=a+t.length,n?r+=`'+\n((__t=(${n}))==null?'':${oe.htmlEscape}(__t))+\n'`:o?r+=`'+\n((__t=(${o}))==null?'':__t)+\n'`:s&&(r+=`';\n${s}\n__p+='`),t})),r+="';\n",r=`with(obj||{}){\n${r}}\n`,r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{t=new Function("obj",r)}catch(e){throw e.source=r,e}let n=function(e){return t.call(this,e)};return n.source=`function(obj){\n${r}}`,n}},hs=ns.extend({tagName:"button",defaults:{secondary:!1,alternative:!1,linkstyled:!1},_labelTpl:cs.factory('<span class="label"><%- str %></span>'),initialize(e){this.config=d().extend({},this.defaults,e),this.listenTo(this,"state",this.setState)},setState(e){this._toggleClass("sj-button-disabled",!e),this.el.disabled=!e},disable(){return this.setState(!1),this},isDisabled(){return this.el.classList.contains("sj-button-disabled")},enable(){return this.setState(!0),this},render(){const e="function"==typeof this.config.text?this.config.text():this.config.text,t="function"==typeof this.config.ariaLabel?this.config.ariaLabel():this.config.ariaLabel;return this.$el.empty(),this.el.classList.add("sj-button"),this._toggleClass("secondary",this.config.secondary),this._toggleClass("linkstyled",this.config.linkstyled),this._toggleClass("alternative",this.config.alternative),e&&(this.$el.prepend(this._labelTpl({str:e})),this.el.setAttribute("title",e)),t&&this.el.setAttribute("aria-label",t),"BUTTON"!==this.el.tagName||this.el.getAttribute("type")||this.el.setAttribute("type","button"),this.state||this.hasAction?this.setState(this.getActionState()):this.setState(!this.config.disabled),this.delegateEvents(),this},setAttributes(e){Object.entries(e).forEach((e=>{let[t,i]=e;this.el.setAttribute(t,i)}))},_toggleClass(e,t){t?this.el.classList.add(e):this.el.classList.remove(e)}}),us=i(9455),ps=i.n(us),gs=["input:not([type='hidden']):not([disabled])","select:not([disabled])","a[href]:not([href=''])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex=''])"];function ms(e,t){var i=g.getComputedStyle(t);return"none"!==i.display&&"hidden"!==i.visibility&&(t===e||ms(e,t.parentNode))}var fs={find(e){var t;if(!(e instanceof Element))throw new Error("focusable.find: Element required.");return t=e.querySelectorAll(gs),t=Array.from(t),d().filter(t,ms.bind(null,e))}},bs=de.Object.extend({initialize(e){if(!d().isObject(e))throw new Error("options object required for stateObject");if(d().isUndefined(e.action)||!d().isFunction(e.action))throw new Error("action has to be a function in stateObject");this._action=e.action,this._state=this._castState(e.state)},_castState(e){return!!e},getState(){return this._state},setState(e){e=this._castState(e),this._state!==e&&(this._state=e,this.trigger("state",this._state))},getAction(){return this._action}});function ys(e){return"object"!=typeof e&&(e={key:e}),[e.key,e.ctrlKey?"1":"0",e.altKey?"1":"0",e.shiftKey?"1":"0"].join("_")}const ws=de.Object.extend({forbiddenActive:["INPUT","TEXTAREA","SELECT"],initialize(){this._views=[],this.currentLevel=0,this.overlayManager=ge.instance(),w.get("hasHotkeySupport")&&(this.overlayManager.on("pushed",this._addOverlay.bind(this)),this.overlayManager.on("popped",this._removeOverlay.bind(this)),this._boundOnHandleKeyPress=this._handleKeyPress.bind(this),document.addEventListener("keydown",this._boundOnHandleKeyPress))},_findView(e){return this._views.find((t=>t.cid===e.cid))},_addView(e,t){let i=this._findView(e);return i?i.level=i.level||t:(i={cid:e.cid,level:t},this._views.push(i),e.once("removed",this._removeView.bind(this,e))),i},_addOverlay(e){this.currentLevel++,this._addView(e,this.currentLevel)},_removeView(e){this._views=this._views.filter((t=>t.cid!==e.cid))},_removeOverlay(e){this._removeView(e),this.currentLevel--},_handleKeyPress(e){const t=document.activeElement;let i;if(t&&-1!==this.forbiddenActive.indexOf(t.tagName))return;if(this.currentLevel>0&&(i=this._views.find((e=>e.level===this.currentLevel))),!i)return;const r=i[ys(e)];r&&r.getState()&&(e.preventDefault(),r.getAction()())},addHotkey(e,t,i){if(!e||!t||!i)throw new Error("Parameters view, hotkey and handler required");if(!w.get("hasHotkeySupport"))return;if("function"!=typeof i&&!(i instanceof bs))throw new Error("Handler has to be a function or StateObject");const r=this._addView(e);"function"==typeof i&&(i=new bs({action:i,state:!0}));r[ys(t)]=i},remove(){this.overlayManager.off(),document.removeEventListener("keydown",this._boundOnHandleKeyPress),this._views=[]}});ws.instance=function(){return ws._instance||(ws._instance=new ws),ws._instance};var vs=ws,_s=i(8581),xs=i.n(_s),Es=42,Os={next(){return Es++}},js=de.View.extend({overlayClasses:"sj-overlay",overlayTemplate:cs.factory(xs()),overlayContentContainer:".sj-overlay-body",canClose:!0,isModal:!0,resultPromise:null,constructor:function(){this._createOverlayElement(),this._isLoading=!1,de.View.prototype.constructor.apply(this,arguments)},overlayTemplateData(){return{options:{canClose:this.canClose,isModal:this.isModal}}},open(){const e=this.overlayTemplateData()||{};return this.hotkeyManager=vs.instance(),this._closeHotkeyPrevented=!1,this.$overlayEl.html(this.overlayTemplate(e)),this.render().$el.appendTo(this.$overlayEl.find(this.overlayContentContainer)),this.$overlayEl.css("z-index",Os.next()).appendTo("body"),this._overlayPushed||(ge.instance().push(this),this._overlayPushed=!0),this.trigger("opened"),this.onAfterOpen(),this.canClose&&this.hotkeyManager.addHotkey(this,"Escape",(()=>{this._closeHotkeyPrevented||this._isLoading||this.close()})),this.resultPromise=a().Deferred(),this.resultPromise.promise()},disableCloseHotkey(){this._closeHotkeyPrevented=!0},enableCloseHotkey(){this._closeHotkeyPrevented=!1},onAfterOpen(){},getFocusableElements(){const e=this.$overlayEl[0],t=fs.find(e);return t.length?t:[e]},close(){"function"==typeof this.onBeforeClose&&this.onBeforeClose.apply(this,arguments),this.remove(),this.resultPromise&&this.resultPromise.resolve.apply(this.resultPromise,arguments)},setVisible(e){e?this.enableCloseHotkey():this.disableCloseHotkey(),this.$overlayEl.toggleClass("sj-overlay-hidden",!e)},setIsLoading(e){this._isLoading=e,this.$overlayEl.toggleClass("sj-overlay-loading",e)},showError(e){const t=a().Deferred(),i=new de.View({className:"sj-overlay-error",template:cs.factory(ps()),templateData:{message:e.message},subviews:{okButton:{klass:hs,target:".ok-button-target",options:{text:e.okButtonText},listeners:{click(){i.remove(),t.resolve("error_closed")}}}}});return this.setIsLoading(!1),this.$overlayEl.find(".sj-overlay-content").append(i.render().$el),t.promise()},remove(){return this._overlayPushed&&(ge.instance().pop(this),this._overlayPushed=!1),this.$overlayEl.remove(),de.View.prototype.remove.call(this),this.trigger("removed"),this},_createOverlayElement(){this.$overlayEl=a()("<div/>").addClass(this.overlayClasses).attr("tabIndex",-1).on("click","[data-action~='close-overlay']",this._onCloseOverlay.bind(this)),this.overlayEl=this.$overlayEl[0]},_onCloseOverlay(){this.close()}}),ks=i(6939),Ss=i.n(ks),Ts=js.extend({template:cs.factory(Ss()),initialize(e){this.data=e,this.okButton=new hs({className:"alert-overlay-ok",text:this.data.buttonText||G.get("confirm.ok")}),this.listenTo(this.okButton,"click",this.onOk)},onAfterOpen(){this.hotkeyManager.addHotkey(this,"Enter",this.onOk.bind(this))},render(){this.$overlayEl.addClass("alert-overlay"),this.$el.html(this.template({title:"function"==typeof this.data.title?this.data.title():this.data.title,message:"function"==typeof this.data.message?this.data.message():this.data.message}));const e=this.$(".ok-target");return e.length&&e.replaceWith(this.okButton.render().$el),this},remove(){return this.okButton.remove(),js.prototype.remove.apply(this,arguments)},onOk(){this.close(!0)}}),Ps=i(5024),Ds=i.n(Ps),Cs=de.View.extend({tagName:"label",viewClass:"sj-checkbox",events:{"change :checkbox":"_check"},defaults:{disabled:!1,checked:!1,text:""},template:cs.factory(Ds()),initialize(e){this.options=d().defaults(e||{},this.defaults),this._disabled=d().defaults(this.options,this.defaults).disabled,this._checked=d().defaults(this.options,this.defaults).checked,this._initalValue=this._checked,this.$el.addClass(this.viewClass)},render(){return this.$el.html(this.template({text:d().result(this.options,"text")})),this.$input=this.$el.find("input"),this.$input.attr("name",this.options.name),this.$input.attr("aria-label",this.options.ariaLabel),this.setChecked(this._checked),this.setDisabled(this._disabled),this.delegateEvents(),this},setChecked(e,t){this._checked=!0===e,t&&(this._initalValue=this._checked),this.$input&&this.$input.prop("checked",this._checked)},setDisabled(e){this._disabled=!0===e,this.$input&&(this.$el.toggleClass("disabled",this._disabled),this.$input.prop("disabled",this._disabled))},getValue(){return this._checked},isDirty(){return this._initalValue!==this._checked},_check(e){this._checked=a()(e.target).prop("checked"),this.trigger("check",this._checked)},toggleError(e){this.$el.toggleClass("error",e)}}),Is=i(1715),zs=i.n(Is),Ls=js.extend({template:cs.factory(zs()),templateData(){return{affirmMessage:"function"==typeof this.data.affirmMessage?this.data.affirmMessage():this.data.affirmMessage,message:"function"==typeof this.data.message?this.data.message():this.data.message,title:"function"==typeof this.data.title?this.data.title():this.data.title}},initialize(e){this.data=e},subviews(){return{okButton:{klass:hs,target:".ok-target",options:{className:"confirm-overlay-ok",text:this.data.okButtonText||G.get("confirm.ok")},listeners:{click:this.onOk}},cancelButton:{klass:hs,target:".cancel-target",options:{className:"confirm-overlay-cancel",text:this.data.cancelButtonText||G.get("confirm.cancel"),secondary:!0},listeners:{click:this.onCancel}},affirmCheckbox:{klass:Cs,target:".affirm-target",options:{attributes:{"data-qa":"confirm_checkbox"},name:"check-affirm",text:this.data.affirmMessage||""},listeners:{check:this.onCheck}}}},onAfterOpen(){this.hotkeyManager.addHotkey(this,"Enter",this.onOk.bind(this))},onAfterRender(){this.overlayEl.classList.add("confirm-overlay"),this.data.overlayClass&&this.overlayEl.classList.add(this.data.overlayClass)},onOk(){this._isAffirmed()&&this.close(!0)},onCancel(){this.close(!1)},onCheck(e){e&&(this.overlayEl.classList.remove("has-error"),this.getSubview("affirmCheckbox").toggleError(!1))},_isAffirmed(){if(!this.data.affirmMessage)return!0;const e=this.getSubview("affirmCheckbox").getValue();return e?this.overlayEl.classList.remove("has-error"):this.overlayEl.classList.add("has-error"),this.getSubview("affirmCheckbox").toggleError(!e),e}}),$s={confirm(e){if(!d().isObject(e)||!e.message&&!e.affirmMessage)throw new Error("No message for the confirm-dialog was provided.");var t=d().pick(e,"affirmMessage","message","title","okButtonText","cancelButtonText","overlayClass");return new Ls(t).open()},alert(e){var t=d().pick(e,"title","message","buttonText");if(!t.message)throw new Error("No message for the alert-dialog was provided.");return new Ts(t).open()}},Ms={async confirmDialog(e,t){if(!(Array.isArray(e)?e:[e]).find((e=>e.get("syncedfolder"))))return Promise.resolve(!0);return(await Si.toNative($s.confirm({message:G.get("filemanager.syncedfolder.confirm.info")+"<br><br>"+G.get("filemanager.syncedfolder.confirm.question"),okButtonText:t,cancelButtonText:G.get("common.cancel")})))[0]?Promise.resolve(!0):Promise.reject("cancelled syncedfolder change")}};function As(e){let t,i,r=e[2]({...e[1],...e[0]})+"";return{c(){t=new Ee.FWw(!1),i=(0,Ee.cSb)(),t.a=i},m(e,n){t.m(r,e,n),(0,Ee.$Tr)(e,i,n)},p(e,[i]){1&i&&r!==(r=e[2]({...e[1],...e[0]})+"")&&t.p(r)},i:Ee.ZTd,o:Ee.ZTd,d(e){e&&((0,Ee.ogt)(i),t.d())}}}function Vs(e,t,i){let{template:r}=t,{templateData:n={}}=t;const o={auth:V,can:Z,config:w,constants:M,encoding:F,formatters:oe,lang:G},s="function"==typeof r?r:cs.factory(r);return e.$$set=e=>{"template"in e&&i(3,r=e.template),"templateData"in e&&i(0,n=e.templateData)},[n,o,s,r]}class Fs extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Vs,As,Ee.N8,{template:3,templateData:0})}}var Bs=Fs;function Ns(e){let t;return{c(){t=(0,Ee.bGB)("div"),t.innerHTML='<div class="icon-item-selected"></div>',(0,Ee.Ljt)(t,"class","selecticon icon-item-selector")},m(e,i){(0,Ee.$Tr)(e,t,i)},d(e){e&&(0,Ee.ogt)(t)}}}function Rs(e){let t,i;return{c(){t=(0,Ee.bGB)("span"),(0,Ee.Ljt)(t,"class","icon-item-shared is-shared-icon"),(0,Ee.Ljt)(t,"data-action","share-info"),(0,Ee.Ljt)(t,"title",i=e[7]===$e.directory?e[12].get("filemanager.share.dir.tooltip"):e[12].get("filemanager.share.fileitem.tooltip"))},m(e,i){(0,Ee.$Tr)(e,t,i)},p(e,r){4224&r&&i!==(i=e[7]===$e.directory?e[12].get("filemanager.share.dir.tooltip"):e[12].get("filemanager.share.fileitem.tooltip"))&&(0,Ee.Ljt)(t,"title",i)},d(e){e&&(0,Ee.ogt)(t)}}}function Us(e){let t,i,r,n,o,s,a,l,d,c,h,u=e[5].get("readable"),p=e[5].get("share"),g=`${e[1].top}px`,m=`${e[1].left}px`,f=u&&Ns();n=new po({props:{item:e[0],width:140,height:140,class:e[3]?"drag-handle":""}}),n.$on("load",e[13]);let b=p&&Rs(e);return{c(){t=(0,Ee.bGB)("tile-item"),f&&f.c(),i=(0,Ee.DhX)(),r=(0,Ee.bGB)("div"),(0,Ee.YCL)(n.$$.fragment),o=(0,Ee.DhX)(),s=(0,Ee.bGB)("span"),b&&b.c(),a=(0,Ee.DhX)(),l=(0,Ee.bGB)("span"),d=(0,Ee.fLW)(e[8]),(0,Ee.Ljt)(l,"class","label-text display_name"),(0,Ee.Ljt)(s,"class","file-item-label file-item-displayname"),(0,Ee.Ljt)(s,"data-field","display_name"),(0,Ee.Ljt)(s,"title",e[8]),(0,Ee.Ljt)(r,"class","itemcontent"),(0,Ee.Epf)(t,"data-id",c=e[0].id),(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[10]),(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[6]),(0,Ee.Epf)(t,"data-qa","layout-item"),(0,Ee.Epf)(t,"data-type",e[7]),(0,Ee.Epf)(t,"draggable",e[3]),(0,Ee.Epf)(t,"class","svelte-svac3b"),(0,Ee.VHj)(t,"notReadable",e[9]),(0,Ee.VHj)(t,"selected",e[11].selected||!1),(0,Ee.VHj)(t,"preselected",e[11].preselected||!1),(0,Ee.VHj)(t,"predeselected",e[11].predeselected||!1),(0,Ee.VHj)(t,"isthumbnail",e[6]),(0,Ee.VHj)(t,"sj-dragged-over",e[4]),(0,Ee.VHj)(t,"sj-grid-highlight",e[2]),(0,Ee.czc)(t,"top",g),(0,Ee.czc)(t,"left",m)},m(e,c){(0,Ee.$Tr)(e,t,c),f&&f.m(t,null),(0,Ee.R3I)(t,i),(0,Ee.R3I)(t,r),(0,Ee.yef)(n,r,null),(0,Ee.R3I)(r,o),(0,Ee.R3I)(r,s),b&&b.m(s,null),(0,Ee.R3I)(s,a),(0,Ee.R3I)(s,l),(0,Ee.R3I)(l,d),h=!0},p(e,[r]){32&r&&(u=e[5].get("readable")),u?f||(f=Ns(),f.c(),f.m(t,i)):f&&(f.d(1),f=null);const o={};1&r&&(o.item=e[0]),8&r&&(o.class=e[3]?"drag-handle":""),n.$set(o),32&r&&(p=e[5].get("share")),p?b?b.p(e,r):(b=Rs(e),b.c(),b.m(s,a)):b&&(b.d(1),b=null),(!h||256&r)&&(0,Ee.rTO)(d,e[8]),(!h||256&r)&&(0,Ee.Ljt)(s,"title",e[8]),(!h||1&r&&c!==(c=e[0].id))&&(0,Ee.Epf)(t,"data-id",c),(!h||1024&r)&&(0,Ee.Epf)(t,"data-qa-supports-thumbnail",e[10]),(!h||64&r)&&(0,Ee.Epf)(t,"data-qa-has-thumbnail",e[6]),(!h||128&r)&&(0,Ee.Epf)(t,"data-type",e[7]),(!h||8&r)&&(0,Ee.Epf)(t,"draggable",e[3]),(!h||512&r)&&(0,Ee.VHj)(t,"notReadable",e[9]),(!h||2048&r)&&(0,Ee.VHj)(t,"selected",e[11].selected||!1),(!h||2048&r)&&(0,Ee.VHj)(t,"preselected",e[11].preselected||!1),(!h||2048&r)&&(0,Ee.VHj)(t,"predeselected",e[11].predeselected||!1),(!h||64&r)&&(0,Ee.VHj)(t,"isthumbnail",e[6]),(!h||16&r)&&(0,Ee.VHj)(t,"sj-dragged-over",e[4]),(!h||4&r)&&(0,Ee.VHj)(t,"sj-grid-highlight",e[2]),2&r&&g!==(g=`${e[1].top}px`)&&(0,Ee.czc)(t,"top",g),2&r&&m!==(m=`${e[1].left}px`)&&(0,Ee.czc)(t,"left",m)},i(e){h||((0,Ee.Ui)(n.$$.fragment,e),h=!0)},o(e){(0,Ee.etI)(n.$$.fragment,e),h=!1},d(e){e&&(0,Ee.ogt)(t),f&&f.d(),(0,Ee.vpE)(n),b&&b.d()}}}function qs(e,t,i){let r,n,o,s,a,l,d,c=Ee.ZTd,h=()=>(c(),c=(0,Ee.LdU)(u,(e=>i(5,l=e))),u);(0,Ee.FIv)(e,G,(e=>i(12,d=e))),e.$$.on_destroy.push((()=>c()));let{item:u}=t;h();let{rect:p}=t,{isHighlighted:g}=t,{draggable:m=!1}=t,{isDraggedOver:f=!1}=t,b=!1;return e.$$set=e=>{"item"in e&&h(i(0,u=e.item)),"rect"in e&&i(1,p=e.rect),"isHighlighted"in e&&i(2,g=e.isHighlighted),"draggable"in e&&i(3,m=e.draggable),"isDraggedOver"in e&&i(4,f=e.isDraggedOver)},e.$$.update=()=>{32&e.$$.dirty&&i(11,r=ft(l)),32&e.$$.dirty&&i(10,n=Kt.supportThumbnail(l.get("ext"))),32&e.$$.dirty&&i(9,o=!1===l.get("readable")),32&e.$$.dirty&&i(8,s=l.get("display_name")),32&e.$$.dirty&&i(7,a=l.get("type"))},[u,p,g,m,f,l,b,a,s,o,n,r,d,()=>{i(6,b=!0)}]}class Hs extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,qs,Us,Ee.N8,{item:0,rect:1,isHighlighted:2,draggable:3,isDraggedOver:4})}}var Gs=Hs;var Ws=(e,t)=>{if(!e.length||t<=0)return{items:[],height:0};let i=Math.floor((t+20)/160);return{items:e.map(((e,t)=>{const r=10+160*Math.floor(t/i);return{item:e,rect:{height:140,left:10+t%i*160,top:r,width:140}}})),height:160*Math.ceil(e.length/i)}};function Ks(e){return e<=.5?function(e){return Math.pow(e,2)}(e):function(e){return-(Math.pow(e-1,2)-1)}(e)}function Ys(e){if(!e)return null;var t=e instanceof Element&&g.getComputedStyle(e).overflowY;return"auto"===t||"scroll"===t?e:Ys(e.parentNode)||document.body}var Xs={findScrollParent(e){if(!(e instanceof Element))throw new Error("provided node is no Element.");return Ys(e)},scrollTo:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)throw new Error("element required to scrollTo");const r=e.scrollTop,n=t-r;if(0===n)return;if(0===i)return void(e.scrollTop=t);const o=(new Date).getTime();!function s(){const a=(new Date).getTime()-o;if(a>=i)return void(e.scrollTop=t);const l=Ks(a/i)*n;e.scrollTop=r+~~l,window.requestAnimationFrame(s)}()}};function Zs(e,t,i){const r=e.slice();return r[18]=t[i],r}function Js(e,t){let i,r,n,o;const s=[t[3](t[18],t[6])];var a=t[0];function l(e,t){let i={};if(void 0!==t&&104&t)i=(0,Ee.LoY)(s,[(0,Ee.gCg)(e[3](e[18],e[6]))]);else for(let e=0;e<s.length;e+=1)i=(0,Ee.f0i)(i,s[e]);return{props:i}}return a&&(r=(0,Ee.vV4)(a,l(t))),{key:e,first:null,c(){i=(0,Ee.cSb)(),r&&(0,Ee.YCL)(r.$$.fragment),n=(0,Ee.cSb)(),this.first=i},m(e,t){(0,Ee.$Tr)(e,i,t),r&&(0,Ee.yef)(r,e,t),(0,Ee.$Tr)(e,n,t),o=!0},p(e,i){if(t=e,1&i&&a!==(a=t[0])){if(r){(0,Ee.dvw)();const e=r;(0,Ee.etI)(e.$$.fragment,1,0,(()=>{(0,Ee.vpE)(e,1)})),(0,Ee.gbL)()}a?(r=(0,Ee.vV4)(a,l(t,i)),(0,Ee.YCL)(r.$$.fragment),(0,Ee.Ui)(r.$$.fragment,1),(0,Ee.yef)(r,n.parentNode,n)):r=null}else if(a){const e=104&i?(0,Ee.LoY)(s,[(0,Ee.gCg)(t[3](t[18],t[6]))]):{};r.$set(e)}},i(e){o||(r&&(0,Ee.Ui)(r.$$.fragment,e),o=!0)},o(e){r&&(0,Ee.etI)(r.$$.fragment,e),o=!1},d(e){e&&((0,Ee.ogt)(i),(0,Ee.ogt)(n)),r&&(0,Ee.vpE)(r,e)}}}function Qs(e){let t,i,r=[],n=new Map,o=`${e[1].height}px`,s=(0,Ee.NXn)(e[5]);const a=e=>e[18].item.id;for(let t=0;t<s.length;t+=1){let i=Zs(e,s,t),o=a(i);n.set(o,r[t]=Js(o,i))}return{c(){t=(0,Ee.bGB)("virtual-layout");for(let e=0;e<r.length;e+=1)r[e].c();(0,Ee.Epf)(t,"class","svelte-1t8ybiy"),(0,Ee.czc)(t,"height",o)},m(n,o){(0,Ee.$Tr)(n,t,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);e[13](t),i=!0},p(e,[i]){105&i&&(s=(0,Ee.NXn)(e[5]),(0,Ee.dvw)(),r=(0,Ee.GQg)(r,i,a,1,e,s,n,t,Ee.cly,Js,null,Zs),(0,Ee.gbL)()),2&i&&o!==(o=`${e[1].height}px`)&&(0,Ee.czc)(t,"height",o)},i(e){if(!i){for(let e=0;e<s.length;e+=1)(0,Ee.Ui)(r[e]);i=!0}},o(e){for(let e=0;e<r.length;e+=1)(0,Ee.etI)(r[e]);i=!1},d(i){i&&(0,Ee.ogt)(t);for(let e=0;e<r.length;e+=1)r[e].d();e[13](null)}}}function ea(e,t,i){let r,n,o,s,a=Ee.ZTd,l=()=>(a(),a=(0,Ee.LdU)(h,(e=>i(6,s=e))),h);e.$$.on_destroy.push((()=>a()));let{itemComponent:d=null}=t,{layoutPlan:c={height:0,items:[]}}=t,{viewModel:h=null}=t;l();let u,{buildItemProps:p}=t,g=0,m=null,f=window.innerHeight;function b(){const e=m.getBoundingClientRect();i(10,f=e.height)}function y(){i(9,g=m.scrollTop)}function w(){i(9,g=window.scrollY)}return(0,to.H3)((()=>{m=Xs.findScrollParent(u),b(),m===document.body?(w(),window.addEventListener("scroll",w,{passive:!0})):(y(),m.addEventListener("scroll",y,{passive:!0})),window.addEventListener("resize",b,{passive:!0})})),(0,to.ev)((()=>{window.removeEventListener("resize",b,{passive:!0}),m===document.body?window.removeEventListener("scroll",w,{passive:!0}):m.removeEventListener("scroll",y,{passive:!0})})),e.$$set=e=>{"itemComponent"in e&&i(0,d=e.itemComponent),"layoutPlan"in e&&i(1,c=e.layoutPlan),"viewModel"in e&&l(i(2,h=e.viewModel)),"buildItemProps"in e&&i(3,p=e.buildItemProps)},e.$$.update=()=>{1536&e.$$.dirty&&i(12,r=g-.25*f),1536&e.$$.dirty&&i(11,n=g+1.25*f),6146&e.$$.dirty&&i(5,o=c.items.filter((({rect:e})=>(e.height?e.top+e.height:e.top)>=r&&e.top<=n)))},[d,c,h,p,u,o,s,function(e){let t=o.find((t=>t.item.id===e));(t||(t=c.items.find((({item:t})=>t.id===e)),t))&&(m===document.body?window.scrollTo(window.scrollX,t.rect.top):Xs.scrollTo(m,t.rect.top))},function(){return u.getBoundingClientRect()},g,f,n,r,function(e){Ee.VnY[e?"unshift":"push"]((()=>{u=e,i(4,u)}))}]}class ta extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,ea,Qs,Ee.N8,{itemComponent:0,layoutPlan:1,viewModel:2,buildItemProps:3,scrollIntoView:7,getBoundingClientRect:8})}get scrollIntoView(){return this.$$.ctx[7]}get getBoundingClientRect(){return this.$$.ctx[8]}}var ia=ta;function ra(e){let t,i,r,n,o,s,a=e[8]&&e[12].length>0&&aa(e),l=e[12].length>0&&e[2]&&la(e);const d=[pa,ua,ha,ca,da],c=[];function h(e,t){return 0===e[12].length?0:e[11]===je.LIST?1:e[11]===je.TILES?2:e[11]===je.FLUID?3:4}return r=h(e),n=c[r]=d[r](e),{c(){a&&a.c(),t=(0,Ee.DhX)(),l&&l.c(),i=(0,Ee.DhX)(),n.c(),o=(0,Ee.cSb)()},m(e,n){a&&a.m(e,n),(0,Ee.$Tr)(e,t,n),l&&l.m(e,n),(0,Ee.$Tr)(e,i,n),c[r].m(e,n),(0,Ee.$Tr)(e,o,n),s=!0},p(e,s){e[8]&&e[12].length>0?a?(a.p(e,s),4352&s[0]&&(0,Ee.Ui)(a,1)):(a=aa(e),a.c(),(0,Ee.Ui)(a,1),a.m(t.parentNode,t)):a&&((0,Ee.dvw)(),(0,Ee.etI)(a,1,1,(()=>{a=null})),(0,Ee.gbL)()),e[12].length>0&&e[2]?l?(l.p(e,s),4100&s[0]&&(0,Ee.Ui)(l,1)):(l=la(e),l.c(),(0,Ee.Ui)(l,1),l.m(i.parentNode,i)):l&&((0,Ee.dvw)(),(0,Ee.etI)(l,1,1,(()=>{l=null})),(0,Ee.gbL)());let u=r;r=h(e),r===u?c[r].p(e,s):((0,Ee.dvw)(),(0,Ee.etI)(c[u],1,1,(()=>{c[u]=null})),(0,Ee.gbL)(),n=c[r],n?n.p(e,s):(n=c[r]=d[r](e),n.c()),(0,Ee.Ui)(n,1),n.m(o.parentNode,o))},i(e){s||((0,Ee.Ui)(a),(0,Ee.Ui)(l),(0,Ee.Ui)(n),s=!0)},o(e){(0,Ee.etI)(a),(0,Ee.etI)(l),(0,Ee.etI)(n),s=!1},d(e){e&&((0,Ee.ogt)(t),(0,Ee.ogt)(i),(0,Ee.ogt)(o)),a&&a.d(e),l&&l.d(e),c[r].d(e)}}}function na(e){let t,i;return t=new Bs({props:{template:e[0]}}),{c(){(0,Ee.YCL)(t.$$.fragment)},m(e,r){(0,Ee.yef)(t,e,r),i=!0},p(e,i){const r={};1&i[0]&&(r.template=e[0]),t.$set(r)},i(e){i||((0,Ee.Ui)(t.$$.fragment,e),i=!0)},o(e){(0,Ee.etI)(t.$$.fragment,e),i=!1},d(e){(0,Ee.vpE)(t,e)}}}function oa(e){let t,i;return t=new Bs({props:{template:e[5],templateData:{errorImage:mt,model:e[7],isEncryptedFolder:e[19]}}}),{c(){(0,Ee.YCL)(t.$$.fragment)},m(e,r){(0,Ee.yef)(t,e,r),i=!0},p(e,i){const r={};32&i[0]&&(r.template=e[5]),524416&i[0]&&(r.templateData={errorImage:mt,model:e[7],isEncryptedFolder:e[19]}),t.$set(r)},i(e){i||((0,Ee.Ui)(t.$$.fragment,e),i=!0)},o(e){(0,Ee.etI)(t.$$.fragment,e),i=!1},d(e){(0,Ee.vpE)(t,e)}}}function sa(e){let t,i;return t=new Bs({props:{template:e[6]}}),{c(){(0,Ee.YCL)(t.$$.fragment)},m(e,r){(0,Ee.yef)(t,e,r),i=!0},p(e,i){const r={};64&i[0]&&(r.template=e[6]),t.$set(r)},i(e){i||((0,Ee.Ui)(t.$$.fragment,e),i=!0)},o(e){(0,Ee.etI)(t.$$.fragment,e),i=!1},d(e){(0,Ee.vpE)(t,e)}}}function aa(e){let t,i;return t=new es({props:{isTarget:e[38],getBoundingBox:e[39]}}),t.$on("selectionStart",e[40]),t.$on("selectionDone",e[41]),t.$on("preselecting",e[42]),{c(){(0,Ee.YCL)(t.$$.fragment)},m(e,r){(0,Ee.yef)(t,e,r),i=!0},p(e,i){const r={};32768&i[0]&&(r.isTarget=e[38]),131072&i[0]&&(r.getBoundingBox=e[39]),t.$set(r)},i(e){i||((0,Ee.Ui)(t.$$.fragment,e),i=!0)},o(e){(0,Ee.etI)(t.$$.fragment,e),i=!1},d(e){(0,Ee.vpE)(t,e)}}}function la(e){let t,i,r,n;return t=new tt({props:{}}),e[43](t),r=new ut({props:{getBoundingBox:e[44]}}),{c(){(0,Ee.YCL)(t.$$.fragment),i=(0,Ee.DhX)(),(0,Ee.YCL)(r.$$.fragment)},m(e,o){(0,Ee.yef)(t,e,o),(0,Ee.$Tr)(e,i,o),(0,Ee.yef)(r,e,o),n=!0},p(e,i){t.$set({});const n={};131072&i[0]&&(n.getBoundingBox=e[44]),r.$set(n)},i(e){n||((0,Ee.Ui)(t.$$.fragment,e),(0,Ee.Ui)(r.$$.fragment,e),n=!0)},o(e){(0,Ee.etI)(t.$$.fragment,e),(0,Ee.etI)(r.$$.fragment,e),n=!1},d(n){n&&(0,Ee.ogt)(i),e[43](null),(0,Ee.vpE)(t,n),(0,Ee.vpE)(r,n)}}}function da(e){let t,i,r,n,o;return{c(){t=(0,Ee.bGB)("div"),i=(0,Ee.bGB)("div"),r=(0,Ee.fLW)("ViewMode '"),n=(0,Ee.fLW)(e[11]),o=(0,Ee.fLW)("' not implemented."),(0,Ee.Ljt)(i,"class","text"),(0,Ee.Ljt)(t,"class","error-or-empty-state")},m(e,s){(0,Ee.$Tr)(e,t,s),(0,Ee.R3I)(t,i),(0,Ee.R3I)(i,r),(0,Ee.R3I)(i,n),(0,Ee.R3I)(i,o)},p(e,t){2048&t[0]&&(0,Ee.rTO)(n,e[11])},i:Ee.ZTd,o:Ee.ZTd,d(e){e&&(0,Ee.ogt)(t)}}}function ca(e){let t,i,r,n,o,s={itemComponent:Io,layoutPlan:e[14],buildItemProps:e[26],viewModel:e[25]};return r=new ia({props:s}),e[49](r),{c(){t=(0,Ee.bGB)("fluid-layout"),i=(0,Ee.bGB)("fluid-content"),(0,Ee.YCL)(r.$$.fragment),(0,Ee.P$F)((()=>e[50].call(i)))},m(s,a){(0,Ee.$Tr)(s,t,a),(0,Ee.R3I)(t,i),(0,Ee.yef)(r,i,null),n=(0,Ee.C5n)(i,e[50].bind(i)),o=!0},p(e,t){const i={};16384&t[0]&&(i.layoutPlan=e[14]),r.$set(i)},i(e){o||((0,Ee.Ui)(r.$$.fragment,e),o=!0)},o(e){(0,Ee.etI)(r.$$.fragment,e),o=!1},d(i){i&&(0,Ee.ogt)(t),e[49](null),(0,Ee.vpE)(r),n()}}}function ha(e){let t,i,r,n,o,s={itemComponent:Gs,layoutPlan:e[14],buildItemProps:e[26],viewModel:e[25]};return r=new ia({props:s}),e[47](r),{c(){t=(0,Ee.bGB)("tile-layout"),i=(0,Ee.bGB)("tile-content"),(0,Ee.YCL)(r.$$.fragment),(0,Ee.P$F)((()=>e[48].call(i)))},m(s,a){(0,Ee.$Tr)(s,t,a),(0,Ee.R3I)(t,i),(0,Ee.yef)(r,i,null),n=(0,Ee.C5n)(i,e[48].bind(i)),o=!0},p(e,t){const i={};16384&t[0]&&(i.layoutPlan=e[14]),r.$set(i)},i(e){o||((0,Ee.Ui)(r.$$.fragment,e),o=!0)},o(e){(0,Ee.etI)(r.$$.fragment,e),o=!1},d(i){i&&(0,Ee.ogt)(t),e[47](null),(0,Ee.vpE)(r),n()}}}function ua(e){let t,i,r,n,o,s,a;i=new Fo({props:{collection:e[1]}});let l={itemComponent:qo,layoutPlan:e[14],buildItemProps:e[26],viewModel:e[25]};return o=new ia({props:l}),e[45](o),{c(){t=(0,Ee.bGB)("list-layout"),(0,Ee.YCL)(i.$$.fragment),r=(0,Ee.DhX)(),n=(0,Ee.bGB)("list-content"),(0,Ee.YCL)(o.$$.fragment),(0,Ee.P$F)((()=>e[46].call(n)))},m(l,d){(0,Ee.$Tr)(l,t,d),(0,Ee.yef)(i,t,null),(0,Ee.R3I)(t,r),(0,Ee.R3I)(t,n),(0,Ee.yef)(o,n,null),s=(0,Ee.C5n)(n,e[46].bind(n)),a=!0},p(e,t){const r={};2&t[0]&&(r.collection=e[1]),i.$set(r);const n={};16384&t[0]&&(n.layoutPlan=e[14]),o.$set(n)},i(e){a||((0,Ee.Ui)(i.$$.fragment,e),(0,Ee.Ui)(o.$$.fragment,e),a=!0)},o(e){(0,Ee.etI)(i.$$.fragment,e),(0,Ee.etI)(o.$$.fragment,e),a=!1},d(r){r&&(0,Ee.ogt)(t),(0,Ee.vpE)(i),e[45](null),(0,Ee.vpE)(o),s()}}}function pa(e){let t,i,r;return i=new Bs({props:{template:e[3],templateData:{emptyImage:pt,encryptedImage:gt,model:e[7],...e[4]}}}),{c(){t=(0,Ee.bGB)("div"),(0,Ee.YCL)(i.$$.fragment),(0,Ee.Ljt)(t,"class","error-or-empty-state")},m(e,n){(0,Ee.$Tr)(e,t,n),(0,Ee.yef)(i,t,null),r=!0},p(e,t){const r={};8&t[0]&&(r.template=e[3]),144&t[0]&&(r.templateData={emptyImage:pt,encryptedImage:gt,model:e[7],...e[4]}),i.$set(r)},i(e){r||((0,Ee.Ui)(i.$$.fragment,e),r=!0)},o(e){(0,Ee.etI)(i.$$.fragment,e),r=!1},d(e){e&&(0,Ee.ogt)(t),(0,Ee.vpE)(i)}}}function ga(e){let t,i,r,n,o,s,a,l;const d=[sa,oa,na,ra],c=[];function h(e,t){return e[20]===e[22].loading?0:e[20]===e[22].error?1:e[20]===e[22].canceled?2:e[20]===e[22].done?3:-1}return~(i=h(e))&&(r=c[i]=d[i](e)),{c(){t=(0,Ee.bGB)("x-filemanager"),r&&r.c(),(0,Ee.Epf)(t,"data-load-state",e[20]),(0,Ee.VHj)(t,"selecting",e[16]),(0,Ee.VHj)(t,"isDraggedOver",e[21].draggedOverId===e[7].id)},m(r,d){(0,Ee.$Tr)(r,t,d),~i&&c[i].m(t,null),e[51](t),s=!0,a||(l=[(0,Ee.TVh)(n=e[30].call(null,t,{folder:e[7],collection:e[1],onDragStart:e[27],onDragOver:e[28],onDrop:e[29]})),(0,Ee.TVh)(o=e[31].call(null,t,{folder:e[7],collection:e[1],onDragOver:e[28],onDrop:e[33]})),(0,Ee.oLt)(t,"click",(function(){(0,Ee.sBU)(e[13])&&e[13].apply(this,arguments)})),(0,Ee.oLt)(t,"contextmenu",(0,Ee.AT7)(e[32]))],a=!0)},p(a,l){let u=i;i=h(e=a),i===u?~i&&c[i].p(e,l):(r&&((0,Ee.dvw)(),(0,Ee.etI)(c[u],1,1,(()=>{c[u]=null})),(0,Ee.gbL)()),~i?(r=c[i],r?r.p(e,l):(r=c[i]=d[i](e),r.c()),(0,Ee.Ui)(r,1),r.m(t,null)):r=null),(!s||1048576&l[0])&&(0,Ee.Epf)(t,"data-load-state",e[20]),n&&(0,Ee.sBU)(n.update)&&130&l[0]&&n.update.call(null,{folder:e[7],collection:e[1],onDragStart:e[27],onDragOver:e[28],onDrop:e[29]}),o&&(0,Ee.sBU)(o.update)&&130&l[0]&&o.update.call(null,{folder:e[7],collection:e[1],onDragOver:e[28],onDrop:e[33]}),(!s||65536&l[0])&&(0,Ee.VHj)(t,"selecting",e[16]),(!s||2097280&l[0])&&(0,Ee.VHj)(t,"isDraggedOver",e[21].draggedOverId===e[7].id)},i(e){s||((0,Ee.Ui)(r),s=!0)},o(e){(0,Ee.etI)(r),s=!1},d(r){r&&(0,Ee.ogt)(t),~i&&c[i].d(),e[51](null),a=!1,(0,Ee.j7q)(l)}}}function ma(e,t,i){let r,n,o,s,a,l,d,c=Ee.ZTd,h=()=>(c(),c=(0,Ee.LdU)(_,(e=>i(12,s=e))),_),u=Ee.ZTd,p=()=>(u(),u=(0,Ee.LdU)(S,(e=>i(36,a=e))),S),g=Ee.ZTd,m=()=>(g(),g=(0,Ee.LdU)(P,(e=>i(37,l=e))),P);e.$$.on_destroy.push((()=>c())),e.$$.on_destroy.push((()=>u())),e.$$.on_destroy.push((()=>g()));const{loadState:f}=M,{select:b,preselect:y}=ts,w=(0,to.x)();let{cancelTemplate:v}=t,{collection:_}=t;h();let{dragdropEnabled:x=!1}=t,{emptyTpl:E=De()}=t,{emptyTplData:O={}}=t,{errorTemplate:j=Ie()}=t,{loadingTemplate:k=Le()}=t,{model:S}=t;p();let{selectmodeEnabled:T=!0}=t,{viewModeModel:P}=t;m();let D,C,{uploadManager:I}=t;(0,to.gx)((()=>{R(),i(13,D=((e,t,i,r)=>{let n=null,o=null;return s=>{const a=s.target.closest("[data-id]");if(!a)return;const l=a.dataset.id,d=t.get(l);if(!d)return;if(!d.get("readable"))return;const c=s.target.closest(".selecticon"),h=!!t.firstSelected();if(c||h)return void t.toggleSelected({model:d,invert:s.shiftKey,viewMode:i||je.LIST,planItems:r?r.map((e=>e.item)):[]});const u=s.target.closest("[data-action]");if(u)return void e(`action:${u.dataset.action}`,d);const p=s.target.closest(".label-text.display_name");if(p)return clearTimeout(o),p===n?(n=null,void e("rename",d)):(n=p,void(o=setTimeout((()=>{n=null,e("open",[d,t.models])}),ke)));e("open",[d,t.models])}})(w,_,n,C.items||[]))}));const z=(0,Jt.fZ)({highlightId:null});let L;(0,Ee.FIv)(e,z,(e=>i(21,d=e)));let $,A,V=!1,B=null,N=0;function R(){$&&B&&($.scrollIntoView(B),function(e){z.update((t=>({...t,highlightId:e})))}(B),setTimeout(U.bind(null,B),4e3),B=null)}function U(e){z.update((t=>t.highlightId!==e?t:{...t,highlightId:null}))}function q(){z.update((e=>({...e,draggedOverId:null})))}const H=Oe(Ye,x),W=Oe(nt,!!I),K=Te(w,S),Y=(e=>function(t,i){if(function(e){return e&&e.items&&e.items.length&&e.items[0].webkitGetAsEntry}(t)){const r=[...t.items].map((e=>e.webkitGetAsEntry())).filter((e=>null!==e));e.addFiles(i,r)}else e.addFiles(i,t.files)})(I);return e.$$set=e=>{"cancelTemplate"in e&&i(0,v=e.cancelTemplate),"collection"in e&&h(i(1,_=e.collection)),"dragdropEnabled"in e&&i(2,x=e.dragdropEnabled),"emptyTpl"in e&&i(3,E=e.emptyTpl),"emptyTplData"in e&&i(4,O=e.emptyTplData),"errorTemplate"in e&&i(5,j=e.errorTemplate),"loadingTemplate"in e&&i(6,k=e.loadingTemplate),"model"in e&&p(i(7,S=e.model)),"selectmodeEnabled"in e&&i(8,T=e.selectmodeEnabled),"viewModeModel"in e&&m(i(9,P=e.viewModeModel)),"uploadManager"in e&&i(34,I=e.uploadManager)},e.$$.update=()=>{if(32&e.$$.dirty[1]&&i(20,r=a.get("loadState")),64&e.$$.dirty[1]&&i(11,n=l.get("viewMode")),32&e.$$.dirty[1]&&i(19,o=Ge.isEncrypted(F.urlDecode(a.get("path")))),7168&e.$$.dirty[0]){let e={[je.LIST]:Ho,[je.TILES]:Ws,[je.FLUID]:ko}[n];e&&i(14,C=e(s.models,N-20))}},[v,_,x,E,O,j,k,S,T,P,N,n,s,D,C,L,V,$,A,o,r,d,f,b,y,z,function({item:e,rect:t,infos:i},{highlightId:r,draggedOverId:n}){return{item:e,rect:t,infos:i,isDraggedOver:e.id===n,isHighlighted:e.id===r,draggable:x&&e.get("readable")&&e.get("parent_writable")}},function(e){return A.setCount(e.length),A.getElement()},function(e){z.update((t=>({...t,draggedOverId:e?e.id:null})))},function(e,t){q(),Ms.confirmDialog(e,G.get("filemanager.move.button.title")).then((()=>{ye.execute("moveFiles",t,e)})).catch((()=>{}))},H,W,K,function(e,t){Y(e,t),q()},I,function(e){B=e,R()},a,l,e=>e.closest("x-filemanager")===L||e.contains(L),()=>$.getBoundingClientRect(),()=>{i(16,V=!0)},e=>{i(16,V=!1),b(_,zo(e.detail,C),e.detail.shiftKey,n,C.items)},e=>{y(_,zo(e.detail,C),e.detail.shiftKey)},function(e){Ee.VnY[e?"unshift":"push"]((()=>{A=e,i(18,A)}))},()=>$.getBoundingClientRect(),function(e){Ee.VnY[e?"unshift":"push"]((()=>{$=e,i(17,$)}))},function(){N=this.clientWidth,i(10,N)},function(e){Ee.VnY[e?"unshift":"push"]((()=>{$=e,i(17,$)}))},function(){N=this.clientWidth,i(10,N)},function(e){Ee.VnY[e?"unshift":"push"]((()=>{$=e,i(17,$)}))},function(){N=this.clientWidth,i(10,N)},function(e){Ee.VnY[e?"unshift":"push"]((()=>{L=e,i(15,L)}))}]}class fa extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,ma,ga,Ee.N8,{cancelTemplate:0,collection:1,dragdropEnabled:2,emptyTpl:3,emptyTplData:4,errorTemplate:5,loadingTemplate:6,model:7,selectmodeEnabled:8,viewModeModel:9,uploadManager:34,scrollIntoView:35},null,[-1,-1])}get scrollIntoView(){return this.$$.ctx[35]}}var ba=fa,ya=i(6936),wa=i.n(ya),va=i(2214),_a=i.n(va),xa={calculate(e){var t=0,i=d().reduce(e,(function(e,t){d().isObject(t)||(t={value:t});var i=d().extend({},t,{value:Math.max(0,t.value)||0,percent:0});return e.totalSum+=i.value,e.segments.push(i),e}),{totalSum:0,segments:[]});return i.totalSum>0&&d().each(i.segments,(function(e,r){var n;e.value>0&&(r===i.segments.length-1?n=100-t:(n=Math.round(e.value/i.totalSum*1e3)/10,t+=n),e.percent=n)})),i}},Ea=o().View.extend({className:"sj-barchart",initialize(e){this.options=d().extend({},{values:[],hideEmptySegments:!1},e),this.setValues(this.options.values)},render(){return this.$el.empty(),this._data&&this._data.totalSum>0&&d().each(this._data.segments,(function(e){var t=a()('<span class="sj-barchart-segment" />');!e.percent&&this.options.hideEmptySegments||(d().has(e,"className")&&t.addClass(e.className),t.css("width",e.percent.toFixed(1)+"%"),t.appendTo(this.$el))}),this),this},setValues(e){if(!Array.isArray(e))throw new Error("Provided values need to be an array.");this._data=xa.calculate(e)}}),Oa=i(7849),ja=i.n(Oa),ka=o().View.extend({className:"sj-breadcrumb",segments:[],events:{"click .link":"_onLinkClick","click .segment-icon":"_onIconClick"},defaults:{single_segment_length:19,path_max_length:70,prefix:""},initialize(e){this.config=d().extend({},this.defaults,e)},template:cs.factory([ja()].join("")),render(){return this.$el.empty().append(this.template({segments:d().clone(this.segments)},this)),this},_onLinkClick(e){e.preventDefault();var t,i=a()(e.target).attr("href"),r=a()(e.target).hasClass("level-up");i||(i=a()(e.currentTarget).attr("href")),i&&(r||(r=a()(e.currentTarget).hasClass("level-up")),i=i.replace(this.config.prefix,""),t=r?"breadcrumb-arrow":"breadcrumb-path",this.trigger("click",i,t))},_onIconClick(e){this.trigger("iconclick",e)},setSegments(e){return d().each(e,(function(e){e.href=this.config.prefix+e.href}),this),this.segments=e,this.render()},addSegment(e){return this.segments.push(e),this.render()}}),Sa=i(4938),Ta=i.n(Sa),Pa=o().View.extend({tpl:cs.factory(Ta()),initialize(e){var t;this._html=e.html,this._namespace=String((new Date).getTime()),this._relatedEl=(null===(t=e.relatedEl)||void 0===t?void 0:t[0])||e.relatedEl||null,this._relatedEl&&(this._checkRelatedEl=setInterval((()=>{this._relatedEl.isConnected||(this.remove(),clearInterval(this._checkRelatedEl))}),500))},render(){return this.el.innerHTML=this.tpl({body:"function"==typeof this._html?this._html():this._html}),document.body.append(this.el),this.el.classList.add("sj-tooltip"),this.el.style.zIndex=Os.next(),this.align(),window.addEventListener("resize",this._onResize.bind(this)),window.addEventListener("scroll",this._onScroll.bind(this)),this._ticking=!1,this},_onResize(){const e=window.innerWidth,t=window.innerHeight;this._latestContainerWidth===e&&this._latestContainerHeight===t||(this._hasResized=!0,this._latestContainerWidth=e,this._latestContainerHeight=t,this._requestTick())},_onScroll(){const e=window.scrollX||window.pageXOffset,t=window.scrollY||window.pageYOffset;this._latestContainerScrollX===e&&this._latestContainerScrollY===t||(this._hasScrolled=!0,this._latestContainerScrollX=e,this._latestContainerScrollY=t,this._requestTick())},_requestTick(){this._ticking||(this._requestId=window.requestAnimationFrame(this._updateAll.bind(this)),this._ticking=!0)},_updateAll(){this._ticking=!1,(this._hasResized||this._hasScrolled)&&(this._hasResized=!1,this._hasScrolled=!1,this.align())},align(){const e=window.getComputedStyle(this.el);if("block"!==e.getPropertyValue("display"))return;if(!this._relatedEl)return;const t=parseInt(e.getPropertyValue("margin-bottom"),10)||0,i=this._relatedEl.getBoundingClientRect().top+window.scrollY,r=this._relatedEl.getBoundingClientRect().left+window.scrollX;this.el.style.left=`${r}px`,this.el.style.top=i-t-this.el.offsetHeight+"px"},remove(){return cancelAnimationFrame(this._requestId),delete this.relatedEl,window.removeEventListener("resize",this._onResize),o().View.prototype.remove.call(this),this}});function Da(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ca(e,t,i){const r=document.createElement("SPAN");return r.classList.add("icon"),r.classList.add(t),i&&r.classList.add("clickable"),r.innerHTML=`<span class="${e}"></span>`,r}var Ia=o().View.extend({inputNodeName:"INPUT",createInput(){const e=document.createElement(this.inputNodeName);return e.setAttribute("spellcheck","false"),e.setAttribute("type","text"),e},events:{"keypress input":"_onKeypress","keyup input":"_onKeyup","input input":"_onInput",focusin:"_onFocusIn",focusout:"_onFocusOut","focus input":"_onFocus","blur input":"_onBlur","click .icon.left":"_onLeftIconClicked","click .icon.right":"_onRightIconClicked","click .icon.copy":"_onCopyIconClicked"},defaults:{busyWhileValidating:!1,showValidationErrorIcon:!0,selectOnFocus:!1,leftIcon:null,rightIcon:null,disabled:!1,leftIconClickable:!1,rightIconClickable:!1},initialValue:null,config:null,placeholder:null,initialize(e){this.config=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Da(e,t,i[t])}))}return e}({},this.defaults,e),this.config.filter&&(this.config.filter instanceof RegExp||(this.config.filter=null,console.error("EditorView expected a regex as filter in constructor config"))),this.inputElement=this.createInput(),this.config.name&&this.inputElement.setAttribute("name",this.config.name),this.config.inputAttributes&&Object.entries(this.config.inputAttributes).forEach((e=>{let[t,i]=e;this.inputElement.setAttribute(t,i)})),this.config.placeholder&&(this.placeholder=this.config.placeholder),this.config.disabled&&this.setDisabled(!0),this.setValue("",!0),this._validationCounter=0},_onKeypress(e){this.config.filter&&this.filterText(e)},_onKeyup(e){"Escape"===e.key&&(this.setValue(this.tempValue),this.inputElement.dispatchEvent(new FocusEvent("focusout")),this.inputElement.blur())},_onInput(){this.trigger("input",this.getValue())},_onFocusIn(e){this.trigger("focusIn",e),this.el.classList.add("sj-editor-focused"),e.target.nodeName===this.inputNodeName&&(this.tempValue=this.inputElement.value),this.config.selectOnFocus&&setTimeout(this.setSelection.bind(this)),this.stopValidation()},focus(){this.inputElement.focus()},_onFocus(){this.trigger("focus")},_onFocusOut(e){this.trigger("focusOut",e),this.el.classList.remove("sj-editor-focused"),"function"==typeof this.config.validationFunc&&this._validateOnBlur()},_validateOnBlur(){this.validate(this.getValue())},blur(){this.inputElement.blur()},_onBlur(){this.trigger("blur")},_onLeftIconClicked(e){e.target.closest(".clickable")&&this.trigger("iconclick:left")},_onRightIconClicked(e){e.target.closest(".clickable")&&this.trigger("iconclick:right")},_onCopyIconClicked(){const e=this.getValue();""!==e&&ye.execute("copyToClipboard",e,G.get("clipboard.copy.success"))},_updateIcons(){let e;this.config.leftIcon&&(e=this.config.leftIconClickable&&!this.getDisabled(),this.setLeftIcon(this.config.leftIcon,e)),this.config.rightIcon&&(e=this.config.rightIconClickable&&!this.getDisabled(),this.setRightIcon(this.config.rightIcon,e))},render(){return this.$el.html(this.inputElement),this.config.copyAllowed&&this.addCopyIcon(),this.delegateEvents(),this.el.classList.add("sj-editor"),this._updateIcons(),this.toggleError(this.hasError()),this},setDisabled(e){this.inputElement.disabled=!0===e,!0===e?this.el.classList.add("sj-editor-disabled"):this.el.classList.remove("sj-editor-disabled"),this._updateIcons(),!0===e&&this.toggleError(!1)},getDisabled(){return this.inputElement.disabled},setValue(e,t){let i=e;return null==i&&(i=""),i=String(i),this.inputElement.value=i,t&&(this.initialValue=i,this.toggleError(!1)),this},getValue(){return this.inputElement.value},setPlaceholder(e){let t=e||this.placeholder;"function"==typeof t&&(t=t()),t&&this.inputElement.setAttribute("placeholder",t)},unsetPlaceholder(){this.inputElement.removeAttribute("placeholder")},setLeftIcon(e,t){const i=this.el.querySelector("span.icon.left");if(i&&this.el.removeChild(i),e){const i=Ca(e,"left",t);this.el.prepend(i,this.el.firstChild),this.el.classList.add("sj-editor-icon")}},setRightIcon(e,t){const i=this.el.querySelector("span.icon.right");if(i&&this.el.removeChild(i),e){const i=Ca(e,"right",t);this.el.prepend(i),this.el.classList.add("sj-editor-icon")}},addCopyIcon(){const e=Ca("icon-copy","copy",!0);this.el.prepend(e),e.setAttribute("title",G.get("clipboard.copy")),this.el.classList.add("sj-editor-icon")},remove(){return window.cancelAnimationFrame(this._requestId),this._tooltip&&this._tooltip.remove(),o().View.prototype.remove.call(this),this},showTooltip(){this.hideTooltip(),this.config.tooltipHtml&&(this._tooltip=new Pa({relatedEl:this.$el,html:this.config.tooltipHtml}),this._requestId=window.requestAnimationFrame((()=>{this._tooltip.render()})))},hideTooltip(){window.cancelAnimationFrame(this._requestId),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)},setTooltipHtml(e){return this.config.tooltipHtml=e,this},filterText(e){const t=1===e.key.length?e.key:null;null!==t&&this.config.filter.test(t)&&(e.preventDefault(),this.trigger("filter:error",t))},setSelection(e){this.el.classList.contains("sj-editor-focused")||this.inputElement.focus(),this.inputElement.setSelectionRange(0,e||this.getValue().length)},isDirty(){return this.getValue()!==this.initialValue},validate(){const e=a().Deferred(),t=this.getValue(),i=++this._validationCounter;let r;if(this.getDisabled())r=e.resolve().promise();else if(this.config.required&&0===t.length)r=e.reject("requiredInput").promise();else if("function"==typeof this.config.validationFunc&&this.isDirty()){if(r=this.config.validationFunc(t,this),!r||"function"!=typeof r.then)throw new Error("The validation function doesn't return a promise.");this.config.busyWhileValidating&&this.setRightIcon("icon-validation-busy")}else r=e.resolve().promise();return this._isValidating=!0,r.done((()=>{this._validationCounter===i&&(this._isValidating=!1,this.trigger("validate:success",t),this.toggleError(!1))})).fail(((e,r)=>{this._validationCounter===i&&(this._isValidating=!1,this.trigger("validate:error",t,e,r),this.toggleError(!0))}))},stopValidation(){this._isValidating&&(this._isValidating=!1,this._validationCounter++,this.config.busyWhileValidating&&(this._hasError?this.toggleError(!0):this.setRightIcon(null)))},toggleError(e){this._hasError=e,e?this.el.classList.add("error"):this.el.classList.remove("error"),this.config.showValidationErrorIcon?this._hasError?this.setRightIcon("icon-validation-error",!1):this.setRightIcon(this.config.rightIcon,this.config.rightIconClickable&&!this.getDisabled()):this.config.busyWhileValidating&&this.setRightIcon(null)},getInput(){return this.inputElement},hasError(){return!!this._hasError}}),za=o().View.extend({toggle(){this.$el.hasClass("open")?this.close():this.open()},open(){var e=this;this.$el.addClass("open"),a()(document).on("mousedown.sj-flyout",(function(t){a()(t.target).closest(e.$el).length||e.close()}))},close(){this.$el.removeClass("open"),a()(document).off("mousedown.sj-flyout")},render(){if(!this.triggerView)throw new Error("triggerView is mandatory");if(!this.contentView)throw new Error("contentView is mandatory");return this.triggerView instanceof o().View?this.$el.append(this.triggerView.render().$el.addClass("trigger")):this.$el.append(this.triggerView.addClass("trigger")),this.el.classList.add("sj-flyout"),this.$el.append(this.contentView.render().$el),this},remove(){return this.triggerView&&this.triggerView.remove(),this.contentView&&this.contentView.remove(),o().View.prototype.remove.apply(this,arguments)}}),La={highlightMatches(e,t){if(""===e||""===t)return t;e=e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var i=new RegExp(e,"gi"),r=d().uniq(t.match(i));return d().each(r,(function(e){i=new RegExp(e,"g"),t=t.replace(i,"<>"+e+"</>")})),t.replace(/<>/g,"<em>").replace(/<\/>/g,"</em>")}},$a=hs.extend({defaults:d().extend({iconClass:""},hs.prototype.defaults),render(){return hs.prototype.render.apply(this,arguments),this.$el.addClass("sj-icon-button icon-container").prepend('<span class="'+("icon "+this.config.iconClass).trim()+'">'),this}}),Ma=o().View.extend({tagName:"span",className:"sj-info-tooltip",events:{click:"_onClick"},initialize(e){this.options=e||{},this._isTooltipVisible=!1},render(){return this.$el.addClass("icon icon-info-tooltip"),this.options.iconClassname&&this.$el.addClass(this.options.iconClassname),this},_onClick(e){e.preventDefault(),this._isTooltipVisible||this.tooltipShow()},tooltipShow(){a()(document).on("click."+this.cid,(e=>{a()(e.target).closest(this.$el).length||a()(e.target).closest(this.tooltip.$el).length||this.tooltipHide()})),this.tooltip=new Pa({relatedEl:this.$el,html:"function"==typeof this.options.contentHtml?this.options.contentHtml():this.options.contentHtml}).render(),this._isTooltipVisible=!0},_unbindDocumentClick(){a()(document).off("click."+this.cid)},tooltipHide(){this.tooltip&&this.tooltip.remove(),this._unbindDocumentClick(),this._isTooltipVisible=!1},remove(){this.tooltipHide(),o().View.prototype.remove.apply(this)}}),Aa=de.View.extend({className:"error-or-empty-state"}),Va=ae.extend({autoRender:!0,tagName:"list-item",initialize(e){e=e||{},this.dragdropEnabled=!!e.dragdropEnabled,this.$el.data("mid",this.model.id),this.autoRender&&this.listenTo(this.model,"change",this.render)}}),Fa={patch(e,t){var i;t.forEach((function(r,n){0!==n?(i=t[n-1],r.previousElementSibling!==i&&e.insertBefore(r,i.nextElementSibling)):e.firstElementChild!==r&&e.insertBefore(r,e.firstElementChild)}))}},Ba={isElementIntersected(e){const t=e.getBoundingClientRect();if(!(t.top>=0&&t.left>=0&&t.bottom<=g.getInnerHeight()&&t.right<=g.getInnerWidth()))return!0;return!(e.contains(document.elementFromPoint(t.left+1,t.top+1))&&e.contains(document.elementFromPoint(t.left+1,t.bottom-1))&&e.contains(document.elementFromPoint(t.right-1,t.top+1))&&e.contains(document.elementFromPoint(t.right-1,t.bottom-1)))}};function Na(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ra(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Na(e,t,i[t])}))}return e}function Ua(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var qa=o().View.extend({contentTagName:"grid-content",itemClassName:"sj-grid-item",className:"sj-grid-wrapper",itemViewClass:Va,itemViewOpts:{},itemViews:null,events:{click:"delegateEvent","click .sj-grid-content .sj-grid-item":"delegateEvent","longpress .sj-grid-content .sj-grid-item":"delegateEvent","touchstart .sj-grid-content .sj-grid-item":"touchstart","touchend .sj-grid-content .sj-grid-item":"touchend","touchmove .sj-grid-content .sj-grid-item":"touchmove",contextmenu:"contextmenu","dragstart .sj-grid-content .sj-grid-item":"_onDragStart","dragend .sj-grid-content":"_onDragEnd","animationend .sj-grid-highlight":"onAnimationEnd"},initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._createContentEl(),this.itemViews=new(o().Collection),this.dragdropEnabled=!!e.dragdropEnabled,this.listenTo(this.collection,"add",this._renderOne),this.listenTo(this.collection,"add:end",this._onAddEnd),this.listenTo(this.collection,"remove",this.syncItemViewsRemove),this.listenTo(this.collection,"remove:end",this._onRemoveEnd),this.listenTo(this.collection,"reset",this.onReset),this.listenTo(this.collection,"sort",this.syncItemViewsSort),this._initializeItemViewsComparator(),e.itemViewClass&&(this.itemViewClass=e.itemViewClass),this.itemViewOpts={},e.itemTpl&&(this.itemViewOpts.template=cs.factory(e.itemTpl)),e.itemTplData&&(this.itemViewOpts.templateData=e.itemTplData),this.emptyView=new Aa({template:cs.factory(e.emptyTpl||""),templateData:e.emptyTplData}),"canDrop"in e){let t=e.canDrop;"function"!=typeof t&&(t=()=>e.canDrop),u.bind(this,{targetSelector:".sj-grid-content, .sj-grid-item",canDrop:(e,i)=>{const r=this.findModelForElement(e);return t(e,i,r)},eventData:this.findModelForElement.bind(this)})}return this},_createContentEl(){const e=document.createElement(this.contentTagName);e.className="sj-grid-content",this.$contentEl=a()(e)},_initializeItemViewsComparator(){const e=this.collection.comparator;this.itemViews.comparator="function"==typeof e?(t,i)=>e(t.get("view").model,i.get("view").model):null},_sortItemViews(){this._initializeItemViewsComparator(),this.itemViews.comparator&&this.itemViews.sort()},syncItemViewsSort(){this._sortItemViews(),this._appendAll()},syncItemViewsRemove(e){const t=this.itemViews.get(e.cid);t&&(t.get("view").remove(),this.itemViews.remove(t)),this._appendEmpty()},_onAddEnd(e){(e||[]).forEach((e=>{this._renderOne(this.collection.get(e.id))})),this._appendAll()},_onRemoveEnd(e){const t=[];(e||[]).forEach((e=>{const i=this.itemViews.get(e.cid);i&&(t.push(i),i.get("view").remove())})),this.itemViews.remove(t,{silent:!0}),this.itemViews.trigger("remove:end",t),this._appendEmpty()},onReset(){this.emptyView.remove(),this.itemViews.each((e=>{e.get("view").remove()})),this.itemViews.reset(),this.render()},contextmenu(e){const t=e.target.className||"",i=/sj-grid-content/.test(t)?"body":"item",r=this.findModelForElement(e.target);me.track({op:"contextmenu",target:"grid-"+i}),r?this.trigger("contextmenu",e,r):this.trigger("contextmenu",e),this.prevent(e)},scrollIntoView(e,t){const i=this.collection.get(e);let r;if(i&&(r=this.getItemViewByModel(i)),!r)return;const n=r.el;if(this.highlight(n),!Ba.isElementIntersected(n))return;const o=t?0:500,s=Xs.findScrollParent(this.el),a=this.itemViews.first().get("view").el.getBoundingClientRect().top,l=n.getBoundingClientRect().top-a;if(Xs.scrollTo(s,l,o),"BODY"===s.nodeName){const e=s.ownerDocument.documentElement;Xs.scrollTo(e,l,o)}},highlight(e){e.classList.add("sj-grid-highlight")},onAnimationEnd(e){e.target.classList.remove("sj-grid-highlight")},prevent(e){e.preventDefault(),e.stopPropagation()},delegateEvent(e){(new Date).getTime();const t=this.findModelForElement(e.currentTarget),i=this.itemViews.models.map((e=>e.get("view").model));return this.trigger(e.type,t,i,e),!1},touchstart(e){(new Date).getTime(),this.touchTimeout,this.touchTime=new Date,this._hasPointerType(e)||(this.touchTimeout=setTimeout((()=>{this.touchTimeout?((new Date).getTime(),this.touchTimeout,e.target.dispatchEvent(new Event("longpress",Ra({bubbles:!0},e))),this.touchTime=null):((new Date).getTime(),this.touchTimeout)}),201),(new Date).getTime(),this.touchTimeout)},touchmove(){(new Date).getTime(),this.touchTimeout,this.touchTimeout&&(clearTimeout(this.touchTimeout),this.touchTimeout=null),this.touchTime=null},touchend(e){e.cancelable&&e.preventDefault(),(new Date).getTime(),this.touchTimeout,this.touchTimeout&&((new Date).getTime(),this.touchTimeout,clearTimeout(this.touchTimeout),this.touchTimeout=null);const t=this.touchTime?(new Date).getTime()-this.touchTime:0;t&&t<201?this._hasPointerType(e)&&!this._isTouchPointer(e)||e.target.dispatchEvent(new MouseEvent("click",Ra({bubbles:!0},e))):t>=201&&e.target.dispatchEvent(new Event("longpress",Ra({bubbles:!0},e))),this.touchTime=null},_isTouchPointer(e){const t=e.originalEvent;return this._hasPointerType(e)&&["touch","pen"].includes(t.pointerType)},_hasPointerType(e){return(e.originalEvent||{}).pointerType},_appendEmpty(){this.itemViews.length||(this.$contentEl.has(this.emptyView.$el).length||this.$contentEl.empty(),this.$contentEl.append(this.emptyView.render().$el))},_appendAll(){if(this._appendEmpty(),this.itemViews.length){this.$contentEl.has(this.emptyView.$el).length&&this.emptyView.remove();const e=this.itemViews.map((function(e){return e.get("view").el})),t=this.$contentEl.get(0);Fa.patch(t,e)}},render(){return this.$el.append(this.$contentEl),this.itemViews.comparator=null,this.collection.each((function(e){this._renderOne(e)}),this),this._sortItemViews(),this._appendAll(),this.delegateEvents(),this},_renderOne(e){if(this.itemViews.length||this.$contentEl.empty(),this.itemViews.get(e.cid))return;const t=Ua(Ra({},this.itemViewOpts),{collection:this.collection,model:e,dragdropEnabled:this.dragdropEnabled}),i=new this.itemViewClass(t).render();i.$el.addClass(this.itemClassName),this.itemViews.add({id:e.cid,view:i})},getItemViewByModel(e){const t=this.itemViews.get(e.cid);return t?t.get("view"):null},findModelForElement(e){let t=e;if(e instanceof a()&&(t=e.get(0)),!t)return null;const i=this.itemViews.pluck("view").find((e=>{const i=e.el;return i.parentNode&&(i===t||i.contains(t))}));return i?i.model:null},remove(){this.emptyView.remove(),u.unbind(this),this.itemViews.pluck("view").forEach((e=>e.remove())),this.itemViews.reset([],{silent:!0}),o().View.prototype.remove.apply(this)},_onDragStart(e){e.target.getAttribute("draggable")&&this.trigger("drag:start",e,this.findModelForElement(e.target))},_onDragEnd(e){this.trigger("drag:end",e)}}),Ha=ae.extend({className:"sj-grid-item",events:{"click .sortable":"onSortClick"},templateData(){return{sortable:this.sortable}},initialize(e){this.sortable=!!(this.collection&&this.collection.sortable&&this.collection.sortable.sortBy),this.sortable&&this.listenTo(this.collection,"sortBy",this.onSort),e&&e.template&&(this.template=cs.factory(e.template))},onSortClick(e){if(this.sortable){var t=e.currentTarget,i=t.getAttribute("data-field"),r=t.classList.contains("asc")?"desc":"asc";this.collection.sortable.sortBy(i,r)}},onSort(e,t){var i=this.el.querySelectorAll(".sortable");[].forEach.call(i,(function(i){["sorted","asc","desc"].forEach((function(e){i.classList.remove(e)})),i.getAttribute("data-field")===e&&["sorted",t].forEach((function(e){i.classList.add(e)}))}))},onAfterRender(){this.sortable&&this.onSort(this.collection.sortable.getKey(),this.collection.sortable.getDir()),this.delegateEvents()}}),Ga=qa.extend({tagName:"list-layout",contentTagName:"list-content",initialize(e){this.$headerEl=a()("<list-header />"),this.headerView=new Ha({tagName:"list-item",collection:this.collection,template:e.headerTpl||null}),qa.prototype.initialize.apply(this,arguments)},_appendEmpty(){qa.prototype._appendEmpty.call(this),this.collection.length||this.$headerEl.remove()},_appendAll(){qa.prototype._appendAll.call(this),this.collection.length&&(this.$el.prepend(this.$headerEl),this.$headerEl.append(this.headerView.render().$el))},remove(){this.headerView.remove(),qa.prototype.remove.call(this)}}),Wa=Ga;i(4678);var Ka={getInnerHeight:function(e){if(e===window)return e.innerHeight;const t=e.clientHeight,i=window.getComputedStyle(e);return"none"===i.display?0:t-(parseFloat(i.paddingTop)||0)-(parseFloat(i.paddingBottom)||0)},getInnerWidth:function(e){if(e===window)return e.innerWidth;const t=e.clientWidth,i=window.getComputedStyle(e);return"none"===i.display?0:t-(parseFloat(i.paddingLeft)||0)-(parseFloat(i.paddingRight)||0)}};var Ya={bind(e,t){const i=d().extend({thumbWidth:140,thumbHeight:140},t),r=(new Date).getTime(),n=i.thumbWidth,o=i.thumbHeight,s=[];let l,c;if(!e)throw new Error("view required to bind to");if(!e.collection)throw new Error("collection required in view");if(!e.itemViews)throw new Error("itemViews collection required in view");if(e._thumbnailLoaderMixin)throw new Error("thumbnailLoader already bound - don't re-bind()");function h(){if(!document.body.contains(e.el))return;if(!e._thumbnailLoaderMixin)return;e._thumbnailLoaderMixin.$container||(p(l),e._thumbnailLoaderMixin.$container=c);const t=e._thumbnailLoaderMixin.$container,i=Ka.getInnerHeight(t[0]),r=t.scrollTop(),n=i+r,o=e.el.getBoundingClientRect().top;e.itemViews.find((function(e){if(e.get("load"))return!1;const t=e.get("view").el.getBoundingClientRect(),i=t.top-o;return!(i+t.height<r)&&(i>=n||(e.set({load:!0}),!1))}))}const u=d().throttle(h,750,{leading:!1,trailing:!0});function p(e){c=a()(e).on("scroll."+r+" resize."+r,u)}const g=e.collection;function m(t,i,r){e.listenTo(t,i,r),s.push([t,r])}m(g,"load sort remove:end add:end",u),m(g,"change",(function(t){const i=e.itemViews.get(t.cid);i&&i.set("load",!1,{silent:!0})})),m(e.itemViews,"change:load",(function(e){const t=e.get("view").model,i=t.get("image");let r,s,l;t.getPid()&&Kt.supportThumbnail(t.get("ext"))&&(r={width:e.width||n,height:e.height||o},i&&(s=i.exif&&i.exif.Orientation?i.exif.Orientation:void 0,r=no.calcThumbSize(i.width,i.height,r.width,r.height,s)),l=eo.getThumbnail(t,r),no.preload(l).then((function(t){!function(e,t){const i=t.src,r=e.get("view").$el,s=a()(".itemcontent .file-item-icon",r),l=a()("<div />").addClass("thumbnail").css("background-image","url("+i+")");r.addClass("isthumbnail"),function(e,t){const i=t.width,r=t.height,s=i>r,a=i===r,l=i>=n,d=i>=n-20,c=r>=o,h=r>=o-20;i<n&&r<o?e.css("background-size","auto"):a&&c?e.addClass("max_width_height"):s&&c?e.addClass("max_height"):!s&&l?e.addClass("max_width"):s||l||!h?s&&!c&&d&&e.addClass("max_small_width"):e.addClass("max_small_height")}(l,t),s.empty().append(l).addClass("file-item-image-preview")}(e,t)}),(()=>{})))})),m(e,"viewmode",(function(){u.cancel(),h()})),t&&t.container?a()(t.container).length?p(t.container):l=t.container:p(window),d().extend(e,{_thumbnailLoaderMixin:{namespace:r,$container:c,listeners:s}})},unbind(e){const t=e._thumbnailLoaderMixin;if(!t)return;for(;t.listeners.length;){const[i,r]=t.listeners.pop();e.stopListening(i,null,r)}const i=t.namespace,r=t.$container;a()(r||window).off("."+i),delete e._thumbnailLoaderMixin}},Xa=Wa.extend({initialize(e){Wa.prototype.initialize.apply(this,arguments),Ya.bind(this,d().extend({thumbWidth:48,thumbHeight:48},e))},remove(){Ya.unbind(this),Wa.prototype.remove.apply(this,arguments)}}),Za=Xa,Ja=qa.extend({tagName:"tile-layout",contentTagName:"tile-content"}),Qa=Ja.extend({initialize(e){Ja.prototype.initialize.apply(this,arguments),Ya.bind(this,d().extend({thumbWidth:140,thumbHeight:140},e))},remove(){Ya.unbind(this),Ja.prototype.remove.apply(this,arguments)}}),el=Qa,tl=i(8731),il=i.n(tl);function rl(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var nl=de.View.extend({className:"sj-list-checker",template:cs.factory(il()),subviews(){var e=rl(this._initialValue||[]);return this._fields.reduce(function(t,i,r){if(t[i.key])throw new Error("ListChecker: duplicate field key '"+i.key+"'");return t[i.key]={klass:Cs,target:".sj-list-checker-items",appendToTarget:!0,order:r,options:{checked:!!e[i.key],disabled:i.disabled,name:i.key,text:i.displayName,attributes:{"data-key":"key-"+i.key}}},t}.bind(this),{})},initialize(e){if(!d().isObject(e))throw new Error("ListChecker: opts object is required.");if(!Array.isArray(e.fields))throw new Error("ListChecker: opts.fields must be array.");this._fields=e.fields,this._initialValue=e.initialValue},setValue(e,t){var i;if(!Array.isArray(e))throw new Error("ListChecker.setValue: keys-array required.");i=rl(e),Object.keys(this._subviews).forEach((function(e){this.getSubview(e).setChecked(!!i[e],t)}),this)},getValue(){return Object.keys(this._subviews).filter(function(e){return this.getSubview(e).getValue()}.bind(this))},validate(){return a().Deferred().resolve().promise()},isDirty(){return d().some(this._subviews,(function(e){return e.view.isDirty()}))}});var ol=ns.extend({events:d().extend({},ns.prototype.events,{mousemove:"_onMouseMove",mouseleave:"_onMouseLeave"}),initialize(e){this.text=e.text,this._onlyMobileSmall=e.onlyMobileSmall,this.listenTo(this,"state",this.onChangeActionState),this._selected=!1},render(){return this.$el.empty().html(d().result(this,"text")).addClass("sj-menuitem"),this._onlyMobileSmall&&this.el.classList.add("show-on-mobile-small"),this.renderActionState(this.getActionState()),this},renderActionState(e){this.$el.toggleClass("sj-menuitem-disabled",!e)},isDisabled(){return!this.getActionState()},canSelect(){return!!this.getActionState()},isSelected(){return this._selected},setSelected(e){(e=!!e)===this.isSelected()||e&&!this.canSelect()||(this._selected=e,this.$el.toggleClass("sj-menuitem-selected",this._selected),this.trigger("selected",this._selected))},_onMouseMove(){this.setSelected(!0)},_onMouseLeave(){this.setSelected(!1)},onChangeActionState(e){!e&&this.isSelected()&&this.setSelected(!1),this.renderActionState(e)}}),sl=ae.extend({tagName:"menu-separator",canSelect(){return!1},isDisabled(){return!0},setHidden(e){e?this.el.classList.add("hidden"):this.el.classList.remove("hidden")}});function al(e){var t;if(!d().isString(e))throw new Error("Only strings are allowed as position values.");if(2!==(t=d().uniq(e.trim().split(/ +/))).length)throw new Error("A position should consist of exactly two values");if(d().difference(t,["top","right","bottom","left"]).length)throw new Error("A position only supports top, right, bottom and left.");return t}function ll(e,t,i){return e<=t?e/2-t/2:i+t>e?Math.max(0,e/2-t/2,i-t):i}function dl(e,t,i,r,n){var o=g.getViewportWidth(),s=g.getViewportHeight(),a=function(e){return e?e.getBoundingClientRect():{top:0,left:0,bottom:g.getViewportHeight(),right:g.getViewportWidth()}}(n),l=t.indexOf("left")>-1?e.left:e.right,d=t.indexOf("top")>-1?e.top:e.bottom,c={};return l+=r.h,d+=r.v,i.indexOf("left")>-1?(c.left=l-a.left,c.width=o-l):(c.right=a.right-l,c.width=l),i.indexOf("top")>-1?(c.top=d-a.top,c.height=s-d):(c.bottom=s-(d-a.top),c.height=d),c}var cl={position(e,t){return e.length?function(e,t,i){return{left:ll(t.width,e.width,i.left),top:ll(t.height,e.height,i.top)}}(e[0].getBoundingClientRect(),{width:g.getViewportWidth(),height:g.getViewportHeight()},t):t},align(e,t,i,r,n){if(!e)throw new Error("Anchor element required for alignment");if(t=al(t),i=al(i),r||(r={}),r=d().defaults(r,{v:0,h:0}),!d().isNumber(r.h)||!d().isFinite(r.h))throw new Error("Horizontal offset offset.h should be a finite number");if(!d().isNumber(r.v)||!d().isFinite(r.v))throw new Error("Vertical offset offset.v should be a finite number");return dl(e.getBoundingClientRect(),t,i,r,n)}};function hl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ul(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){hl(e,t,i[t])}))}return e}function pl(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var gl=o().View.extend({defaults:{itemClass:ol},initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var{items:t}=e,i=pl(e,["items"]);this._config=ul({},this.defaults,i),this._isDisabled=!0,this._createItems(t||[]),this._preventEvent=this._preventEvent.bind(this),this._eventSuffix=".menu"+this.cid,this._registeredGlobalEvents=!1},render(){return this.$el.contents().detach(),this.$el.addClass("sj-menu"),this.items.forEach((e=>this.$el.append(e.render().$el))),this},remove(){return this._removeItems(),this._unregisterGlobalEvents(),o().View.prototype.remove.apply(this,arguments)},isDisabled(){return this._isDisabled},open(e){let t=ul({left:0,top:0},e);this.el.classList.remove("sj-menu-hidden"),this.render().$el.appendTo(t.parent||"body"),t=t.anchor?cl.align(t.anchor,t.alignment||"left bottom",t.origin||"left top",t.offset,t.parent):cl.position(this.$el,t);let i={top:t.top,left:t.left,bottom:t.bottom,right:t.right,"max-height":t.height||"","max-width":t.width||""};this.$el.css(i),this.trigger("open"),this._registerGlobalEvents()},close(){this.el.classList.add("sj-menu-hidden"),this.items.forEach((e=>{e.canSelect()&&e.setSelected(!1)})),this.trigger("close"),this._unregisterGlobalEvents()},setItems(e){this._createItems(e),this.render()},_removeItems(){this.items&&this.items.forEach((e=>{e.remove(),this.stopListening(e)}))},_createItems(e){var t;this._removeItems(),t=e.map((e=>{var{itemClass:t}=e,i=pl(e,["itemClass"]);const r=new(t||this._config.itemClass)(i);return this.listenTo(r,"executed",this._onItemExecuted),this.listenTo(r,"selected",(e=>this._onItemSelected(r,e))),this.listenTo(r,"state",this._onItemState),r})),this.items=t,this._onItemState(),this._selectedItem=null},_registerGlobalEvents(){this._registeredGlobalEvents||(document.addEventListener("wheel",this._preventEvent,{passive:!1,capture:!0}),document.addEventListener("contextmenu",this._preventEvent),a()(document).on("mousedown"+this._eventSuffix,this._handleMousedown.bind(this)).on("keydown"+this._eventSuffix,this._handleKeydown.bind(this)).on("keyup"+this._eventSuffix,this._handleKeyup.bind(this)),a()(window).on("resize"+this._eventSuffix,this._handleResize.bind(this)),this._registeredGlobalEvents=!0)},_unregisterGlobalEvents(){this._registeredGlobalEvents&&(document.removeEventListener("wheel",this._preventEvent,{passive:!1,capture:!0}),document.removeEventListener("contextmenu",this._preventEvent),a()(document).off(this._eventSuffix),a()(window).off(this._eventSuffix),this._registeredGlobalEvents=!1)},_preventEvent(e){const t=this.el;t.contains(e.target)&&t.scrollHeight!==t.clientHeight||e.preventDefault()},_handleMousedown(e){a()(e.target).closest(this.$el).length||this.close()},_handleKeyup(e){"Enter"===e.key&&this._selectedItem&&(e.preventDefault(),this._selectedItem.execute())},_handleKeydown(e){["ArrowUp","ArrowDown","PageUp","PageDown","End","Home"].includes(e.key)&&e.preventDefault(),"Escape"===e.key?this.close():"ArrowUp"===e.key?this._selectPreviousItem():"ArrowDown"===e.key?this._selectNextItem():"Tab"===e.key?(e.shiftKey?this._selectPreviousItem():this._selectNextItem(),e.preventDefault()):"PageUp"===e.key||"Home"===e.key?this._selectFirstItem():"PageDown"!==e.key&&"End"!==e.key||this._selectLastItem(),"Enter"===e.key&&e.preventDefault()},_handleResize(){this.close()},_getSelectableItems(){return this.items.filter((e=>e.canSelect()))},_selectNextItem(){const e=this._getSelectableItems(),t=e.indexOf(this._selectedItem),i=t<e.length-1?t+1:0;i>-1&&i<e.length&&e[i].setSelected(!0)},_selectPreviousItem(){const e=this._getSelectableItems(),t=e.indexOf(this._selectedItem),i=t>0?t-1:e.length-1;i>-1&&i<e.length&&e[i].setSelected(!0)},_selectFirstItem(){const e=this._getSelectableItems();e.length&&e[0].setSelected(!0)},_selectLastItem(){const e=this._getSelectableItems();e.length&&e[e.length-1].setSelected(!0)},_onItemExecuted(){this.close()},_onItemState(){let e,t=!0,i=!0;this.items.forEach((r=>{"function"==typeof r.isDisabled&&r.isDisabled()||(t=!1,i=!1),r instanceof sl&&(r.setHidden(i),i||(e=r,i=!0))})),i&&e&&e.setHidden(!0),this.$el.toggleClass("sj-menu-disabled",t),t!==this._isDisabled&&(this._isDisabled=t,this.trigger("state",!this._isDisabled))},_onItemSelected(e,t){t?(this._selectedItem&&this._selectedItem.setSelected(!1),this._selectedItem=e):this._selectedItem===e&&(this._selectedItem=null)}}),ml=o().View.extend({className:"menubar",defaults:{items:{}},initialize(e){this.options=d().defaults(e||{},this.defaults),this._createItems(this.options.items)},_toggleClass(e,t){var i=e.$el;i.toggleClass("disabled",t),i.prev().toggleClass("disabled",t)},toggle(e,t){d().each(this.items,(function(i,r){r.match(e)&&this._toggleClass(i,!t)}),this)},enable(e){this.toggle(e,!0)},disable(e){this.toggle(e,!1)},disableAll(){d().each(this.items,function(e){this._toggleClass(e,!0)}.bind(this))},setActive(e){this.$el.toggleClass("active",e)},setItems(e){this._createItems(e),this.render()},render(){var e=Object.keys(this.items);return this.$el.contents().detach(),d().each(e,(function(e,t){var i=this.items[e];t>0&&this.$el.append(a()('<div class="menubar-separator" />')),this.$el.append(i.render().$el),d().isFunction(i.isDisabled)&&this._toggleClass(i,i.isDisabled()),i.delegateEvents()}),this),this},remove(){return this._removeItems(),o().View.prototype.remove.apply(this,arguments)},_createItems(e){this._removeItems(),this.items=d().clone(e),d().each(this.items,(function(e){if(!(e instanceof o().View))throw new Error("nothing else than Backbone.View based menubar items allowed");this.listenTo(e,"state",function(t){this._toggleClass(e,!t)}.bind(this))}),this)},_removeItems(){d().each(this.items,(function(e){this.stopListening(e),e.remove()}),this)}}),fl=i(7288),bl=i.n(fl),yl=o().View.extend({tagName:"ul",itemTemplate:cs.factory(bl()),events:{"click .sj-navigation-item > a":"_onItemClick"},initialize(e){if(!d().isObject(e))throw new Error("no options were provided.");if(!d().isObject(e.items))throw new Error("no items were defined.");Object.keys(e.items).forEach((function(t){const i=e.items[t];if(!i.icon&&!i.iconClass)throw new Error("no icon or iconClass was defined for "+t);if(!i.label)throw new Error("no label was defined for "+t);if(!i.items)throw new Error("no items were defined for "+t);Object.keys(i.items).forEach((function(e){if(!i.items[e].label)throw new Error("no label was defined for "+e+" in "+t)}))})),this._items=e.items,this._currentSelection=null},setItems(e){this._items=e,this.render()},render(){return this.$el.addClass("sj-navigation"),this.$el.html(this._buildItems(this._items,null)),this._currentSelection&&this.select(this._currentSelection),this},_getSelectableSegments(e){const t=e.split(".");let i={items:this._items};return d().reduce(t,(function(e,r,n){return i&&i.items&&i.items[r]?(e.push(t.slice(0,n+1).join(".")),i=i.items[r],e):[]}),[])},select(e){const t=this._getSelectableSegments(e);this.$(".selected").removeClass("selected"),d().each(t,(function(e){this.$("[data-name='"+e+"']").addClass("selected")}),this),t.length?this._currentSelection=e:this._currentSelection=null},_buildItems(e,t){return d().map(e,(function(e,i){return t&&(i=t+"."+i),this.itemTemplate({item:d().extend({name:i},e),items:this._buildItems(e.items||{},i)})}),this)},_onItemClick(e){const t=a()(e.target).closest(".sj-navigation-item").attr("data-name");t&&this.trigger("click",t),e.preventDefault()}}),wl=Ia.extend({initialize(e){Ia.prototype.initialize.apply(this,arguments),e&&(e.readonly&&(this.inputElement.readOnly=!0,this.el.classList.add("sj-text-editor-readonly")),e.autocomplete&&this.inputElement.setAttribute("autocomplete",e.autocomplete),e.ariaLabel&&this.inputElement.setAttribute("aria-label",e.ariaLabel))},render(){return Ia.prototype.render.apply(this,arguments),this.el.classList.add("sj-text-editor"),this}}),vl=wl.extend({initialDisabled:null,initialize(e){wl.prototype.initialize.apply(this,arguments),this.inputElement.setAttribute("type","password"),this.initialDisabled=!!e&&!!e.disabled},isDirty(){return wl.prototype.isDirty.call(this)||this.initialDisabled!==this.getDisabled()},render(){if(wl.prototype.render.call(this),this.config.disableAutoComplete){const e=document.createElement("INPUT");e.setAttribute("type","password"),e.style.display="none",this.el.prepend(e);const t=document.createElement("INPUT");t.setAttribute("type","text"),t.style.display="none",this.el.prepend(t)}return this},_validateOnBlur(){""!==this.getValue()?this.validate(this.getValue()):this.toggleError(!1)}}),_l=i(6452),xl=i.n(_l),El=o().View.extend({tagName:"ul",className:"sj-radio-group",template:cs.factory(xl()),itemTemplate:cs.factory('<span class="sj-radio-text"><%- text %></span>'),events:{"change input[type=radio]":"_onChange"},initialize(e){var t=e||{};this._groupId=this.cid,t.items&&this.setItems(t.items,t.initialValue)},setItems(e,t){if(!Array.isArray(e))throw new Error("items has to be an array in RadioGroup");if(!e.length)throw new Error("items array is empty in RadioGroup");this.items=e,d().isUndefined(t)||(this._initialValue=t,this._value=t),this.render()},render(){var e,t;return this.$el.empty(),this.items&&(e=d().map(this.items,(function(e,i){return this._value===e.value&&(t=e.value),this.template({itemHtml:e.html||this.itemTemplate({text:e.text}),className:e.className||"",value:i,name:this._groupId})}),this),this.$el.append(e),d().isUndefined(t)||this.setValue(t)),this},setValue(e){var t;if(d().isUndefined(e))throw new Error("RadioGroup setValue() required a value.");if((t=d().findIndex(this.items,{value:e}))<0)throw new Error("RadioGroup setValue("+e+") is not allowed");return this.$el.find("input[value="+t+"]").prop("checked",!0),this._value=e,this.getValue()},getValue(){return this._value},isDirty(){return this._value!==this._initialValue},_onChange(e){this._value=this.items[e.target.value].value,this.trigger("change",this._value)}}),Ol=o().View.extend({className:"sj-simple-dropdown",events:{"change select":"_onChange","focus select":"_onFocus","blur select":"_onBlur"},_initiallyRendered:!1,initialize(e){const t=e||{};if("object"!=typeof t)throw new Error("opts has to be an object in SimpleDropdown");this.selectEl=document.createElement("select"),t.items&&this.setItems(t.items,t.initialValue)},_onFocus(){this.el.classList.add("sj-simple-dropdown-focused")},_onBlur(){this.el.classList.remove("sj-simple-dropdown-focused")},setItems(e,t){if(!Array.isArray(e))throw new Error("items has to be an array in SimpleDropdown");if(!e.length)throw new Error("items array is empty in SimpleDropdown");this.items=e,void 0!==t&&(this.initialValue=t);const i=this.items.find((e=>e.value===this.initialValue));void 0!==this.initialValue&&i||(this.initialValue=this.items[0].value),this.reRender()},getValue(){return this.selectEl.value},setValue(e,t){const i=String(e);return[...this.selectEl.options].find((e=>e.value===i))&&this.getValue()!==i&&(this.selectEl.value=i,this._onChange()),t&&(this.initialValue=this.getValue()),this.getValue()},_setValuesState(e,t){if(!this.items)return[];const i=[];for(const r of Array.from(this.selectEl.options))e.includes(r.value)&&(t?r.setAttribute("disabled",""):r.removeAttribute("disabled"),i.push(r.value));return i},disableValues(e){return this._setValuesState(e,!0)},enableValues(e){return this._setValuesState(e,!1)},isDirty(){return this.getValue()!==this.initialValue},render(){const e=this.getValue()||this.initialValue;let t,i="";this.selectEl.innerHTML="",this.items&&(this.items.forEach((e=>{const r=d().escape(e.value),n=d().escape(d().result(e,"text"));let o=d().result(e,"group");o&&(o=d().escape(o)),t&&t!==o&&(i+="</optgroup>"),o&&o!==t&&(i+='<optgroup label="'+o+'">',t=o),i+='<option value="'+r+'">'+n+"</option>"})),t&&(i+="</optgroup>"),this.selectEl.innerHTML=i),this.el.appendChild(this.selectEl);const r=document.createElement("i");return r.classList.add("arrow-icon"),this.el.appendChild(r),this.setValue(e),this._initiallyRendered=!0,this},reRender(){this._initiallyRendered&&this.render()},setDisabled(e){const t="sj-simple-dropdown-disabled";e?(this.selectEl.setAttribute("disabled",""),this.el.classList.add(t)):(this.selectEl.removeAttribute("disabled"),this.el.classList.remove(t))},getDisabled(){return null!==this.selectEl.getAttribute("disabled")},_onChange(){this.trigger("change",this.getValue())}}),jl={intersection(e,t){return[e=e||[],t=t||[]].reduce(((e,t)=>e.filter((e=>t.includes(e)))))}};function kl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Sl(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){kl(e,t,i[t])}))}return e}var Tl=wl.extend({_tags:void 0,_separator:/[\s,;]+/,defaults:function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}(Sl({},wl.prototype.defaults),{submitOnEnter:!0,showValidationErrorIcon:!1}),events:function(e,t){let i=t.prototype.events,r=Sl({},i,e);return jl.intersection(Object.keys(i),Object.keys(e)).forEach((function(n){r[n]=function(r){let o,s,a,l;return r.isDelegationStopped=()=>!1,r.stopDelegation=function(){this.isDelegationStopped=()=>!0},o=n,o="function"==typeof o?o:e[n],o="function"==typeof o?o:this[e[n]],s=o.apply(this,arguments),r.isDelegationStopped()||(a=i[n],l=a,l="function"==typeof l?l:t.prototype[a],s=l.apply(this,arguments)),s}})),r}({"keypress input":"_onKeypress","keyup .tag button":"onKeyupTag","keydown .tag button":"onKeyDownTag","keydown input":"_onKeydown","click .icon-removetag":"onRemoveTag","click .tag":"onClickTag",click:"onClick","focus .tag button":"onFocusButtonTag","blur .tag button":"onBlurButtonTag","keyup input":"_onKeyup","blur input":"_onBlur"},wl),initialize(){wl.prototype.initialize.apply(this,arguments),this._tags=[],this._tagCreationEnabled=!0},render(){return wl.prototype.render.apply(this,arguments),this.el.classList.add("taglist"),this._tags.forEach((e=>{a()(this._tagTpl({value:e})).insertBefore(this.inputElement)})),this},_tagTpl:cs.factory('<span class="tag" title="<%- value %>"><button type="button"><%- value %></button><span class="icon-removetag" /></span>'),setValue(e){let t;const i=this._getEditorValue();Array.isArray(e)||(e=[e]);do{t=this.$(".tag").first(),this.removeTag(t)}while(t.length);return e=i.split(this._separator).concat(e),this._buildTags(e),this},_setEditorValue(){wl.prototype.setValue.apply(this,arguments)},_getEditorValue(){return wl.prototype.getValue.call(this)},createTags(){return this._buildTags(this._getEditorValue().split(this._separator))},_buildTags(e){const t=d().uniq(e.filter(Boolean));if(this._setEditorValue(""),!t.length)return a().Deferred().resolve().promise();const i=t.map((e=>{const t=a().Deferred();return this.validateTag(e).done(function(){this.createTag(e),t.resolve()}.bind(this)).fail(function(){t.reject(e)}.bind(this)),t})),r=a().Deferred(),n={all:i.length,failed:0,done:0,notCreatedTags:[]};return i.forEach((e=>{e.done((function(){n.done++})).fail((function(e){n.notCreatedTags.push(e),n.failed++}))})),n.failed?(this._setEditorValue(n.notCreatedTags.join(" ")),this.trigger("validate:error"),this.toggleError(!0),r.reject(n)):(this.trigger("validate:success"),this.toggleError(!1),r.resolve(n)),r},createTag(e){let t;return e&&this._tags.indexOf(e)<0&&(this._tags.push(e),a()(this._tagTpl({value:e})).insertBefore(this.inputElement),this.unsetPlaceholder(),t=!0),t},validateTag(e){let t,i=a().Deferred();return i.done(function(){this.trigger("tag:success",e)}.bind(this)).fail(function(){this.trigger("tag:error",e)}.bind(this)),"function"==typeof this.config.tagValidationFunc?(t=this.config.tagValidationFunc(e,this),t.then&&"function"==typeof t.then?i=t:t?i.resolve():i.reject()):i.resolve(),i},onKeyDownTag(e){"Backspace"===e.key&&e.preventDefault()},onKeyupTag(e){const t=this.$(e.target).closest(".tag");let i;switch(e.key){case"ArrowLeft":t.prev().find("button").focus();break;case"ArrowRight":i=t.next().find("button"),i=i.length?i:this.inputElement,i.focus();break;case"Backspace":this.removeTag(t.prev(),!0);break;case"Delete":this.removeTag(t,!1);break;case"Escape":this.$(e.target).blur()}},onRemoveTag(e){this.removeTag(this.$(e.target).closest(".tag"))},removeTag(e,t){if(e.length){const t=e.text();let i=e.next().find("button");i=i.length?i:this.inputElement,this._tags.splice(this._tags.indexOf(t),1),e.remove(),this.validate(),i.focus(),0===this._tags.length&&this.setPlaceholder()}else t||this.inputElement.focus()},_onKeydown(e){if(!this._tags.length||e.shiftKey||"ArrowLeft"!==e.key&&"Backspace"!==e.key)delete this._caretOut;else{let t;if("selectionStart"in e.target)t=e.target.selectionStart;else if(document.selection){e.target.focus();const i=document.selection.createRange(),r=document.selection.createRange().text.length;i.moveStart("character",-e.target.value.length),t=i.text.length-r}0===t&&(this._caretOut=!0)}},_onKeyup(e){this._caretOut&&(delete this._caretOut,"Backspace"===e.key?this.removeTag(this.$(".tag:last"),!0):this.$(".tag:last button").focus()),this.trigger("keyup",e)},_onKeypress(e){const t=!this.config.submitOnEnter,i=1===e.key.length?e.key:null;if(i&&this._separator.test(i)||"Enter"===e.key){if(e.stopDelegation(),!this._tagCreationEnabled)return void("Enter"===e.key&&t&&e.preventDefault());this.createTags().always((function(i){(t||"Enter"!==e.key||i)&&e.preventDefault()}))}},setTagCreationEnabled(e){this._tagCreationEnabled=!!e},_onBlur(){this.createTags()},onFocusButtonTag(e){this.$(e.target).closest(".tag").addClass("tag-focused")},onBlurButtonTag(e){this.$(e.target).closest(".tag").removeClass("tag-focused")},onClickTag(e){e.stopPropagation()},onClick(){this.inputElement.focus()},getValue(){return[...this._tags]},setSelection(e){void 0===e&&(e=this.inputElement.value.length),wl.prototype.setSelection.call(this,e)},validate(){return this.createTags().then(function(){return wl.prototype.validate.apply(this,arguments)}.bind(this))}}),Pl=i(1770),Dl=i.n(Pl),Cl=Cs.extend({viewClass:"sj-toggle",template:cs.factory(Dl())}),Il=i(4022),zl=i.n(Il);function Ll(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $l=js.extend({className:"wait-overlay-body",defaults:{message:""},template:cs.factory(zl()),templateData(){let e=this.options.message;return e="function"==typeof e?e():e,{message:e}},canClose:!1,initialize(e){this.options=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Ll(e,t,i[t])}))}return e}({},this.defaults,e)},onAfterRender(){this.overlayEl.classList.add("sj-wait-overlay","sj-selectable")}}),Ml={Button:hs,IconButton:$a,SimpleDropdown:Ol,List:Wa,LazyList:Za,Tile:Ja,LazyTile:el,Breadcrumb:ka,Tooltip:Pa,InfoTooltip:Ma,Flyout:za,Navigation:yl,OverlayManager:ge,BaseOverlayView:js,WaitOverlay:$l,Editor:Ia,TextEditor:wl,PasswordEditor:vl,TaglistEditor:Tl,Toggle:Cl,Menubar:ml,Menu:gl,BarChart:Ea,Checkbox:Cs,ListChecker:nl,highlight:La,RadioGroup:El},Al=i(8675),Vl=i.n(Al);const Fl=ae.extend({tagName:"span",events:{"click .folder-icon":"_onClick","click .arrow":"_onClick","click .level-up":"_onLevelUp"},template:cs.factory(Vl()),templateData(){return{segments:this.segments,folderIcon:Kt.icons[Kt.groups.dir]}},segments:[],_onClick(){this.segments.length>=2&&this.trigger("toggle")},_onLevelUp(e){e.preventDefault(),this.segments.length>=2&&this.trigger("levelup",e.currentTarget.getAttribute("href"),"folder-flyout-level-up")},setSegments(e){this.segments=e}}),Bl=ae.extend({className:"content",tagName:"ul",events:{"click li":"onClick"},segments:[],templateData(){return{segments:this.segments}},template:cs.factory(_a()),onClick(e){this.trigger("click",e.currentTarget.dataset.href,"folder-flyout-content")},setSegments(e){this.segments=e}});var Nl=Ml.Flyout.extend({className:"fm-folder-flyout",initialize(e){if(!this.model)throw new Error("model required in FolderFlyout!");if(!e.segmentBuilder)throw new Error("segmentBuilder option required in FolderFlyout!");this.segmentBuilder=e.segmentBuilder,this.triggerView=new Fl({model:this.model}),this.contentView=new Bl({model:this.model}),this.listenTo(this.triggerView,"toggle",this.toggle),this.listenTo(this.triggerView,"levelup",this._onClick),this.listenTo(this.contentView,"click",this._onClick),this.listenTo(this.model,"load:start",this.render),Ml.Flyout.prototype.initialize.apply(this,arguments)},render(){const e=this.segmentBuilder(this.model.get("path"));return this.contentView.setSegments(e),this.triggerView.setSegments(e),Ml.Flyout.prototype.render.call(this)},_onClick(e,t){this.trigger("navigate",e,t),this.close()}}),Rl=(i(7635),{bindCollection(e,t){const i=d().extend({},t).filter,r="function"==typeof i;if(e._selectionMixin)throw new Error("selection already bound - don't re-bind()");const n=t=>{const i=e.indexOf(e._selectionMixin.prev);return e.indexOf(t)>i?e.models.findLast((e=>e.selected)):e.models.find((e=>e.selected))};e._selectionMixin={invertSelection(t,i,r){const o=i===je.FLUID;if(void 0===e._selectionMixin.prev)this.setSelected(t,!0),e.each((function(i){i!==t&&e._selectionMixin.setSelected(i,!1)}),this);else{const i=o?r.indexOf(n(t)):e.indexOf(n(t)),s=o?r.indexOf(t):e.indexOf(t),a=Math.min(i,s),l=Math.max(i,s);o?r.forEach((function(t,i){t.selected||e._selectionMixin.setSelected(t,i>=a&&i<=l)})):e.each((function(t,i){t.selected||e._selectionMixin.setSelected(t,i>=a&&i<=l)}))}},select:function(t,i,r,o,s){e._selectionMixin.prev=n(t),i?this.invertSelection(t,o,s):e._selectionMixin.setSelected(t,!t.selected,r)},deselect:function(t,i,r,o,s){e._selectionMixin.prev=n(t)||void 0,i?this.invertSelection(t,o,s):e._selectionMixin.setSelected(t,!t.selected,r)},setSelected:function(e,t,n){r&&!i(e)||(e.selected=t,e.preselected=M.selectionStates.none,n||e.trigger("change:selected",e))},setPreselected:function(t,n){let o=!1;const s=d().difference(e.models,t);d().intersection(e.models,t).forEach((e=>{if(!r||i(e)){const t=!!e.preselected;e.preselected=n&&e.selected?M.selectionStates.deselect:M.selectionStates.select,e.preselected!==t&&(o=!0)}})),s.forEach((e=>{e.preselected=!1})),(o||s.length)&&e.trigger("change:preselected")},deselectAll:function(){e.each((function(t){e._selectionMixin.setSelected(t,!1,!0)})),e._selectionMixin.prev=void 0,e.trigger("deselectAll")},changeListener(){r&&e.each((function(t){t.selected&&!i(t)&&(delete t.selected,e.trigger("change:selected",t))}))},deselectAllListener(){e._selectionMixin.prev=void 0},removeListener(t){e._selectionMixin.setSelected(t,!1),delete t.selected},removeEndListener(e){e.forEach((function(e){delete e.selected}))}},e.on("deselectAll",e._selectionMixin.deselectAllListener),e.on("remove",e._selectionMixin.removeListener),e.on("remove:end",e._selectionMixin.removeEndListener),e.on("reset sync",e._selectionMixin.deselectAll),e.on("change",e._selectionMixin.changeListener),d().extend(e,{deselectAll:e._selectionMixin.deselectAll,selectAll(){e.each((function(t){e._selectionMixin.setSelected(t,!0,!0)})),e.trigger("selectAll")},getSelected(){return e.models.filter((function(e){return e.selected}))},firstSelected(){return d().find(e.models,(function(e){return e.selected}))},select(t){e._selectionMixin.setSelected(t,!0)},toggleSelected(t){let{model:i,invert:r,silent:n,viewMode:o,planItems:s}=t;i.selected?e._selectionMixin.deselect(i,r,n,o,s):e._selectionMixin.select(i,r,n,o,s)},setPreselected(t,i){e._selectionMixin.setPreselected(t,i)}})},unbindCollection(e){const t=e._selectionMixin;e.off("remove",t.removeListener),e.off("remove:end",t.removeEndListener),e.off("setPreselected",t.setPreselected),e.off("deselectAll",t.deselectAllListener),e.off("change",t.changeListener),e.off("reset sync",e.deselectAll),delete e.deselectAll,delete e.select,delete e.setPreselected}}),Ul={bindCollection(e,t){if(!d().isUndefined(e.sortable))throw new Error("cannot extend collection, sortable exist");let i=null;t&&t.key&&(i=t.key);let r="asc";t&&t.direction&&(r=t.direction);const n=function(t,i){if(!e.comparators||0===e.comparators.length)return;const r=e.comparators[t];r&&(e.comparator="desc"===i?function(e,t){return r.call(this,t,e)}:r,e.sortable.key=t,e.sortable.direction=i)};d().extend(e,{sortable:{key:i,direction:r,getKey(){return e.sortable.key},getDir(){return e.sortable.direction},sortBy(t,i){if(!e.comparators)throw new Error("no comparators defined in collection");const r=i||e.sortable.direction,o=t||e.sortable.key;n(o,r),e.sort(),e.trigger("sortBy",o,r)}}}),n(i,r),e.on("change",(function(){e.sort()}))}};function ql(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Hl=wi.extend({model:ar,defaults:{sortCol:"display_name",sortDir:"asc"},comparators:{display_name(e,t){return _i.compare(e,t)},category(e,t){return _i.compare(e,t,(function(e,t){return _i.compareFileCategories(e.get("category"),t.get("category"))}))},size(e,t){return _i.compare(e,t,(function(e,t){return(e.has("size")?parseInt(e.get("size"),10):0)-(t.has("size")?parseInt(t.get("size"),10):0)}))},mtime(e,t){return _i.compare(e,t,(function(e,t){return(e.has("mtime")?e.get("mtime")-new Date(1e3*e.get("mtime")).getSeconds():0)-(t.has("mtime")?t.get("mtime")-new Date(1e3*t.get("mtime")).getSeconds():0)}))}},initialize(e,t){wi.prototype.initialize.apply(this,arguments),this.options=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){ql(e,t,i[t])}))}return e}({},this.defaults,t),this.comparator=this.comparators.display_name,Rl.bindCollection(this,{filter(e){return e.get("readable")}}),Ul.bindCollection(this,{key:this.options.sortCol,direction:this.options.sortDir})},parse(e){let t=e;Array.isArray(t)||(t=new Array(t));for(let e=0;e<t.length;e++){const i=t[e];i.path&&(i.path=Ge.unifyPath(i.path))}return this.options.itemFilter&&(t=t.filter(this.options.itemFilter,this)),t},getSelectionSummary(){const e={byExt:{},decrypted:0,downloadable:0,encrypted:0,parentWritable:0,renamable:0,selectable:0,shareable:0,shared:0,teamfolder:0,total:0};return this.each((function(t){if(t.get("readable")&&e.selectable++,t.selected){e.total++,t.isDownloadable()&&e.downloadable++,t.get("renamable")&&e.renamable++,t.get("encrypted")===ri.encrypted&&e.encrypted++,t.get("encrypted")===ri.decrypted&&e.decrypted++,t.get("parent_writable")&&e.parentWritable++,t.get("share")&&e.shared++,t.get("shareable")&&e.shareable++,t.get("teamfolder")&&e.teamfolder++;const i=t.get("ext")||"";e.byExt[i]?e.byExt[i]++:e.byExt[i]=1}})),e}});const Gl=navigator.mimeTypes,Wl=navigator.plugins,Kl=navigator.userAgent,Yl=navigator.maxTouchPoints;var Xl=new class{getMimeTypes(){return Gl}getPlugins(){return Wl}getUserAgent(){return Kl}getMaxTouchPoints(){return Yl}getBootstrap(){return window.bootstrap}supportDirectoryUpload(){const e=document.createElement("input");return!(/(iPod|iPhone|iPad)/i.test(this.getUserAgent())||/(Macintosh)/i.test(this.getUserAgent())&&this.getMaxTouchPoints()>1)&&(!this.getUserAgent().match(/android/i)&&"webkitdirectory"in e)}supportPdf(){if(this.getBootstrap().navigator.isFirefoxDesktop)return a().Deferred().resolve().promise();let e=this.getMimeTypes()["application/pdf"];return e?a().Deferred().resolve().promise():(e=this.getPlugins()["Adobe Acrobat"],e?a().Deferred().resolve().promise():a().Deferred().reject().promise())}canPlayVideo(e){return this.videoPlayerHelper||(this.videoPlayerHelper=document.createElement("video")),!!this.videoPlayerHelper.canPlayType(e)}canDecrypt(){if(!("serviceWorker"in navigator))return!1;try{return"function"==typeof WebAssembly.instantiateStreaming}catch(e){return!1}}getScrollbarWidth(){if(void 0===this.scrollbarWidth){const e=document.createElement("div");e.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position: absolute; top: -1000px; left: -1000px"),document.body.appendChild(e);const t=document.createElement("div");t.setAttribute("style","width: 100%;"),e.appendChild(t),this.scrollbarWidth=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e)}return this.scrollbarWidth}getIsOnline(){return window.navigator.onLine}constructor(){this.videoPlayerHelper=void 0,this.scrollbarWidth=void 0}};const Zl=(0,Jt.fZ)(null);var Jl={get:()=>({subscribe:Zl.subscribe}),has:function(){return null!==(0,Jt.U2)(Zl)},set:function(e){Zl.set(e)}},Ql=f.extend({_runningLoad:null,_runningRefresh:null,initialize(e){if(!e)throw new Error("FolderSyncService.initialize: folder model required.");this._folder=e},_requestFolderData(e){var t=this._folder;const i=t.get("path"),r=Ge.isEncrypted(F.urlDecode(i)),n=(0,Jt.U2)(Jl.get());if(r&&Xl.canDecrypt()&&n){let r=n,o="X-hdcrypt-userkey";for(const[e,t]of Object.entries(ii()))i.includes(e)&&!e.startsWith("D_HDTLRN")&&(r=t.parentDirKey,o=Vr);return eo.getEncryptedDir(t.get("path"),t.getContext(),e,r,o)}return eo.getDir(t.get("path"),t.getContext(),e)},_abortLoad(){this._runningLoad&&(this._runningLoad.abort(),this._runningLoad=null)},_abortRefresh(){this._runningRefresh&&(this._runningRefresh.abort(),this._runningRefresh=null)},load(e){var t=this._folder;return this._abortRefresh(),this._abortLoad(),this._runningLoad=this._requestFolderData(e),this._runningLoad.done((function(e){var i;(null===(i=e.members)||void 0===i?void 0:i.some((e=>e._encrypted)))&&e.members.forEach((t=>{ei(t._encrypted.name,{nameDecrypted:t.name,parentDirKey:e.dirKey})})),t.set(t.parse(e)),t.files.reset(t.get("members"),{parse:!0})}))},refresh(e){var t=this._folder;return this._abortRefresh(),this._runningRefresh=this._requestFolderData(e),this._runningRefresh.done((function(e){t.set(t.parse(e)),t.files.set(t.get("members"),{parse:!0,add:!0,remove:!0,stripTempfileMtime:!0})}))}});function ed(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function td(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){ed(e,t,i[t])}))}return e}function id(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var rd=ar.extend({defaults:{id:"",loadState:M.loadState.loading,path:"",type:$e.directory},files:null,classItemFilter(){return!0},initialize(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ar.prototype.initialize.apply(this,arguments),this.options=i;const r=this.options.itemFilter;t=r?function(){return r.apply(this,arguments)&&this.classItemFilter.apply(this,arguments)}.bind(this):this.classItemFilter.bind(this),this._queryData=td({},this.queryData||{fields:[]},this.options.queryData),this._queryData.fields=this._queryData.fields.join(","),this.files=new Hl([],{context:this.getContext(),itemFilter:t,sortCol:this.options.sortCol||"display_name",sortDir:this.options.sortDir||"asc"}),this.listenTo(xe,"api:newFolder:created api:newFile:created api:copyFiles:done api:moveFiles:done",this._onCreatedNewItem),this.listenTo(xe,"api:createShareDir api:createShareLink",this._onCreateShare.bind(this)),this.listenTo(xe,"api:deleteShareDir api:deleteShareLink",this._onDeleteShare.bind(this)),this.listenTo(xe,"api:createMailupload",this._onChangeMailupload.bind(this,!0)),this.listenTo(xe,"api:deleteMailupload",this._onChangeMailupload.bind(this,!1)),this.listenTo(xe,"api:createShareupload",this._onCreateShareupload.bind(this)),this.listenTo(xe,"api:deleteShareupload",this._onDeleteShareupload.bind(this)),this.listenTo(this.files,"add",this.onAdd),this.listenTo(vr,"added",this._onDeleteListAdded),this.listenTo(vr,"recovered",this._onDeleteListRecovered),this._syncService=new Ql(this)},_onCreatedNewItem(e,t){const i=[].concat(t),r=this.getContext();this.get("path")===e&&i.every((e=>r===e.getContext()))&&this.files.add(i.map((e=>e.clone())))},onAdd(e){e&&e.set({parent_writable:this.get("writable")},{silent:!0})},_prepareFetchData(){const e=td({},this._queryData),t=this.get("path");return Ge.isEncrypted(F.urlDecode(t))&&!Jl.has()&&(e.members="none"),e},load(e){return this.reset({path:e}),this.set({loadState:M.loadState.loading}),this.trigger("load:start",e),this.files.trigger("load:start",e),this._syncService.load(this._prepareFetchData()).done((()=>{this.set({loadState:M.loadState.done}),this.files.trigger("load"),this.trigger("load")})).fail((()=>{this.set({loadState:M.loadState.error}),this.files.trigger("load:error"),this.trigger("load:error")}))},refresh(){return this._syncService.refresh(this._prepareFetchData())},parse(e){let t=e.members||[];const i=$e.directory,r=ar.prototype.parse.call(this,id(td({},e),{type:i}));r.writable&&t.forEach(((e,i)=>{t[i].parent_writable=!0}));const n=t.map((e=>e.id)),o=vr.filterByType(this.getItemType(),(e=>-1!==n.indexOf(e.get("id")))),s=o.map((e=>e.id));return t=t.filter((e=>-1===s.indexOf(e.id))),r.members=t,r},reset(e){const t=td({},this.defaults,e),i=Object.keys(t),r=Object.fromEntries(Object.entries(this.attributes).filter((e=>{let[t]=e;return!i.includes(t)})));this.set(t),this.set(r,{unset:!0}),this.files.reset([])},sort(){},_onDeleteListAdded(e,t){if(e===this.getItemType()){const e=t.filter((e=>!!this.files.get(e.get("id"))));if(!e.length)return;const i=[].concat(this.files.remove(e,{silent:!0})).filter((e=>!!e));i.length&&this.files.trigger("remove:end",i)}},_onDeleteListRecovered(e,t){if(e===this.getItemType()){const e=t.filter((e=>e.get("parent_id")===this.get("id")));if(!e.length)return;this.files.add(e,{silent:!0}),this.files.trigger("add:end",e)}},_onCreateShare(e,t){if(this.getPid()===e)return void this.set("share",t);const i=this.files.get(e);i&&i.set("share",t)},_onDeleteShare(e){if(this.get("share")===e)return void this.set("share",null);const t=this.files.models.find((t=>t.get("share")===e));t&&t.set("share",null)},_onChangeMailupload(e,t){const i=this.get("path");if(t!==i){if(Ge.getParentPath(t)===i){const i=this.files.models.find((e=>e.get("path")===t));i&&i.set("mailupload",e)}}else this.set("mailupload",e)},_onCreateShareupload(e,t){const i=this.get("path");if(e!==i){if(Ge.getParentPath(e)===i){const i=this.files.models.find((t=>t.get("path")===e));i&&i.set("shareupload",t)}}else this.set("shareupload",t)},_onDeleteShareupload(e){if(this.get("shareupload")===e)return void this.set("shareupload",null);const t=this.files.models.find((t=>t.get("shareupload")===e));t&&t.set("shareupload",null)}});function nd(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function od(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){nd(e,t,i[t])}))}return e}function sd(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}let ad=null;const ld=function*(){let e=1;for(;;)yield e,e++}(),dd=de.Object.extend({protocols:"subscribe.hidrive.com",initialize(){this._webSocket=null,this._reconnectCounter=0,this._localSubscriptions=[],this._remoteSubscriptions=[],this._openDef=a().Deferred(),this._requestDeferred=a().Deferred().resolve()},open(){const e=V.get().addAuthToUrl(w.get("websocket_uri"));if(this._webSocket&&this._webSocket.readyState===this._webSocket.OPEN)return this._openDef.resolve();if(this._webSocket&&this._webSocket.readyState===this._webSocket.CONNECTING)return this._openDef.promise();try{this._webSocket=new WebSocket(e,this.protocols)}catch(e){return this._openDef.reject(e)}return this._webSocket.onmessage=this._onMessage.bind(this),this._webSocket.onopen=function(){this._reconnectCounter=0,this._openDef.resolve(),this.trigger("open")}.bind(this),this._webSocket.onerror=this._onError.bind(this),this._webSocket.onclose=this._onClose.bind(this),this._openDef.promise()},subscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=a().Deferred(),i=ld.next().value;if(!e.pid&&!e.event)throw new Error("pid or event required for subscription");return this._requestDeferred.done(function(){const r=od({uuid:i},e);this._localSubscriptions.push(r),this._remoteSubscribe(e).done((function(){t.resolve(r.uuid)})).fail((function(e){t.reject(e)}))}.bind(this)),t.promise()},_remoteSubscribe(e){const t=a().Deferred(),i=void 0!==e.event,r=this._remoteSubscriptions.find((t=>i?t.event===e.event:t.pid===e.pid));if(void 0!==r)return r.deferred.promise();this._send({name:"sub",args:e}).fail((function(e){t.reject(e)}));const n=sd(od({},e),{deferred:t});return this._remoteSubscriptions.push(n),t.promise()},_resubscribe(){this._remoteSubscriptions=[],this._localSubscriptions.forEach((function(e){this.trigger("resubscribe:"+e.uuid,this._remoteSubscribe(e))}),this)},_getSubscriptionId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object.keys(e).length)return-1;const t=void 0!==e.event;return this._remoteSubscriptions.findIndex((i=>t?i.event===e.event:i.pid===e.pid))},_handleSubscribe(e){const t=od({},e);delete t.id,delete t.code;const i=this._getSubscriptionId(t);if(i<0)return;const r=this._remoteSubscriptions[i];if(200!==e.code)r.deferred.reject(),this._remoteSubscriptions.splice(i,1);else{if(void 0!==e.id)r.type="doorbell",r.messageId=e.id;else{if(void 0===e.event)throw new Error(`Can not handle subscription: neither id nor event in args: ${JSON.stringify(e)}`);r.type="event",r.messageId=e.event}r.deferred.resolve(r.uuid)}},_handleUnsubscribe(e){const t=od({},e);delete t.code;const i=this._getSubscriptionId(t);i<0||this._remoteSubscriptions.splice(i,1)},unsubscribe(e){const t=a().Deferred();if(!e)throw new Error("uid required for unsubscribe");return this._requestDeferred.done(function(){const i=this._localSubscriptions.findIndex((t=>t.uuid===e));if(i<0)return void t.reject();const r=this._localSubscriptions[i],n=void 0!==r.event,o=this._remoteSubscriptions.find((e=>n?r.event===e.event:r.pid===e.pid));if(void 0===o)return void t.reject();this._localSubscriptions.splice(i,1);if(0===this._localSubscriptions.filter((e=>r.event?r.event===e.event:!!r.pid&&r.pid===e.pid)).length){let e={};if("doorbell"===o.type)e={id:o.messageId};else{if("event"!==o.type)throw new Error(`Neither a subscription of type "doorbell" nor "event" was found by uuid: ${JSON.stringify(o)}`);e={event:o.messageId}}this._send({name:"unsub",args:e})}t.resolve()}.bind(this)),t.promise()},_send(e){const t=a().Deferred();this._requestDeferred=a().Deferred();try{const i=JSON.stringify(e);this._webSocket.send(i),t.resolve()}catch(e){t.reject(e),this._requestDeferred.resolve()}return t.promise()},_reconnect(){setTimeout((()=>{this.open().then((()=>this._resubscribe()),(()=>this._reconnect()))}),this._getReconnectDelay()),this._reconnectCounter++},_getReconnectDelay(){const e=1e3*Math.pow(2,this._reconnectCounter),t=1e3*Math.pow(2,this._reconnectCounter+1);return Math.floor(Math.random()*(t-e)+e)},_handleMessage(e,t){const i=this._remoteSubscriptions.find((i=>i.messageId===e[t]));if(void 0===i)return;this._localSubscriptions.filter((e=>i.event?i.event===e.event:!!i.pid&&i.pid===e.pid)).forEach((function(t){this.trigger("message:"+t.uuid,e)}),this)},_onMessage(e){if(!e.data)return;const t=JSON.parse(e.data);"subresult"===t.name&&(this._handleSubscribe(t.args),this._requestDeferred.resolve()),"doorbell"===t.name&&this._handleMessage(t.args,"subs_id"),"event"===t.name&&this._handleMessage(t.args,"event"),"unsubresult"===t.name&&(this._handleUnsubscribe(t.args),this._requestDeferred.resolve()),t.name},_onError(e){this.trigger("error",e)},close(){this._webSocket.close()},_onClose(e){this._openDef=a().Deferred(),this._webSocket=null,this._localSubscriptions.forEach((function(e){this.trigger("disconnected:"+e.uuid)}),this),1e3!==e.code&&this._reconnect(),this.trigger("close",e)}},{instance(){return ad||(ad=new dd),ad}});var cd=dd,hd=de.Object.extend({initialize(e){if(!(d().has(e,"folder")&&e.folder instanceof rd))throw new Error("folder instance required in FolderUpdateService");this._websocket=cd.instance(),this._folder=e.folder,this._currentPid=null,this._subscriptionPromise=null,this._onMessage=d().throttle(this._onMessage,5e3,{leading:!1}),this.listenTo(this._folder,"load",this._onFolderLoad)},_updateSubscription(){this._websocket.open().done(function(){var e;this._subscriptionPromise&&(this.stopListening(this._websocket),this._subscriptionPromise.then(function(e){this._websocket.unsubscribe(e)}.bind(this))),e={pid:this._currentPid,recursive:!1},this._subscriptionPromise=this._websocket.subscribe(e).done(function(e){this.listenTo(this._websocket,"message:"+e,this._onMessage)}.bind(this))}.bind(this))},_onFolderLoad(){var e=this._folder.getPid();this._currentPid!==e&&(this._currentPid=e,this._updateSubscription())},_onMessage(){eo.getMeta({pid:this._currentPid,fields:["id","chash"],context:this._folder.getContext()}).then(function(e){e.id===this._currentPid&&e.chash!==this._folder.get("chash")&&this._folder.refresh()}.bind(this))}}),ud=i(5430),pd=i.n(ud),gd=o().View.extend({tagName:"ul",className:"content",events:{"click li":"onSelect"},template:cs.factory([pd()].join("")),render(){var e=G.getLanguages().map((function(e){return{value:e,text:G.getInLang("lang.name",e),selected:e===G.getLang()}}));return this.$el.empty().append(this.template({selected:G.getLang(),options:e})),this},onSelect(e){var t=a()(e.currentTarget).data("lang");this.trigger("selected",t)}}),md=i(9065),fd=i.n(md),bd=ae.extend({tagName:"span",template:cs.factory(fd()),events:{click:"onClick"},onClick(e){e.preventDefault(),this.trigger("click",e)}}),yd=za.extend({initialize(){this.triggerView=new bd,this.contentView=new gd,this.listenTo(this.contentView,"selected",this._onLanguageSelected),this.listenTo(this.triggerView,"click",this.toggle)},render(){return za.prototype.render.call(this),this.el.classList.add("sj-lang-flyout"),this},_onLanguageSelected(e){this.close(),G.getLang()!==e&&this.trigger("change",e)}}),wd=i(6999),vd=i(9611),_d=i.n(vd),xd={getUrls(){return{help:G.get("help.url"),imprint:G.get("imprint.url"),privacy:G.get("privacy.url"),euCookie:G.get("eu_cookie.url")}}},Ed=de.View.extend({id:"footer",template:cs.factory(_d()),templateData(){let e;return w.get("hasPoweredBy")&&G.exists("poweredBy.url")&&(e=wd),{poweredByImage:e,urls:xd.getUrls()}},subviews(){return{languageFlyout:{klass:yd,target:".language-target",options:{className:"sj-drop-up-down-flyout sj-drop-up-flyout"},listeners:{change:this._onLanguageChange.bind(this)}}}},_onLanguageChange(e){this.trigger("change:lang",e)}}),Od=i(9686),jd=i(2002),kd=i.n(jd),Sd=de.View.extend({id:"header",template:cs.factory(kd()),events:{"click .logout":"_onLogoutClick"},initialize(){try{this.auth=V.get()}catch(e){}this.auth&&this.listenTo(this.auth,"auth",this.render)},templateData(){return{isLoggedIn:this.auth&&this.auth.hasPassword()&&this.auth.isAuthorized(),logo:Od}},_onLogoutClick(){this.trigger("logout")}}),Td=i(6005),Pd=i(2817),Dd=i.n(Pd),Cd=o().View.extend({className:"error-page",template:cs.factory(Dd()),defaults:{errorCode:500},render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{code:this.defaults.errorCode};const t={400:[G.get("error.404"),404,Td],401:[G.get("error.401"),500,mt],403:[G.get("error.403"),500,mt],404:[G.get("error.404"),404,Td],410:[G.get("error.410"),410,Td],500:[G.get("error.500"),500,mt],503:[G.get("error.503"),500,mt]};let i=e.code;t[i]||(i=this.defaults.errorCode);const[r,n,o]=t[i];return this.$el.html(this.template({code:i,message:r,mappedCode:n,image:o})),this}}),Id=i(8242),zd=i.n(Id),Ld=i(3964),$d=i.n(Ld),Md=o().View.extend({className:"password-page",template:cs.factory($d()),events:{submit:"login"},initialize(e){d().has(e,"loginCallback")&&(this.loginCallback=e.loginCallback),this.passwordEditor=new Ml.PasswordEditor({name:"share_password",leftIcon:"icon-password",selectOnFocus:!0}),this.acceptButton=new Ml.Button({text:G.get("login.accept"),attributes:{"data-qa":"login_accept",type:"submit"}})},remove(){this.passwordEditor.remove(),this.acceptButton.remove(),o().View.prototype.remove.apply(this,arguments)},render(e){var t,i;return e&&(t=e.error),t&&(i="empty"===t?G.get("error.password_empty"):"expired"===t?G.get("error.expired"):"password"===t?G.get("error.password"):G.get("error.500")),this.$el.html(this.template({lang:G,shareName:"???",error:i})),this.$(".password-wrapper").append(this.passwordEditor.render().$el),this.$(".password-wrapper").append(this.acceptButton.render().$el),this.passwordEditor.setPlaceholder(G.get("login.placeholder")),this},login(e){var t,i;e.preventDefault(),this.acceptButton.disable(),""===(t=this.passwordEditor.getValue())?this.render({error:"empty"}):d().isFunction(this.loginCallback)&&(i=this.passwordEditor,this.loginCallback({password:t}).done((function(){i.setValue("")})))}}),Ad=o().View.extend({initialize(e){this.config=e,this._menuOpen=!1;const t=d().pick(e,"text","iconClass","className");d().has(e,"buttonAttributes")&&(t.attributes=e.buttonAttributes),this._button=new $a(t),this.listenTo(this._button,"mousedown",this._onMouseDown),this.listenTo(this._button,"click",this._onClick),this._menu=new gl(d().pick(e,"items")),this.listenTo(this._menu,"open",this._onMenuOpen),this.listenTo(this._menu,"close",this._onMenuClose),this.listenTo(this._menu,"state",this._onMenuState)},render(){return this.$el.addClass("sj-menu-button"),this._button.render().$el.appendTo(this.$el),this._onMenuState(!this._menu.isDisabled()),this},remove(){return this._button.remove(),this._menu.remove(),o().View.prototype.remove.apply(this)},isDisabled(){return this._menu.isDisabled()},_onMenuOpen(){this.$el.addClass("sj-menu-button-open"),this._menuOpen=!0},_onMenuClose(){this.$el.removeClass("sj-menu-button-open"),this._menuOpen=!1},_onMenuState(e){this.$el.toggleClass("sj-menu-button-disabled",!e),this.trigger("state",e)},_onMouseDown(e){this._menuOpen&&e.stopPropagation()},_onClick(){const e={anchor:this._button.el,parent:this.el};this.config.alignment&&(e.alignment=this.config.alignment),this.config.origin&&(e.origin=this.config.origin),this._menuOpen?this._menu.close():this._menu.open(e)},setItems(e){this._menu.setItems(e)}}),Vd=rd.extend({isShareable(){return!!this.get("shareable")},initialize(){rd.prototype.initialize.apply(this,arguments),this.listenTo(xe,"api:rename:success",this._onRenameSuccess)},queryData:{fields:["chash","id","members.category","members.ctime","members.id","members.image.exif.Orientation","members.image.height","members.image.width","members.mime_type","members.mtime","members.name","members.parent_id","members.path","members.readable","members.rshare","members.shareable","members.size","members.teamfolder","members.type","members.writable","path","readable","rshare","shareable","writable"],members:"all"},_onRenameSuccess(e,t){this.files.get(e.id)&&e!==this.modelToRename&&(this.files.remove(e),this.files.remove(this.files.where({path:t.get("path")})),this.files.add(t.clone()))}}),Fd=Vd.extend({isShareable(){return!1},classItemFilter(e){return e.readable&&"symlink"!==e.type},parse(e){return(e=rd.prototype.parse.apply(this,arguments))?(e.path&&0!==e.path.indexOf("/")&&(e.path="/"+e.path),e):null},queryData:{fields:["id","members.category","members.id","members.image.exif.Orientation","members.image.height","members.image.width","members.mime_type","members.mtime","members.name","members.parent_id","members.path","members.readable","members.size","members.type","members.writable","path","readable","writable"],members:"all"}}),Bd=i(635),Nd=i.n(Bd),Rd=(i(7727),o().View.extend({className:"sj-thumbnail",initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.size)throw new Error("Missing size config");if(this.size={},!isNaN(Number(e.size.width))&&e.size.width>0&&(this.size.width=e.size.width),!isNaN(Number(e.size.height))&&e.size.height>0&&(this.size.height=e.size.height),0===Object.keys(this.size).length)throw new Error("size.width and/or size.height did no pass the check");this.imageUrl=e.imageUrl,this._imageSize=null},renderImage(e){this._imageSize={height:e.height,width:e.width},this.el.style.setProperty("background-image","url("+e.src+")"),this.el.style.setProperty("max-width",e.width+"px"),this.el.style.setProperty("max-height",e.height+"px"),this.el.classList.add("image-loaded")},_toggleLoading(e){e?this.el.classList.add("sj-thumbnail-loading"):this.el.classList.remove("sj-thumbnail-loading")},render(){return this._imageSize||(this._toggleLoading(!0),this.imageUrl(this.size).then(no.preload).then((e=>{this.renderImage(e)})).catch((()=>{this.trigger("load:error")})).finally((()=>{this._toggleLoading(!1)}))),this},resize(e){this._imageSize&&(e.width<=this.size.width&&e.height<=this.size.height||(this._imageSize=null,this.size=e,this.render()))}})),Ud=i(7837),qd=i.n(Ud),Hd=Ml.BaseOverlayView.extend({overlayClasses:"imageview-wrapper",overlayTemplate:cs.factory(qd()),initialize(e){this.imageUrl=(e||{}).imageUrl,this.debounceResize=d().debounce(this._onResize.bind(this),300),window.addEventListener("resize",this.debounceResize)},render(){return this._thumbnail=new Rd({imageUrl:this.imageUrl,size:this._getWindowSize()}),this._thumbnail.render(),this.$overlayEl.append(this._thumbnail.$el),this.listenTo(this._thumbnail,"load:error",this._onLoadError),this},_getWindowSize(){return{width:g.getInnerWidth(),height:g.getInnerHeight()}},_onResize(){this._thumbnail&&this._thumbnail.resize(this._getWindowSize())},_onLoadError(){this.$overlayEl.html(cs.factory(Nd())({icon:Kt.icons[Kt.groups.image],lang:G}))},onBeforeClose(){window.removeEventListener("resize",this.debounceResize)}}),Gd=i(4174),Wd=i.n(Gd),Kd=i(4055);const Yd=new(o().Model.extend({defaults:{decreasing:!1,quality:10,online:!0},initialize(){Object.defineProperty(this,"MAX_QUALITY",{value:10,writable:!1}),this.set("online",Xl.getIsOnline()),window.addEventListener("online",(()=>this.set("online",!0))),window.addEventListener("offline",(()=>this.set("online",!1))),this.listenTo(this,"change:online",(()=>{this.get("online")&&this._waitOnlineResolve?this._waitOnlineResolve():this._waitOfflineResolve&&this._waitOfflineResolve()}))},increaseQuality(){this.set({quality:Math.min(10,this.get("quality")+1),decreasing:!1})},decreaseQuality(){this.set({quality:Math.max(0,this.get("quality")-1),decreasing:!0})},neutralize(){this.set("decreasing",!1)},_waitOnlinePromise:null,_waitOnlineResolve:null,waitOnline(){return this.get("online")?Promise.resolve():(this._waitOnlinePromise||(this._waitOnlinePromise=new Promise((e=>{this._waitOnlineResolve=e})).then((()=>{this._waitOnlinePromise=null,this._waitOnlineResolve=null}))),this._waitOnlinePromise)},_waitOfflinePromise:null,_waitOfflineResolve:null,waitOffline(){return this.get("online")?(this._waitOfflinePromise||(this._waitOfflinePromise=new Promise((e=>{this._waitOfflineResolve=e})).then((()=>{this._waitOfflinePromise=null,this._waitOfflineResolve=null}))),this._waitOfflinePromise):Promise.resolve()}}));var Xd=()=>Yd,Zd=Object.freeze({error:Object.freeze({ABORT:"abort",EDQUOT:"quota",EXIST:"exists",NETWORK:"network",GENERIC:"generic"}),upload:Object.freeze({NEW:"new",PREPARED:"prepared",CHECKING:"checking",READY:"ready",QUEUED:"queued",WAITING:"waiting",RUNNING:"running",COMPLETE:"complete",CANCELLED:"cancelled",FAILED:"failed",RESUMABLE:"resumable"})});const{error:Jd}=Zd;var Qd=f.extend({abortInterrupt:null,initialize(e){this.request=e,this.metrics=Xd()},async run(){let e,t=0;this.abortInterrupt=new Promise(((e,t)=>{this.triggerAbortInterrupt=()=>t(Jd.ABORT)}));do{try{e=new Promise(((e,t)=>{this.request().then(e,t)}));const t=await Promise.race([this.abortInterrupt,this.metrics.waitOffline().then((()=>Promise.reject({status:0}))),e]);return this.metrics.increaseQuality(),t}catch(e){if(!e||e===Jd.ABORT||0!==e.status)return Promise.reject(e);if(10===t)return Promise.reject(Jd.NETWORK);const i=1e3*t,r=new Promise((e=>setTimeout(e,i)));t++,this.metrics.decreaseQuality(),await Promise.race([this.abortInterrupt,Promise.all([r,this.metrics.waitOnline()])])}}while(t<=10);return Promise.reject("RequestRetryController.run: loop break")},abort(){if(!this.triggerAbortInterrupt)throw new Error("RequestRetryController: abort() before run()");this.triggerAbortInterrupt()}});function ec(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tc(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){ec(e,t,i[t])}))}return e}function ic(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var rc=U.extend({generatePathComponents(e){const t=e.name||"";return{name:t,path:t}},getItemType(){return"ShareLinkModel"},parse(e){const t=$e.file,i=tc(ic(tc({},e),{type:t}),ki.parseForSharelink(e.name));return i.group=ni({type:t,ext:i.ext,encrypted:i.encrypted}),i.ttl>0&&(i.expirytime=Date.now()/1e3+i.ttl|0),void 0===i.readable&&(i.readable=!0),i},getMeta(){const e=a().Deferred(),t=e.promise(),i={readable:!0};return d().defer((function(){e.resolve(i)})),t.abort=function(){},t}}),nc=i(202),oc=i.n(nc),sc=de.View.extend({className:"teaser",template:cs.factory(oc())}),ac=i(4672),lc=i.n(ac),dc=i(1129),cc=i.n(dc),hc=de.View.extend({className:"videoview",template:cs.factory(cc()),templateData(){return{url:this._url}},initialize(e){this._url=e.url,this._mimeType=e.mimeType,this.getThumbnailUrlObject=e.getThumbnailUrlObject()},onAfterRender(){const e=this.el.querySelector("video");""!==e.canPlayType(this._mimeType)?(this.getThumbnailUrlObject.then((t=>{e&&(e.setAttribute("poster",t),e.setAttribute("preload","none"))})).catch((()=>{e&&(e.removeAttribute("poster"),e.removeAttribute("preload"))})),e.addEventListener("error",this._onError.bind(this))):this._onError()},_onError(){this.trigger("error")}});function uc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var pc=o().View.extend({className:"shlnk",template:cs.factory(lc()),initialLoadingTpl:cs.factory(Wd()),sid:null,hasPassword:!1,password:null,download_code:null,infoPromise:null,loginError:null,events:{"click .sj-thumbnail.clickable":"onThumbClick"},initialize(){this.downloadButton=new $a({text:G.bind("sharelink.buttons.download"),iconClass:"icon-download-folder",className:"download-button"}),this.listenTo(this.downloadButton,"click",this.onDownload),this.onWindowResize=(0,l.debounce)((()=>{this._thumbnail&&this._thumbnail.resize(this.getPreviewSize())}),300),window.addEventListener("resize",this.onWindowResize,{passive:!0})},render(e){return e&&e.sid&&(this.sid=e.sid),this.$el.contents().detach(),this.sid&&(this.$el.html(this.initialLoadingTpl({lang:G,malwareScanImage:Kd})),this.getShareInfo().then(this.authenticate.bind(this)).then(this.getShareData.bind(this)).then(this.renderContents.bind(this)).fail(this.showError.bind(this))),this},getShareInfo(){return this.infoPromise||(this.infoPromise=a().get("/api/sharelink/info",{id:this.sid})),this.infoPromise},authenticate(e){return e.has_password&&!this.password?(this.hasPassword=!0,this.showLogin()):null},getShareData(){const e={id:this.sid,fields:["name","type","size","ttl","remaining","mime_type","streaming_url"]};return this.hasPassword&&(e.password=this.password,e.fields.push("download_code")),eo.getShareLinkInfo(e)},showLogin(){const e=a().Deferred(),t=new Md({loginCallback:t=>(this.password=t.password,e.resolve(),e.promise())});return this.$el.html(t.render({error:this.loginError}).$el),this.$el.append((new sc).render().$el),e.promise()},showError(e){this.hasPassword&&401===e.status?(this.password=null,this.loginError="password",this.render()):this.trigger("error",e.status)},renderContents(e){const t=new rc(e,{parse:!0}),i=t.get("group"),r=Kt.supportThumbnail(t.get("ext"));if(t.has("download_code")&&(this.download_code=t.get("download_code")),this.$el.html(this.template({lang:G,filegroups:Kt,formatters:oe,model:t})),r&&i!==Kt.groups.video)this._thumbnail=new Rd({size:this.getPreviewSize(),imageUrl:this.getThumbnailUrl.bind(this)}),this._thumbnail.on("load:error",this._noPreview.bind(this)),this._thumbnail.render(),i===Kt.groups.image&&this._thumbnail.el.classList.add("clickable"),this.$(".shlnk-media-placeholder").replaceWith(this._thumbnail.$el);else if(i===Kt.groups.video){const e=()=>this.getThumbnailUrl(this.getPreviewSize());this._video=new hc({mimeType:t.get("mime_type"),url:t.get("streaming_url"),getThumbnailUrlObject:e.bind(this)}),this._video.on("error",this._noPreview.bind(this)),this._video.render(),this.$(".shlnk-media-placeholder").replaceWith(this._video.$el)}else this._noPreview();this.$(".download-target").replaceWith(this.downloadButton.render().$el)},refreshShareData(e){return new Qd((()=>this.shareDataRequest(e))).run()},shareDataRequest(e){const t={id:this.sid,password:this.password,fields:e};return eo.getShareLinkInfo(t)},onDownload(){if(this.downloadButton.isDisabled())return;const e={id:this.sid};this.download_code&&(e.download_code=this.download_code),this.downloadButton.disable(),g.setLocation("/api/sharelink/download?"+li.paramsToString(e)),setTimeout((()=>{const e=["remaining"];this.hasPassword&&e.push("download_code"),this.refreshShareData(e).then((e=>{e.download_code&&(this.download_code=e.download_code),e.remaining&&(this.el.querySelector(".downloads").innerHTML=G.get("sharelink.downloads",e.remaining)),this.downloadButton.enable()}),(e=>{this.showError(e)}))}),1e3)},onThumbClick(){this._imageView=new Hd({imageUrl:this.getThumbnailUrl.bind(this)}),this._imageView.open()},remove(){window.removeEventListener("resize",this.onWindowResize,{passive:!0}),this.downloadButton.remove(),this._thumbnail&&this._thumbnail.remove(),this._video&&this._video.remove(),this._imageView&&this._imageView.close(),o().View.prototype.remove.apply(this,arguments)},_noPreview(){this.$el.addClass("nopreview")},getThumbnailUrl(e){const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){uc(e,t,i[t])}))}return e}({},e);return this.password&&(t.password=this.password),eo.getShareLinkThumbnail(this.sid,t)},getPreviewSize(){return{height:this.el.clientHeight,width:this.el.clientWidth}}}),gc={buildSegments(e,t){var i=t||"";return(e||"").split("/").filter((function(e){return!!e})).map((function(e){return i+="/"+e,{name:F.urlDecode(e),href:i,title:F.urlDecode(i)}}))}},mc={get(e){if("function"!=typeof e)throw new Error("rootNameCallback function required.");return function(t){var i=e();return[{name:i,href:"/",title:i}].concat(gc.buildSegments(t))}}},fc=i(5849),bc=i.n(fc);const yc=o().View.extend({tagName:"span",events:{click:"onClick"},template:['<span class="icon icon-sort"></span>','<span class="label"><%= label %></span>'],initialize(){this.listenTo(this.model.files,"sortBy",this.addTooltip)},onClick(){this.trigger("click")},render(){return this.$el.html(cs.factory(this.template.join(""))({label:G.get("sortFlyout.title")})),this.addTooltip(),this},addTooltip(){const e={display_name:G.get("sortFlyout.name"),mtime:G.get("sortFlyout.date"),size:G.get("sortFlyout.size"),category:G.get("sortFlyout.type")};let t;t="asc"===this.model.files.sortable.getDir()?G.get("asc"):G.get("desc");const i=G.get("sortFlyout.sortedBy")+' "'+e[this.model.files.sortable.getKey()]+'", '+t;a()(this.$el).attr("title",i)}}),wc=o().View.extend({className:"content",tagName:"ul",events:{"click li":"switchSort"},template:cs.factory(bc()),initialize(){this.listenTo(this.model.files,"sortBy",this.render)},render(){const e=this.model.files.sortable.getKey(),t=this.model.files.sortable.getDir();return this.sortList={display_name:{text:G.get("sortFlyout.name")},mtime:{text:G.get("sortFlyout.date")},size:{text:G.get("sortFlyout.size")},category:{text:G.get("sortFlyout.type")}},Object.entries(this.sortList).forEach((i=>{let[r,n]=i;Object.assign(n,{selected:e===r,direction:e===r&&"asc"===t?"desc":"asc"})})),this.$el.empty().append(this.template({sorting:this.sortList})),this},switchSort(e){const t=a()(e.target).closest("li").attr("data-cid"),i=this.sortList[t].direction;me.track({op:"sort",target:t,data:i}),this.model.files.sortable.sortBy(t,i),this.trigger("close")}});var vc=Ml.Flyout.extend({className:"fm-sort-flyout",initialize(e){if("object"!=typeof e)throw new Error("options-object required for SortFlyout");this.triggerView=new yc({model:this.model}),this.contentView=new wc({model:this.model}),this.listenTo(this.triggerView,"click",this.toggle),this.listenTo(this.contentView,"close",this.close),Ml.Flyout.prototype.initialize.apply(this,arguments)}}),_c=ae.extend({tagName:"svelte-wrapper",componentInstance:null,initialize(){let{component:e,listeners:t,props:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.component=e,this.props=i,this.listeners=t},render(){if(!this.componentInstance){this.componentInstance=new this.component({target:this.el,props:this.props}),this.listeners&&Object.entries(this.listeners).forEach((e=>{let[t,i]=e;this.componentInstance.$on(t,(e=>{let{detail:t}=e;Array.isArray(t)?i(...t):i(t)}))}));const e=this.componentInstance.$$.props;e&&Object.keys(e).forEach((e=>{"function"==typeof this.componentInstance[e]&&(this[e]=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.componentInstance[e](...i)})}))}return this},remove(){return this.componentInstance&&(this.componentInstance.$destroy(),this.componentInstance=null),ae.prototype.remove.call(this)}}),xc=i(9173);let Ec;const Oc=3e3,jc={negative:11e3,info:7e3,positive:Oc},kc=(0,Jt.fZ)([]),Sc=()=>{kc.update((e=>e.slice(1)))},Tc=(0,Jt.nK)(kc,((e,t)=>{const i=()=>{clearTimeout(Ec)};return 0===e.length?(t([]),i):(t([e[0]]),Ec=setTimeout((()=>{Sc()}),e[0].timeout),i)}));var Pc={subscribe:Tc.subscribe,removeToast:Sc,stopTimeout:()=>{clearTimeout(Ec)},restartTimeout:e=>{let{timeout:t=Oc}=e;return Ec=setTimeout((()=>{Sc()}),t),()=>{clearTimeout(Ec)}},notify:e=>{let{msg:t="",type:i="negative",timeout:r=jc[i],unescape:n=!1}=e;kc.update((e=>[...e,{id:`_${Math.random().toString(36).substring(2,9)}`,type:i,message:t,timeout:r,unescape:n}]))}};function Dc(e,t,i){const r=e.slice();return r[5]=t[i].id,r[6]=t[i].type,r[7]=t[i].unescape,r[8]=t[i].message,r[9]=t[i].timeout,r}function Cc(e){let t,i=$c(e[8])+"";return{c(){t=(0,Ee.fLW)(i)},m(e,i){(0,Ee.$Tr)(e,t,i)},p(e,r){1&r&&i!==(i=$c(e[8])+"")&&(0,Ee.rTO)(t,i)},d(e){e&&(0,Ee.ogt)(t)}}}function Ic(e){let t,i,r=$c(e[8])+"";return{c(){t=new Ee.FWw(!1),i=(0,Ee.cSb)(),t.a=i},m(e,n){t.m(r,e,n),(0,Ee.$Tr)(e,i,n)},p(e,i){1&i&&r!==(r=$c(e[8])+"")&&t.p(r)},d(e){e&&((0,Ee.ogt)(i),t.d())}}}function zc(e,t){let i,r,n,o,s,a,l,d,c,h;function u(e,t){return e[7]?Ic:Cc}let p=u(t),g=p(t);function m(){return t[4](t[9])}return{key:e,first:null,c(){i=(0,Ee.bGB)("div"),r=(0,Ee.bGB)("div"),g.c(),n=(0,Ee.DhX)(),o=(0,Ee.bGB)("div"),s=(0,Ee.DhX)(),(0,Ee.Ljt)(r,"class","content svelte-14v3yyf"),(0,Ee.Ljt)(o,"class","close-icon icon-toast-close svelte-14v3yyf"),(0,Ee.Ljt)(i,"class",a="toast "+t[6]+" svelte-14v3yyf"),(0,Ee.czc)(i,"z-index",Os.next()),this.first=i},m(e,a){(0,Ee.$Tr)(e,i,a),(0,Ee.R3I)(i,r),g.m(r,null),(0,Ee.R3I)(i,n),(0,Ee.R3I)(i,o),(0,Ee.R3I)(i,s),d=!0,c||(h=[(0,Ee.oLt)(o,"click",t[1]),(0,Ee.oLt)(i,"mouseenter",t[3]),(0,Ee.oLt)(i,"mouseleave",m)],c=!0)},p(e,n){p===(p=u(t=e))&&g?g.p(t,n):(g.d(1),g=p(t),g&&(g.c(),g.m(r,null))),(!d||1&n&&a!==(a="toast "+t[6]+" svelte-14v3yyf"))&&(0,Ee.Ljt)(i,"class",a)},i(e){d||(e&&(0,Ee.P$F)((()=>{d&&(l||(l=(0,Ee.uPJ)(i,xc.U1,{delay:250,duration:300},!0)),l.run(1))})),d=!0)},o(e){e&&(l||(l=(0,Ee.uPJ)(i,xc.U1,{delay:250,duration:300},!1)),l.run(0)),d=!1},d(e){e&&(0,Ee.ogt)(i),g.d(),e&&l&&l.end(),c=!1,(0,Ee.j7q)(h)}}}function Lc(e){let t,i,r=[],n=new Map,o=(0,Ee.NXn)(e[0]);const s=e=>e[5];for(let t=0;t<o.length;t+=1){let i=Dc(e,o,t),a=s(i);n.set(a,r[t]=zc(a,i))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=(0,Ee.cSb)()},m(e,n){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,n);(0,Ee.$Tr)(e,t,n),i=!0},p(e,[i]){15&i&&(o=(0,Ee.NXn)(e[0]),(0,Ee.dvw)(),r=(0,Ee.GQg)(r,i,s,1,e,o,n,t.parentNode,Ee.cly,zc,t,Dc),(0,Ee.gbL)())},i(e){if(!i){for(let e=0;e<o.length;e+=1)(0,Ee.Ui)(r[e]);i=!0}},o(e){for(let e=0;e<r.length;e+=1)(0,Ee.etI)(r[e]);i=!1},d(e){e&&(0,Ee.ogt)(t);for(let t=0;t<r.length;t+=1)r[t].d(e)}}}function $c(e){return"function"==typeof e?e():e}function Mc(e,t,i){let r;(0,Ee.FIv)(e,Pc,(e=>i(0,r=e)));const{removeToast:n,restartTimeout:o,stopTimeout:s}=Pc;return[r,n,o,s,e=>o({timeout:e})]}class Ac extends Ee.f_C{constructor(e){super(),(0,Ee.S1n)(this,e,Mc,Lc,Ee.N8,{})}}var Vc=Ac,Fc=i(5629),Bc=i.n(Fc);var Nc={getMeta(e){return new Qd((()=>function(e){return new Promise(((t,i)=>{Zt.getMeta(e).then(t,(e=>{404!==e.status?i(e):t(null)}))}))}(e)))}};var Rc=class{check(e,t,i,r,n,o){return function(e){if(e.get("group")!==Kt.groups.dir)return a().Deferred().resolve().promise();const t=e.getFolder(),i=a().Deferred();return Nc.getMeta({context:t.getContext(),pid:t.get("id"),path:e.get("name")}).run().then((function(e){null!==e?i.reject(Zd.error.EXIST):i.resolve()}),(function(e){0!==e.status?i.reject(Zd.error.GENERIC):i.reject(Zd.error.NETWORK)})),i.promise()}(e).then((function(){e.set("on_exist","autoname"),i()}),(function(e){o(e)}))}reset(){}constructor(){}},Uc=i(2068),qc=i.n(Uc),Hc=i(1330),Gc=i.n(Hc);const{error:Wc}=Zd;var Kc=f.extend({currentRequest:null,chunkCursor:0,initialize(e,t){this.file=e,this.chunkHandler=t,this.metrics=Xd()},async run(){let e=0,t=!1;const i=new Promise(((e,i)=>{this.triggerAbortInterrupt=()=>{i(Wc.ABORT),t=!0}}));for(let r of this.getChunk())try{if(t)return i;this.currentRequest=this.chunkHandler(r,this.chunkCursor),await Promise.race([this.currentRequest,this.metrics.waitOffline().then((()=>Promise.reject({status:0})))]),this.chunkCursor+=r.size,e=0,this.metrics.increaseQuality()}catch(t){if(!t||t===Wc.ABORT||0!==t.status)return Promise.reject(t);if(10===e)return Promise.reject(Wc.NETWORK);const r=1e3*e,n=new Promise((e=>setTimeout(e,r)));e++,this.metrics.decreaseQuality(),await Promise.race([i,Promise.all([n,this.metrics.waitOnline()])])}return Promise.resolve()},abort(){if(!this.triggerAbortInterrupt)throw new Error("ChunkTransferController: abort() before run()");this.triggerAbortInterrupt(),this.currentRequest.abort()},*getChunk(){if(0!==this.file.size)for(;this.chunkCursor<this.file.size;){const e=Math.pow(2,this.metrics.MAX_QUALITY-this.metrics.get("quality")),t=Math.floor(5242880/e);yield this.file.slice(this.chunkCursor,this.chunkCursor+t)}else yield new Blob}}),Yc={rename(e,t,i){return new Qd((async()=>{try{await eo.rename(e,t,i,!0)}catch(i){if(409===i.status){if((await e.getMeta(["name"])).name===t)return;throw i}throw i}}))}};var Xc=f.extend({_transferController:null,_renameController:null,_tempModel:null,initialize(e){if(this.folder=e.folder,this.file=e.file,this.onexist=e.onexist,!(this.folder instanceof ar))throw new Error("the provided folder needs to be a FileModel");if(!this.file)throw new Error("no file was provided");this._tempFilename=(e=>{const t=new Date,i=oe.date(t.getTime()/1e3,"YmdHis");return[e.name,i,"webupload"].join(".")})(this.file)},_patch(e,t,i){return eo.patchFile(this._tempModel,e,t,(e=>i(t+e.loaded)))},_create(e,t){const i=eo.newFile({folder:this.folder,filename:this._tempFilename,on_exist:"overwrite",mtime:(r=this.file,r.lastModified?Math.round(r.lastModified/1e3):Math.round(Date.now()/1e3)),content:e,onProgress:e=>t(e.loaded)});var r;return i.then((e=>{this._tempModel=e})).catch((()=>{})),i},async run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};if(this._settled)return Promise.resolve();if("function"!=typeof e)throw new Error("the progressCallback was expected to be a function");return this._transferController||(this._transferController=new Kc(this.file,((t,i)=>0!==i||this._tempModel?this._patch(t,i,e):this._create(t,e)))),await this._transferController.run(),this._renameController||(this._renameController=Yc.rename(this._tempModel,this.file.name,this.onexist)),await this._renameController.run(),this._tempModel=null,this._settled=!0,Promise.resolve()},abort(){this._renameController?this._renameController.abort():this._transferController.abort()},cleanUp(){this._tempModel&&(eo.deleteFiles([this._tempModel]),this._tempModel=null)}});var Zc={createDirs:function e(t,i){var r=a().Deferred();return eo.getDir(encodeURIComponent(t),i,{fields:"id,path",members:"none"}).then((function(e){r.resolve(new ar(e,{parse:!0,context:i}))}),(function(n){404===n.status?e(Ge.getParentPath(t),i).then((function(e){eo.newFolder(e,Ge.getLastComponent(t)).then(r.resolve,r.reject)}),r.reject):r.reject(n)})),r.promise()}};var Jc={createController(e,t){return new Qd((()=>function(e,t){const i=e.urlDecode("path");let r=t.path||t.file.webkitRelativePath||"";return t.file&&(r=Ge.getParentPath(r)||""),r=Ge.joinPath(i,r),r===i?a().Deferred().resolve(e).promise():Zc.createDirs(r,e.getContext())}(e,t)))}},Qc=f.extend({initialize(e){if(this.folder=e.folder,this.entry=e.entry,this.onprogress=e.onprogress,this.onexist=e.onexist,this._interrupt=()=>{},"object"!=typeof this.entry)throw new Error("EntryUpload: entry must be object");if(!this.entry.file&&!this.entry.path)throw new Error("EntryUpload: either 'entry.path' or 'entry.file' are required");if("function"!=typeof this.onprogress)throw new Error("EntryUpload: onprogress callback required (function)")},_createFolder(){const e=a().Deferred(),t=e.promise();if(this._createdFolder)return a().Deferred().resolve().promise();const i=Jc.createController(this.folder,this.entry);return this._interrupt=()=>{i.abort(),e.reject(Zd.error.ABORT)},i.run().then((t=>{this._createdFolder=t,e.resolve()}),e.reject),t},_uploadFile(){const e=a().Deferred(),t=e.promise();return this._fileUploadController||(this._fileUploadController=new Xc({folder:this._createdFolder,file:this.entry.file,onexist:this.onexist}),this._interrupt=()=>{this._fileUploadController.abort(),e.reject(Zd.error.ABORT)}),this._fileUploadController.run(this.onprogress).then(e.resolve,e.reject),t},run(){return this._settled?a().Deferred().resolve().promise():this._createFolder().then((()=>this._aborted?a().Deferred().reject(Zd.error.ABORT):this.entry.file?this._uploadFile():a().Deferred().resolve().promise()))},abort(){this._aborted=!0,this._interrupt()},cleanUp(){this._fileUploadController&&(this._fileUploadController.cleanUp(),this._fileUploadController=null)}});function eh(e,t,i){var r,n=a().Deferred();if(e.isFile)i.fileCount++,e.file((function(t){i.maxFileSize=Math.max(i.maxFileSize,t.size),n.resolve([{file:t,path:e.fullPath}])}),n.reject);else if(e.isDirectory){i.directoryCount++;try{(r=e.createReader(),new Promise(((e,t)=>{let i=[];!function n(){r.readEntries((function(t){t.length?([].push.apply(i,t),d().defer(n)):e(i)}),t)}()}))).then((function(r){if(i.maxDepth=Math.max(i.maxDepth,t),i.maxEntryCount=Math.max(i.maxEntryCount,r.length),r.length){var o=[],s=d().after(r.length,(function(){n.resolve(d().flatten(o))}));d().each(r,(function(e,r){eh(e,t+1,i).then((function(e){o[r]=e,s()}),n.reject)}))}else n.resolve([{path:e.fullPath}])}),n.reject)}catch(e){n.reject(e)}}return n.promise()}var th={walk(e){var t={maxDepth:0,maxEntryCount:0,maxFileSize:0,fileCount:0,directoryCount:0};if(!e)throw new Error("no entry-argument was provided");if(!e.isFile&&!e.isDirectory)throw new Error("no FileSystemEntry provided");return eh(e,0,t).then((function(e){return a().Deferred().resolve(e,t)}),(function(e){return d().extend(t,{incomplete:1}),a().Deferred().reject(e,t)}))}};var ih=function(e){var t=e[0].webkitRelativePath.split("/")[0];Object.defineProperty(this,"files",{writable:!1,value:e}),Object.defineProperty(this,"isDirectory",{writable:!1,value:!0}),Object.defineProperty(this,"fullPath",{get(){return"/"+t}}),Object.defineProperty(this,"name",{get(){return t}})},rh={poll(e,t){return new Promise(((i,r)=>{const n=e.slice();let o=!0;const s=setInterval((function(){if(o){if(!n.length)return clearInterval(s),void i();try{o=!1,t(n.shift()).then((()=>{o=!0}),(e=>{clearInterval(s),r(e)}))}catch(e){clearInterval(s),r(e)}}}),10)}))}};let nh=0;function oh(e){const t=e.split(".");let i;return t.length>1&&""!==t[0]&&(i=t.pop()),Kt.get(i)}var sh=o().Model.extend({defaults:{progress:0,completed:0,error:null},initialize(e){let t,i;if(e.file)this._file=e.file,this._relativePath=this._file.webkitRelativePath,t=this._file.name,i=oh(t);else{if(!e.entry)throw new Error("no file or entry were provided");this._entry=e.entry,this._relativePath=this._entry.path,t=this._entry.name,i=this._entry.isDirectory?Kt.groups.dir:oh(t)}this._folder=e.folder,this._eventId=e.eventId,this._upload=null,this._totalCompleted=0,this.set({id:++nh,name:t,relativePath:this._relativePath||"",group:i}),this._enumerationPromise=this._enumerateFiles().then((e=>{let{entries:t,stats:i}=e;return this._setStats(t,i)}),(e=>{let{error:t,stats:i}=e;return this._setErrorStats(t,i)}))},collectData(){return new Promise(((e,t)=>{this._enumerationPromise.then(e,t)}))},_enumerateFiles(){const e=this._entry;return new Promise(((t,i)=>{if(e&&e instanceof ih){let i=[...e.files].map((function(e){return{file:e,path:e.webkitRelativePath}}));t({entries:i})}else e?th.walk(this._entry).then(((e,i)=>t({entries:e,stats:i})),((e,t)=>i({error:e,stats:t}))):t({entries:[{file:this._file}]})}))},_setStats(e,t){return new Promise((i=>{this._entries=Array.isArray(e)?e:[];const r=this._entries.reduce((function(e,t){return e+(t.file?t.file.size:0)}),0);this.set({size:r,statistics:t}),i({entries:e,statistics:t})}))},_setErrorStats(e,t){return new Promise(((i,r)=>{this.set({statistics:t}),r(e,t)}))},_handleUploads(){if(this._serialRunner)return this._serialRunner;const e=this.get("on_exist");return this._serialRunner=rh.poll(this._entries,(t=>{this._upload=this._upload||new Qc({folder:this._folder,entry:t,onexist:e,onprogress:e=>this._onProgress(e)});return this._upload.run().then((()=>{t.file&&(this._totalCompleted+=t.file.size,this._onProgress(0)),this._upload=null,this._entries.shift()}))})).catch((e=>(this._serialRunner=null,Promise.reject(e)))),this._serialRunner},upload(){return this._enumerationPromise.then((()=>this._handleUploads())).then((()=>this._onSuccess()),(e=>this._onError(e)))},_onProgress(e){const t=this._totalCompleted+e;this.set({completed:t,progress:Math.min(1,+(t/this.get("size")).toFixed(3))})},_onSuccess(){return this.set("progress",1),Promise.resolve()},_onError(e){return new Promise(((t,i)=>{let r;e!==Zd.error.ABORT?(r={error:e},this.set(r),i(e)):i(e)}))},cancel(){this._upload&&this._upload.abort()},getFolder(){return this._folder},getEventId(){return this._eventId},cleanUp(){this._upload&&(this._upload.cleanUp(),this._upload=null)}}),ah=o().Collection.extend({model:sh,comparator(e,t){return e.id>t.id?1:-1},findByStatus(e){return this.findWhere({status:e})},findByAnyStatus(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.find((e=>t.indexOf(e.get("status"))>-1))},filterByStatus(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.filter((e=>t.indexOf(e.get("status"))>-1))}});const lh=Zd.upload,dh=[lh.CANCELLED,lh.FAILED];var ch=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"remove",this._onRemove),this.listenTo(this.uploads,"change:status",this._onStatusChange)},_onRemove(e){e.get("status")!==lh.COMPLETED&&e.cleanUp()},_onStatusChange(e){dh.includes(e.get("status"))&&e.cleanUp()}});const hh=Zd.upload;var uh=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");if(!e.conflictCheck)throw new Error("conflictCheck required");this.uploads=e.uploadItems,this.conflictCheck=e.conflictCheck,this.listenTo(this.uploads,"remove remove:end change:status",this._next.bind(this))},_getPendingByGroup(e){return this.uploads.filter((function(t){return t.getEventId()===e.getEventId()&&[hh.COMPLETE,hh.FAILED,hh.CANCELLED,hh.RESUMABLE].indexOf(t.get("status"))<0}))},_next(){if(this.uploads.findByAnyStatus(hh.RUNNING,hh.WAITING))return;const e=this.uploads.findByStatus(hh.READY);e&&(e.set("status",hh.WAITING),this.conflictCheck(e,this._getPendingByGroup.bind(this),(function(){e.set("status",hh.QUEUED)}),function(){this.uploads.remove(e)}.bind(this),function(){const t=this._getPendingByGroup(e);t.length>0&&(this.uploads.remove(t,{silent:!0}),this.uploads.trigger("remove:end"))}.bind(this),(function(t){t===Zd.error.NETWORK?e.set({status:hh.RESUMABLE,error:t,statusToResume:hh.READY}):e.set({status:hh.FAILED,error:t})})))}});const ph=Zd.upload;var gh=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");this.listenTo(e.uploadItems,"add",this._onAdd)},_onAdd(e){e.collectData().then((()=>e.set("status",ph.PREPARED)),(t=>e.set({error:t,status:ph.FAILED})))}});function mh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fh(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const bh=Zd.upload;var yh=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"change:status",this._onStatusChange)},_onStatusChange(){if(this.uploads.findByStatus(bh.RUNNING))return;const e=this.uploads.findByStatus(bh.QUEUED);e&&(Xd().neutralize(),e.set("status",bh.RUNNING),e.upload().then((()=>{e.set("status",bh.COMPLETE)}),(t=>{let i={};t===Zd.error.ABORT?i.status=bh.CANCELLED:t===Zd.error.NETWORK?(i.status=bh.RESUMABLE,i.statusToResume=bh.QUEUED):i.status=bh.FAILED,e.set(fh(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){mh(e,t,i[t])}))}return e}({},i),{error:t}))})))}}),wh=async()=>{try{return(await V.get().getShareInfo()).space_available}catch(e){return Number.POSITIVE_INFINITY}};const vh=Zd.upload;var _h=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"remove remove:end change:status",this._onStatusChange)},_onStatusChange(){if(this.uploads.findByAnyStatus(vh.CHECKING,vh.WAITING,vh.RUNNING))return;const e=this.uploads.findByStatus(vh.PREPARED);if(!e)return;e.set("status",vh.CHECKING);const t=e.getFolder().get("path");wh(t).then((t=>{e.get("size")<t?e.set("status",vh.READY):e.set({error:Zd.error.EDQUOT,status:vh.FAILED})}),(t=>{e.set({error:t,status:vh.FAILED})}))}});const xh=Zd.upload;let Eh=!1;function Oh(e){e.preventDefault(),e.returnValue="running uploads detected"}var jh=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadItems instanceof ah))throw new Error("uploadItems is no uploadItems collection");this.uploads=e.uploadItems,this.listenTo(this.uploads,"change:status",this._onStatusChange)},_onStatusChange(){if(this.uploads.findByStatus(xh.RUNNING))return void this._block();const e=this.uploads.filterByStatus(xh.COMPLETE,xh.CANCELLED,xh.FAILED,xh.RESUMABLE);e&&e.length===this.uploads.length&&this._unblock()},_block(){Eh||(Eh=!0,window.addEventListener("beforeunload",Oh))},_unblock(){Eh&&(Eh=!1,window.removeEventListener("beforeunload",Oh))}},{preventUnload(){return Eh}});function kh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Sh(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){kh(e,t,i[t])}))}return e}function Th(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const Ph=Zd.upload,Dh=Object.freeze({all:0,completed:0,running:0,failed:0,resumable:0,cancelled:0,progress:0,remaining:0}),Ch=[Ph.NEW,Ph.PREPARED,Ph.CHECKING,Ph.READY,Ph.QUEUED,Ph.WAITING],Ih=[...Ch,Ph.RUNNING],zh=[Ph.RESUMABLE];var Lh=f.extend({initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.conflictCheck)throw new Error("conflictCheck required");this._subscriptionEvents=["update-stats"],this.uploadItems=new ah,this._stats=Sh({},Dh),this.listenTo(this.uploadItems,"add reset change:status change:progress remove remove:end",this._updateStats),new gh({uploadItems:this.uploadItems}),new _h({uploadItems:this.uploadItems}),new uh({uploadItems:this.uploadItems,conflictCheck:e.conflictCheck}),new yh({uploadItems:this.uploadItems}),new ch({uploadItems:this.uploadItems}),new jh({uploadItems:this.uploadItems})},getUploads(){return this.uploadItems},addFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i={eventId:(new Date).getTime(),folder:new ar(e.attributes,{parse:!0,context:e.getContext()}),status:Ph.NEW};Array.from(t).forEach((e=>{let t=Sh({},i);e.isFile||e.isDirectory?t.entry=e:t.file=e,this.uploadItems.add(t)}),this),this.trigger("add")},_updateStats(){const e=[Ph.COMPLETE,Ph.RUNNING];let t=0;this._stats=this.uploadItems.reduce((function(i,r){let n=r.get("status"),o=Sh({},i);return o.all++,n===Ph.COMPLETE?o.completed++:n===Ph.FAILED?o.failed++:n===Ph.RESUMABLE?o.resumable++:n===Ph.CANCELLED?o.cancelled++:n===Ph.RUNNING?(o.running++,o.remaining++):o.remaining++,t+=e.includes(n)&&r.get("progress")||0,o}),Sh({},Dh)),this._stats.all>0&&(this._stats=Th(Sh({},this._stats),{progress:t/this._stats.all})),this.trigger("update-stats",this._stats)},getStats(){return this._stats},cancel(e){e&&Ih.includes(e.get("status"))&&(e.cancel(),e.set({status:Ph.CANCELLED,progress:0,error:Zd.error.ABORT}))},_resume(e){const t=e.get("statusToResume");e.unset("statusToResume"),e.set({status:t,error:null})},resume(e){e&&zh.includes(e.get("status"))&&this._resume(e)},resumeAll(){this.uploadItems.filterByStatus(...zh).forEach((e=>this._resume(e)))},abort(){this.uploadItems.filterByStatus(...Ch).forEach((e=>e.set({status:Ph.CANCELLED,progress:0,error:Zd.error.ABORT}))),this.cancel(this.uploadItems.findByStatus(Ph.RUNNING))},removeFinished(){const e=this.uploadItems.filterByStatus(Ph.COMPLETE,Ph.FAILED,Ph.CANCELLED,Ph.RESUMABLE);this.uploadItems.remove(e)},reset(){if(this.uploadItems.findByAnyStatus(Ph.RUNNING,Ph.WAITING))throw new Error("Refusing to reset: there's one item in running or waiting state");this.uploadItems.reset()}}),$h=ae.extend({tagName:"span",template:cs.factory(Gc()),initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.uploadManager instanceof Lh))throw new Error("UploadDetailTitleView: UploadManager required.");this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this.render)},templateData(){return{stats:this.uploadManager.getStats()}}}),Mh=ns.extend({tagName:"span",className:"file-input-wrapper",events:{"change input":"_onInputChange","click input":"_onInputClick"},initialize(e){var t,i;this._options=e||{},this.allowMultiple=null===(i=null===(t=this._options)||void 0===t?void 0:t.allowMultiple)||void 0===i||i},render(){return this.$el.empty().append(a()("<input type='file'>").attr(this._getInputAttributes())),this.delegateEvents(),this},_onInputClick(){this.trigger("click")},_onInputChange(){const e=this.$("input");let t=Array.from(e[0].files);e[0].webkitdirectory&&(t=t.length?[new ih(t)]:[]),this.trigger("add",t),this.render()},_getInputAttributes(){const e={multiple:this.allowMultiple};return this._options.directories&&(e.webkitdirectory=!0),e}}),Ah=$a.extend({tagName:"label",trackEvent:"click",initialize(e){$a.prototype.initialize.call(this,e),this._fileInput=new Mh(e),this.listenTo(this._fileInput,"click",this._onFileClick),this.listenTo(this._fileInput,"add",this._onFileAdd)},render(){return $a.prototype.render.apply(this,arguments),this.el.appendChild(this._fileInput.render().el),this},_onFileClick(){this.trigger("click")},_onClick(e){this.trigger("click",e)},_onFileAdd(e){this.execute(e),this.trigger("add",e)}}),Vh=o().View.extend({className:"bar",render(e){return this.el.style.width=`${e}%`,this}}),Fh=i(163),Bh=i.n(Fh);const Nh=Object.values(Zd.upload),Rh=function(e){return"upload-status-"+e},Uh=Nh.map(Rh);var qh=Va.extend({autoRender:!1,template:cs.factory(Bh()),templateData(){return{filegroups:Kt,states:Zd,uploadItemSize:this._getUploadItemSize(),uploadItemError:this._getUploadItemError(),uploadItemStatus:this._getUploadItemStatus()}},initialize(){Va.prototype.initialize.apply(this,arguments),this.progressBar=new Vh,this.metrics=Xd(),this.listenTo(this.model,"change:size change:error",this.render),this.listenTo(this.model,"change:status",this.render),this.listenTo(this.model,"change:progress",this.updateProgress),this.listenTo(this.metrics,"change:decreasing",this.render)},render(){return Va.prototype.render.call(this),this.updateProgress(),this},remove(){return this.progressBar.remove(),Va.prototype.remove.apply(this,arguments)},_addStatusClasses(){const e=this.model.get("status");Uh.forEach((e=>this.el.classList.remove(e))),this.el.classList.add(Rh(e))},updateProgress(){this._renderProgressBar(),this._addStatusClasses(),this._showUploadDataAmount()},_showUploadDataAmount(){const e=this.el.querySelector(".upload-item-progress-amount");e&&(e.innerText=`${this._getUploadItemProgress()}`)},_renderProgressBar(){const e=this.$(".progressbar-container");if(e.length){const t=100*this.model.get("progress");this.progressBar.render(t),e.html(this.progressBar.$el)}},_getUploadItemSize(){return this.model.has("size")?oe.size(this.model.get("size")):G.get("upload.size.calculation")},_getUploadItemProgress(){return this.model.get("size")&&1!==this.model.get("progress")?`${oe.size(this.model.get("size")*this.model.get("progress"))} /`:""},_getUploadItemError(){return this.model.get("error")===Zd.error.EXIST?G.get("upload.error.exists"):this.model.get("error")===Zd.error.EDQUOT?G.get("upload.error.quota"):this.model.get("error")===Zd.error.ABORT?G.get("upload.error.abort"):this.model.get("error")===Zd.error.NETWORK?G.get("upload.error.network"):this.model.get("status")===Zd.upload.FAILED?G.get("upload.error.failed"):""},_getUploadItemStatus(){return this.model.get("status")===Zd.upload.RUNNING&&this.metrics.get("decreasing")?G.get("upload.status.retry"):""}}),Hh=i(5614),Gh=i.n(Hh),Wh=o().View.extend({className:"upload-stats",_template:cs.factory(Gh()),initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this._renderStats)},render(){return this.$el.html(this._template()),this._renderStats(this.uploadManager.getStats()),this},_renderStats(e){const t=e.failed+e.resumable,i=e.all-e.completed-e.cancelled-t;this.$(".uploads-ok-text").text(G.get("upload.detail.stats.transfer",[e.completed,e.all])),this.$(".uploads-error-text").text(G.get("upload.detail.stats.error",[t,e.all])),this.$el.toggleClass("running",!!i),this.$el.toggleClass("error",!!t),this.$el.toggleClass("completed",!!e.completed&&!i)}}),Kh=js.extend({template:cs.factory(qc()),className:"upload-details",autoClose:!1,subviews(){return{list:{klass:Wa,target:".grid-target",options:{collection:this.uploadManager.getUploads(),itemViewClass:qh},listeners:{click:this.onGridClick.bind(this)}},title:{klass:$h,target:".title-target",options:{uploadManager:this.uploadManager}},stats:{klass:Wh,target:".stats-target",options:{uploadManager:this.uploadManager}},close:{klass:hs,target:".button-close-target",appendToTarget:!1,options:{className:"button-close",text:G.get("upload.detail.close"),secondary:!0},listeners:{click:this.close}},minimize:{klass:hs,target:".button-minimize-target",appendToTarget:!1,options:{className:"button-minimize",text:G.get("upload.detail.minimize"),secondary:!0},listeners:{click:this.close}},upload:{klass:Ah,target:".button-more-uploads",appendToTarget:!0,options:{text:G.get("upload.detail.moreuploads"),iconClass:"icon-upload",disabled:!this.model.get("writable")},listeners:{click:this._trackUpload.bind(this),add:this.addUpload.bind(this)}},cancel:{klass:hs,target:".button-cancel-all-target",appendToTarget:!1,options:{className:"button-cancel-all",text:G.get("upload.detail.cancelAll"),linkstyled:!0},listeners:{click:this.onCancelAll.bind(this)}},resumeAll:{klass:hs,target:".button-retry-all-failed-target",options:{text:G.get("upload.detail.retryFailedUploads"),primary:!0},listeners:{click:this.onResumeAll.bind(this)}}}},initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.autoClose&&(this.autoClose=!0),Object.prototype.hasOwnProperty.call(e,"canClose")&&(this.canClose=e.canClose),this.uploadManager=e.uploadManager,this.listenTo(this.uploadManager,"update-stats",this.onUploadStats)},onAfterRender(){this.overlayEl.classList.add("uploaddetail-overlay");const e=this.uploadManager.getStats();this.updateMinimizeButtonState(e),this.updateCloseButtonState(e),this.updateCancelAllButtonState(e),this.updateRetryAllButtonState(e)},updateMinimizeButtonState(e){let{remaining:t}=e;const i=t>0;this.getSubview("minimize").setState(i)},updateCloseButtonState(e){let{remaining:t}=e;const i=0===t;this.getSubview("close").setState(i)},updateCancelAllButtonState(e){let{remaining:t}=e;const i=t>0;this.getSubview("cancel").setState(i)},updateRetryAllButtonState(e){let{remaining:t,resumable:i}=e;const r=0===t&&i>0;this.getSubview("resumeAll").setState(r)},onBeforeClose(){this.uploadManager.getStats().remaining||this.uploadManager.removeFinished(),me.track({op:"upload-status-hide",target:"overlay"})},addUpload(e){this.uploadManager.addFiles(this.model,e)},_trackUpload(){me.track({op:"upload",target:"overlay"})},onCancelAction(e,t){t.data=e.get("status"),this.uploadManager.cancel(e)},onResumeAction(e,t){t.data=e.get("error"),this.uploadManager.resume(e)},onCancelAll(){this.uploadManager.abort()},onResumeAll(){this.uploadManager.resumeAll()},onGridClick(e,t,i){if(e){const t=i.target.closest("[data-action]"),r={cancel:"onCancelAction",resume:"onResumeAction"};let n={};if(!t)return;const o=t.dataset.trackOp,s=t.dataset.trackTarget;o&&s&&(n={op:o,target:s});const a=this[r[t.dataset.action]];"function"==typeof a&&a.call(this,e,n),n.op&&n.target&&me.track(n)}},onUploadStats(e){this.updateMinimizeButtonState(e),this.updateCloseButtonState(e),this.updateCancelAllButtonState(e),this.updateRetryAllButtonState(e),this.autoClose&&0===e.remaining&&0===e.failed&&this.close()}}),Yh=i(9286),Xh=i.n(Yh);let Zh=je.TILES;const Jh=document.createElement("DIV");Jh.classList.add("s-hide"),document.body.appendChild(Jh),"none"===window.getComputedStyle(Jh).display&&(Zh=je.LIST),document.body.removeChild(Jh);var Qh=Zh;var eu=U.extend({initialize(){this.attributes.viewMode||this.set({viewMode:Qh})},set(){let e,t=!1;return"viewMode"===arguments[0]?(e=arguments[1],t=!0):"object"==typeof arguments[0]&&"viewMode"in arguments[0]&&(e=arguments[0].viewMode,t=!0),t&&(i=e,!Object.values(je).includes(i))?this:U.prototype.set.apply(this,arguments);var i}});const tu=ae.extend({tagName:"span",events:{click:"onClick"},template:cs.factory('\n\t\t<span class="icon icon-view"></span>\n\t\t<span class="label"><%= lang.get("viewModeFlyout.title") %></span>\n\t'),onAfterRender(){return this.el.setAttribute("title",G.get("viewModeFlyout.title")),this},onClick(){this.trigger("click")}}),iu=ae.extend({className:"content",events:{"click .tile":"setViewMode"},template:cs.factory(Xh()),templateData(){return{viewModeList:[{name:je.LIST,title:G.get("viewmode.list")},{name:je.TILES,title:G.get("viewmode.tiles")},{name:je.FLUID,title:G.get("viewmode.fluid")}]}},setViewMode(e){const t=e.target.closest(".tile").getAttribute("data-cid");this.model.set("viewMode",t),me.track({op:"switch-viewmode",data:this.model.get("viewMode"),viewmode:t}),this.trigger("close")}});var ru=Ml.Flyout.extend({initialize(){if(!(this.model instanceof eu))throw new Error("ViewModeFlyout: ViewModeModel required.");this.triggerView=new tu({model:this.model}),this.contentView=new iu({model:this.model}),this.listenTo(this.triggerView,"click",this.toggle),this.listenTo(this.contentView,"close",this.close),this.listenTo(this.model,"change:viewMode",function(){this.contentView.render()}.bind(this)),Ml.Flyout.prototype.initialize.apply(this,arguments)},render(){return Ml.Flyout.prototype.render.call(this),this.el.classList.add("fm-viewmode-flyout"),this}}),nu=i(3619),ou=i.n(nu),su=ae.extend({className:"fm-viewmode-switcher",events:{"click .mode":"_onClick"},template:cs.factory(ou()),templateData(){return{state:this.state,viewModeList:[{name:je.LIST,title:G.get("viewmode.list")},{name:je.TILES,title:G.get("viewmode.tiles")},{name:je.FLUID,title:G.get("viewmode.fluid")}]}},initialize(){if(!(this.model instanceof eu))throw new Error("ViewModeFlyout: ViewModeModel required.");this.listenTo(this.model,"change:viewMode",this.render)},_onClick(e){const t=e.currentTarget.getAttribute("data-cid");this.model.set("viewMode",t)}}),au=de.View.extend({className:"appView",template:cs.factory(Bc()),initialize(){this.views={};const e=ue.get("fm_sort_key"),t=ue.get("fm_sort_dir"),i=new Rc;this.viewModeModel=new eu({viewMode:je.TILES}),this.uploadManager=new Lh({conflictCheck:i.check.bind(i)}),this.listenTo(this.uploadManager,"add",this.onUploadAdded),this._filemanagerModel=new Fd({},{sortCol:e,sortDir:t}),this.listenTo(this._filemanagerModel,"change",this.onFilesUpdated),this.listenTo(this._filemanagerModel.files,"sortBy",this.onSortBy),this.listenTo(this._filemanagerModel.files,"load add add:end remove remove:end selectAll deselectAll change:selected",this.onFilesUpdated),this.listenTo(this._filemanagerModel.files,"selectAll deselectAll change:selected",this._onFilesSelectionChanged),this.listenTo(this._filemanagerModel.files,"load:start",this.onLoadStart),this.listenTo(xe,"api:rename:error",this.onRenameError),this.listenTo(Ml.OverlayManager.instance(),"pushed:first",this.onOverlayRendered),this.listenTo(Ml.OverlayManager.instance(),"popped:last",this.onOverlayRemoved),we.initialize(),this.folderUpdateService=new hd({folder:this._filemanagerModel}),this.states={delete:new bs({action:()=>{ye.execute("deleteFiles",this._filemanagerModel.files.getSelected())}}),downloadAll:new bs({action:()=>{ye.execute("download",this._filemanagerModel)}}),downloadSelection:new bs({action:()=>{ye.execute("download",this._filemanagerModel)}}),newFolder:new bs({action:async()=>{try{const e=await ye.execute("newFolder",this._filemanagerModel);this.getSubview("filemanager").scrollIntoView(e.id)}catch(e){}}}),rename:new bs({action:async()=>{try{const e=await ye.execute("rename",this._filemanagerModel.files.firstSelected());this.getSubview("filemanager").scrollIntoView(e.id)}catch(e){}}}),select:new bs({action:()=>{this._filemanagerModel.files.selectAll()}}),unselect:new bs({action:()=>{this._filemanagerModel.files.deselectAll()}}),upload:new bs({action:e=>{this.uploadManager.addFiles(this._filemanagerModel,e)}})}},subviews(){const e=new vc({model:this._filemanagerModel,attributes:{"data-qa":"toolbar_sortFlyout"}}),t=new ru({model:this.viewModeModel}),i=new su({model:this.viewModeModel}),r={header:{klass:Sd,target:".header-target",listeners:{logout:()=>this.trigger("navigate","logout",{trigger:!0})}},footer:{klass:Ed,target:".footer-target",listeners:{"change:lang":e=>{o().history.navigate(`#lang/${e}`,{trigger:!0,replace:!1})}}},menubar:{klass:Ml.Menubar,target:".menubar-target",options:{className:"menubar",items:{upload:new Ah({text:G.bind("toolbar.item.upload"),state:this.states.upload,iconClass:"icon-upload",attributes:{"data-qa":"menubar_upload"}}),downloadAll:new Ml.IconButton({state:this.states.downloadAll,text:G.bind("filemanager.downloadAll"),iconClass:"icon-toolbar-download",attributes:{"data-qa":"menubar_download_all"}}),downloadSelection:new Ml.IconButton({state:this.states.downloadSelection,text:G.bind("filemanager.downloadSelected"),iconClass:"icon-toolbar-download",attributes:{"data-qa":"menubar_download_selection"}}),more:new Ad({text:G.bind("toolbar.item.more"),iconClass:"icon-more",alignment:"bottom right",origin:"top right",buttonAttributes:{"data-qa":"menubar_more_button"},items:[{text:G.bind("filemanager.newfolder.button"),state:this.states.newFolder,tracking:{op:"new-folder",target:"moreButton"},attributes:{"data-qa":"menubar_new_folder"}},{itemClass:sl},{text:G.bind("common.rename"),state:this.states.rename,tracking:()=>({op:"rename-start",target:"moreButton",viewmode:this.viewModeModel.get("viewMode")}),attributes:{"data-qa":"menubar_rename"}},{text:G.bind("moremenu.files.delete"),state:this.states.delete,tracking:{op:"delete-start",target:"moreButton"},attributes:{"data-qa":"menubar_delete"}},{itemClass:sl},{text:G.bind("filemanager.selectall"),state:this.states.select,tracking:{op:"selectAll",target:"moreButton"},attributes:{"data-qa":"menubar_selection"}},{text:G.bind("filemanager.deselectAll"),state:this.states.unselect,tracking:{op:"deselectAll",target:"moreButton"},attributes:{"data-qa":"menubar_selection_cancel"}}]})}}},toolbar:{klass:Ml.Menubar,target:".toolbar-target",options:{className:"toolbar",items:{sortFlyout:e,viewModeFlyout:t,viewModeSwitcher:i}}},login:{klass:Md,target:"#content",appendToTarget:!0,options:{loginCallback:V.get().login.bind(V.get())}},loading:{klass:de.View,target:"#content",appendToTarget:!0,options:{className:"loading-page",template:zd()}},error:{target:"#content",appendToTarget:!0,klass:Cd},teaser:{target:"#content",appendToTarget:!0,klass:sc},folderFlyout:{klass:Nl,target:".folder-flyout-target",options:{model:this._filemanagerModel,segmentBuilder:mc.get((()=>F.urlDecode(this.rootName)))},listeners:{navigate:this.onFolderFlyoutNavigate.bind(this)}},filemanager:{klass:_c,target:"#content",appendToTarget:!0,options:{component:ba,props:{model:this._filemanagerModel,collection:this._filemanagerModel.files,uploadManager:this.uploadManager,emptyTpl:_e(),errorTemplate:cs.factory(wa()),viewModeModel:this.viewModeModel},listeners:{open:this.onOpen.bind(this)}}},sharelink:{klass:pc,target:"#content",appendToTarget:!0,listeners:{error:e=>this.trigger("error",e)}},toast:{klass:_c,target:".toast-svelte",appendToTarget:!0,options:{component:Vc}}};return r},onUploadAdded(){if(!this.uploadDetailsOpen){new Kh({uploadManager:this.uploadManager,model:this._filemanagerModel,autoClose:!1,canClose:!1}).open().then((()=>{this.uploadDetailsOpen=!1})),this.uploadDetailsOpen=!0}},_onMessage(e){ye.execute("showToast",e)},onRenameError(e,t,i){const r=[oe.breakable(e.get("display_name"))],n=409===i.status?G.bind("filemanager.rename.toast.error.exists",r):G.bind("filemanager.rename.toast.error.general",r);this._onMessage({msg:n})},onSortBy(e,t){ue.set("fm_sort_key",e),ue.set("fm_sort_dir",t)},onAfterRender(){this._disableActions()},show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t.path||"/";switch(this._hideOtherPages(e),this.getSubview("toolbar").setActive(!1),this.el.setAttribute("data-page",e),e){case"error":this._showViews(["error","teaser"],t);break;case"login":this._showViews(["login","teaser"],t.error?t:null);break;case"filemanager":this.viewModeModel.set({viewMode:dn.fromApi(t.viewmode)}),this._showViews(["folderFlyout","filemanager"]),this._filemanagerModel.load(i);break;case"sharelink":this._showViews(["sharelink"],t);break;case"loading":this._showViews(["loading"])}},_hideOtherPages(e){const t=Object.keys(this.subviews()),i=["header","footer","menubar","toast",e];t.filter((e=>i.indexOf(e)<0)).forEach((e=>{this.getSubview(e).el.classList.add("hidden")}))},_showViews(e,t){e.forEach((e=>{this.getSubview(e).el.classList.remove("hidden"),t&&this.getSubview(e).render(t)}))},setRoot(e){this.rootName=e},onOverlayRendered(){document.body.classList.add("overlayed")},onOverlayRemoved(){document.body.classList.remove("overlayed")},onOpen(e,t){const i=e.get("type");i===$e.directory?this._filemanagerModel.load(e.get("path")):i!==$e.symlink&&ye.execute("showFile",e,t)},onFolderFlyoutNavigate(e){this._filemanagerModel.load(e)},onLoadStart(e){this.trigger("navigate","$"+e),this.getSubview("toolbar").setActive(!1),this._disableActions()},onFilesUpdated(){const e=this.getSubview("toolbar"),t=this._filemanagerModel,i=this._filemanagerModel.files.getSelectionSummary(),r=!!t.get("writable");e.setActive(!!i.selectable),this._setState("delete",r&&!!i.total),this._setState("downloadAll",!!i.selectable&&!i.total),this._setState("downloadSelection",!i.byExt.webupload&&i.total>0),this._setState("newFolder",r&&!i.total),this._setState("rename",r&&!!i.renamable&&1===i.total),this._setState("select",i.selectable>i.total),this._setState("unselect",i.total>0),this._setState("upload",r&&!i.total)},_disableActions(){Object.keys(this.states).forEach((e=>{this.states[e].setState(!1)}))},_setState(e,t){this.states[e].setState(t)}}),lu=["max-age","domain","comment","commenturl","path","secure","version","discard","port"];function du(){var e=g.getHostname().split(".");return e.length>2&&e.splice(0,1),e.join(".")}function cu(e,t){return e+"="+t}var hu={set(e,t,i){var r,n;if("string"!=typeof e)throw new Error("cookie.set: name must be string");if(lu.indexOf(e.toLowerCase())>-1)throw new Error("cookie.set: name ("+e+") must not be a preserved keyword");if("string"!=typeof t)throw new Error("cookie.set: value must be string");r={"max-age":i||31536e4,SameSite:"Strict"},w.get("setParentDomainCookies")&&(r.domain=du()),r=Object.entries(r).map((e=>{let[t,i]=e;return cu(t,i)})).join("; "),n=cu(encodeURIComponent(e),encodeURIComponent(t)),g.setCookie(n+"; "+r)},get(e){var t,i,r;if(!e)throw new Error("cookie.get: no name parameter defined");return r=encodeURIComponent(e),t=new RegExp("(?:^|; )"+r+"=([^;]*)(?:;|$)"),(i=g.getCookie().match(t))?decodeURIComponent(i[1]):null},remove(e){var t;if(!e)throw new Error("cookie.remove: no name parameter defined");t=encodeURIComponent(e)+"=; max-age=0",w.get("setParentDomainCookies")&&(t+="; domain="+du()),g.setCookie(t)}},uu=i(5859),pu=i.n(uu),gu=o().View.extend({className:"eu-cookie",events:{"click .close":"onClose"},initialize(e){var t={show_cb:d().noop,hide_cb:d().noop,cookieName:"eu_cookie",cookieVersion:1};this.config=d().extend({},t,e),w.get("EuCookieVersion")&&(this.config.cookieVersion=w.get("EuCookieVersion")),w.get("EuCookieName")&&(this.config.cookieName=w.get("EuCookieName")),this.render()},onClose(){var e=this;this.createCookie()&&this.$el.fadeOut("fast",(function(){e.config.hide_cb.apply(e),e.remove()}))},isValidCookieVersion(){var e=hu.get(this.config.cookieName);return null!==e&&""!==e&&(e=parseInt(e,10),!isNaN(e)&&e>=this.config.cookieVersion)},isEnabled(){return w.get("hasEuCookie")},createCookie(){return hu.set(this.config.cookieName,this.config.cookieVersion.toString()),this.isValidCookieVersion()},render(){return this.isEnabled()&&!this.isValidCookieVersion()?(this.$el.html(cs.factory(pu())({text:G.get("eu_cookie.text"),url:xd.getUrls().euCookie,url_text:G.get("eu_cookie.url_text")})),this.config.show_cb.apply(this)):(this.isEnabled()||hu.remove(this.config.cookieName),this.remove()),this}}),mu=de.Object.extend({initialize(e,t){if("number"!=typeof e||e<2)throw new Error("length must be number greater 1");if("number"!=typeof t||t<1)throw new Error("interval must be number greater 0");this._length=e,this._interval=t,this.reset()},update(){this._streak.push((new Date).getTime()),this._streak.length>this._length&&this._streak.shift()},hasStreak(){return this._streak.length===this._length&&this._streak[this._length-1]-this._streak[0]<=this._interval},reset(){this._streak=[]}});function fu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function bu(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){fu(e,t,i[t])}))}return e}function yu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var wu=de.Object.extend({REAUTH_STREAK_LENGTH:5,REAUTH_STREAK_INTERVAL:1e4,initialize(){this._reauthStreakDetector=new mu(this.REAUTH_STREAK_LENGTH,this.REAUTH_STREAK_INTERVAL),this._access_token=null,this._reauth_fn=null},init(e){e.reauth_fn&&(this._reauth_fn=e.reauth_fn),e.access_token&&(this._access_token=e.access_token)},getAccessToken(){return this._access_token},isAuthorized(){return!!this._access_token},_invalidateAuthorization(){this._access_token=null},addAuthToUrl(e){const t=this.getAccessToken();return t?li.addReplaceParam(e,"access_token",t):""},addAuthToXhr(e,t){this.getAccessToken()&&(e.beforeSend=function(e){e.setRequestHeader("Authorization","Bearer "+this._access_token),t&&t(e)}.bind(this))},ajax(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isAuthorized())throw new Error("not logged in");const t=yu(bu({},{timeout:9e4,retry:!0},e),{error:void 0});this.addAuthToXhr(t,e.beforeSend);const i=a().ajax(t),r=function(){return this._reauthStreakDetector.reset(),i}.bind(this),n=function(r,n){const o=e.error||function(){},s=e.context||this;return"timeout"===n?(o.apply(s,arguments),i):this._shouldReauth(r,t.retry)?(this._invalidateAuthorization(),this._reauth_fn().then(this.ajax.bind(this,e),(function(){return i}))):(o.apply(s,arguments),i)}.bind(this);return bu({},i,i.then(r,n))},_shouldReauth(e,t){return 401===e.status&&(!!t&&(!!this._reauth_fn&&(this._reauthStreakDetector.update(),!this._reauthStreakDetector.hasStreak())))}});function vu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}var xu=wu.extend({_shareInfo:{},initialize(){this._sid=null,this._password_login=!1,this._sessionTimer=void 0,wu.prototype.initialize.apply(this,arguments)},init(e){e.sid&&(this._sid=e.sid),wu.prototype.init.apply(this,arguments)},_invalidateAuthorization(){this._password_login=!1,wu.prototype._invalidateAuthorization.apply(this)},hasPassword(){return this._password_login},getShareInfo(){return a().get("/api/share/info",{id:this._sid}).then((e=>(this._shareInfo=Object.freeze(e),this.getFeatures())))},getFeatures(){return this._shareInfo},getUser(){return{home:M.rootPath}},login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{password:null},t={id:this._sid};return e.password&&(t=_u(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){vu(e,t,i[t])}))}return e}({},t),{password:e.password}),this._password_login=!0),a().ajax({url:"/api/share/token",method:"POST",data:t}).then((e=>(this._access_token=e.access_token,e.expires_in&&this._updateTimer(e.expires_in),t.password&&(e.password=t.password),this.trigger("login:success",e),e)),(e=>(this._password_login=!1,this.trigger("login:error",e.status),e))).always((()=>{this.trigger("auth")}))},_updateTimer(e){const t=Number(e);if(this._removeTimeout(),isNaN(t))return;const i=1e3*t-18e4;this._sessionTimer=setTimeout(this._refreshSession.bind(this),i)},_refreshSession(){const e=new URLSearchParams;e.append("id",this._sid),fetch("/api/share/token",{method:"POST",body:e,headers:{Authorization:"Bearer "+this._access_token}}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((e=>{this._access_token=e.access_token,e.expires_in&&this._updateTimer(e.expires_in)})).catch((()=>{this._removeTimeout(),this._invalidateAuthorization(),g.setLocation(g.getPathname())})).finally((()=>{this.trigger("auth")}))},_removeTimeout(){this._sessionTimer&&clearTimeout(this._sessionTimer)},logout(){return this.ajax({url:"/api/share/token",method:"DELETE"}).done((()=>{this._invalidateAuthorization(),this.trigger("logout:success"),this.trigger("auth")}))}});function Eu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ou=fe.extend({defaultRoute:"$/",sid:null,views:{},routes:{"$*path":"path","!:error":"error","login(/:state)":"login",logout:"logout",file:"sharelink"},initialize(){V.register(M.authContext.default,(function(){return new xu})),fe.prototype.initialize.apply(this,arguments),this.initialRoute=g.getLocation().hash.replace(/^#$/,""),this.listenTo(this.auth,"login:success",this._onLoginSuccess),this.listenTo(this.auth,"login:error",this._onLoginError)},start(){const e=g.getLocation().pathname,t=e.match(/lnk\/([a-zA-Z0-9.-]{8,14})/),i=e.match(/share\/([a-zA-Z0-9.-]{8,14})/);this.navigate(),this.initialRoute.search(/^#lang\/.*$/)>-1&&this.navigate(this.initialRoute,!0),t?(this.sid=t[1],this.navigate("file",{replace:!0,trigger:!0})):i?(this.sid=i[1],this.authenticate()):this.navigate("!404",!0)},_onLoginSuccess(e){this.appView.setRoot(e.root_name);const t=this.initialRoute.replace(/^#[^$/].*/,"$/")||"$/";this.navigate(t,{trigger:!0,replace:!1})},_onLoginError(e){if(g.getLocation().hash.match(/#login/)){let t=500;403!==e&&401!==e||(t="password"),this.appView.show("login",{error:t})}else 401===e?this.navigate("login",{trigger:!0,replace:!1}):this.navigate("!"+e,{trigger:!0,replace:!1})},_onReauthError(e){401===e.status?this.navigate("login/expired",{trigger:!0,replace:!0}):404===e.status?this.navigate("!404",!0):this.navigate("!500",!0)},authenticate(){const e=this;this.sid?(this.auth.init({sid:this.sid,reauth_fn:function(){return this.auth.login().fail(this._onReauthError.bind(this))}.bind(this)}),this.auth.getShareInfo().done((function(t){t.is_encrypted?e.navigate("!500",!0):t.has_password?e.navigate("login",!0):e.auth.login()})).fail((function(t){let i=t.status;400===i&&(i=404),e.navigate("!"+i,!0)}))):this.navigate("!404",!0)},buildViews(){this.appView?this.appView.render():(this.appView=new au,this.listenTo(this.appView,"navigate",(function(e,t){const i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Eu(e,t,i[t])}))}return e}({trigger:!1},t);this.navigate(e,i)})).listenTo(this.appView,"error",this.error),document.body.replaceChildren(this.appView.render().el)),this.eu_cookie&&this.eu_cookie.remove(),this.eu_cookie=new gu({show_cb(){document.body.prepend(this.el),document.body.classList.add("show_eu_cookie")},hide_cb(){document.body.classList.remove("show_eu_cookie")}}),this.appView.show("loading")},login(e){this.appView.show("login",{error:e})},logout(){V.get().logout().always(function(){g.setLocation(g.getPathname())}.bind(this))},path(e){this.auth.isAuthorized()?this.appView.show("filemanager",{path:e,viewmode:this.auth.getFeatures().viewmode}):this.navigate("login",!0)},error(e){this.appView.show("error",{code:e})},sharelink(){this.appView.show("sharelink",{sid:this.sid})}});var ju=Ou;const ku=e=>e.get("teamfolder");var Su="a-z, 0-9",Tu=Su.split(", ").join(""),Pu=new RegExp("^["+Tu+"]["+Tu+".-]{3,38}["+Tu+"]$"),Du={min:5,max:40,chars:Su,spec:".-",validate(e){var t=a().Deferred();return Pu.test(e)?t.resolve():t.reject(),t.promise()}},Cu={validate(){return a().Deferred().resolve().promise()}},Iu=new RegExp("^.{3,80}$");const zu=[".",".."];const Lu=/[/]|^$/;var $u={validate(e){return eo.userAvailable(e.trim()).then(null,(function(e,t){return"taken"===e?a().Deferred().reject("taken").promise():"error"===e&&400===t.status?a().Deferred().reject("bad-request").promise():a().Deferred().reject("internal-error").promise()}))}},Mu={alias:Du,alwaysValid:Cu,descr:{min:3,max:80,validate(e){var t=a().Deferred();return""===e||Iu.test(e)?t.resolve():t.reject(),t.promise()}},email:{validate(e){var t=a().Deferred();return/^.+@.+$/.test(e)?t.resolve():t.reject(),t.promise()}},filename:{validate(e){const t=a().Deferred();return Lu.test(e)?t.reject():t.resolve(),t.promise()}},filenameMaxLength:{validate(e){const t=a().Deferred();return(new TextEncoder).encode(e).length>254?t.reject():t.resolve(),t.promise()}},filenameReserved:{validate(e){const t=a().Deferred();return zu.some((t=>t===e))?t.reject():t.resolve(),t.promise()}},userAvailable:$u};function Au(e){return d().isObject(e)?function(e){if(!d().isString(e.id)||0===e.id.trim().length)throw new Error("invalid custom validator id '"+e.id+"'");if(!d().isFunction(e.validate))throw new Error("invalid validate() function for custom validator '"+e.id+"'");return{id:e.id,validate:e.validate}}(e):function(e){var t=Mu[e];if(!t)throw new Error("unknown validator '"+e+"'");return{id:e,validate:t.validate}}(e)}var Vu={combine(e){var t,i,r,n;if(!Array.isArray(e)||0===e.length)throw new Error("validationSteps array required");if(t=d().map(e,Au),r=t,n=d().countBy(r,"id"),(i=d().reduce(n,(function(e,t,i){return t>1&&e.push(i),e}),[])).length)throw new Error("duplicate validation step ids: "+i.join(", "));return function(e){return d().reduce(t,(function(t,i){return t.then((function(){return i.validate(e).then(null,(function(e){return a().Deferred().reject(i.id,e)}))}))}),a().Deferred().resolve().promise())}}},Fu={validate(e,t){const i=a().Deferred();return eo.getMeta({pid:e,path:t,context:M.authContext.default,fields:["id"]}).then((()=>{i.reject("exists")}),(()=>{i.resolve()})),i.promise()}},Bu=i(4635),Nu=i.n(Bu),Ru=js.extend({tagName:"form",className:"sj-form-horizontal",events:{submit:"_onSubmit"},template:cs.factory(Nu()),initialize(){let{parentFolder:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e instanceof rd))throw new Error("newFolderDialog: parentFolder model required.");this._parentFolder=e},onAfterRender(){this.overlayEl.classList.add("new-folder-dialog")},onAfterOpen(){this.getSubview("nameEditor").focus()},subviews(){const e={default:()=>G.get("file.overlay.create.name.tooltip.info"),requiredInput:()=>G.get("folder.error.required"),pathAvailable:()=>G.get("file.overlay.create.name.tooltip.exists"),filenameMaxLength:()=>G.get("common.error.name.maxLength"),filenameReserved:e=>G.get("folder.error.reservedName",e)};return{nameEditor:{klass:wl,target:".name-editor-target",options:{name:"folder-name",required:!0,validationFunc:Vu.combine(["filenameMaxLength","filenameReserved","filename",{id:"pathAvailable",validate:e=>Fu.validate(this._parentFolder.getPid(),e)}]),ariaLabel:G.get("filemanager.newFolderDialog.title")},listeners:{focus:()=>{this.getSubview("nameEditor").showTooltip()},blur:()=>{this.getSubview("nameEditor").hideTooltip()},"validate:error":(t,i)=>{const r=(e[i]||e.default)(t),n=this.getSubview("nameEditor");n.setTooltipHtml(r),n.showTooltip()},"validate:success":()=>{this.getSubview("nameEditor").setTooltipHtml(e.default())}}},okButton:{klass:hs,target:".ok-button-target",options:{text:G.get("common.create"),attributes:{"data-qa":"button_ok",type:"submit"}}},cancelButton:{klass:hs,target:".cancel-button-target",options:{text:G.get("common.cancel"),secondary:!0,attributes:{"data-qa":"button_cancel"}},listeners:{click:()=>this.close()}}}},async _onSubmit(e){e.preventDefault(),this.setIsLoading(!0);const t=this.getSubview("nameEditor");try{await t.validate()}catch(e){return this.setIsLoading(!1),void t.focus()}const i=t.getValue();try{const e=await eo.newFolder(this._parentFolder,i);me.track({op:"new-folder",data:"created"}),this.close(e)}catch(e){me.track({op:"new-folder",data:`error.code.${e.status}`}),this.showError({message:G.get("filemanager.newfolder.error.common"),okButtonText:G.get("confirm.ok")})}}});var Uu=i(4716),qu=i.n(Uu),Hu={discover(e){return new Promise(((t,i)=>{void 0===e&&i("fileExtension is missing on discover()"),"string"!=typeof e&&i(`fileExtension is not supported: ${e}`),e.length||i("fileExtension is empty string"),fetch("/hosting/discovery").then((e=>(200!==e.status&&i(`Could not find discover document, status: ${e.status}`),e.text()))).then((e=>{const t=(new window.DOMParser).parseFromString(e,"text/xml");return t.querySelector("parsererror")&&i(`Could not parse as XML: ${e}`),t})).then((r=>{const n=r.querySelector(`action[ext=${e}]`);null===n&&i(`Fileinfo not found for "${e}"`);const o=n.getAttribute("urlsrc");null===o&&i(`No officeIframeUrl found for "${e}"`);const s=n.getAttribute("name");null===s&&i(`No editing information found for "${e}"`),t({isEditable:"edit"===s,officeIframeUrl:o})})).catch(i)}))}},Gu=i(6305),Wu=i(8873),Ku=i.n(Wu);function Yu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Xu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function Zu(e){const t=Object.getOwnPropertyNames(e);for(const i of t){const t=e[i];t&&"object"==typeof t&&Zu(t)}return Object.freeze(e)}var Ju={async get(){return Zu(await eo.getProperties())},async setProperty(e,t){const i=Zu(Xu(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Yu(e,t,i[t])}))}return e}({},await eo.getProperties()),{[e]:t}));return await eo.updateProperties(i),i}},Qu=i(1508),ep=U.extend({idAttribute:"category",defaults:{can_order:!1}});function tp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ip(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}const rp=M.addonCategories,np=Object.values(rp).reduce(((e,t)=>ip(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){tp(e,t,i[t])}))}return e}({},e),{[t]:!0})),{}),op={[rp.storage]:1,[rp.office]:2,[rp.users]:3,[rp.deviceBackups]:4,[rp.protocols]:5,[rp.encryption]:6,[rp.hotline]:7};var sp=wi.extend({model:ep,comparator(e,t){return e.get("can_order")!==t.get("can_order")?t.get("can_order")-e.get("can_order"):op[e.get("category")]-op[t.get("category")]},sync(e,t,i){const r=eo.getOrderableAddons();return r.then(i.success,i.error),r},parse(e){const t=V.get().getFeatures();let i=[];w.get("hasUpsellableStorage")&&i.push({category:rp.storage,can_order:!0}),t.protocols&&t.protocols.indexOf("rsync")>=0&&i.push({category:rp.protocols,can_order:!1}),t.backup&&i.push({category:rp.deviceBackups,can_order:!1}),t.encryption&&i.push({category:rp.encryption,can_order:!1}),t.wopi&&i.push({category:rp.office,can_order:!1});const r=e.filter((e=>!!np[e.category])).filter((e=>!i.some((t=>{let{category:i}=t;return i===e.category}))));return i.concat(r)}});const ap=new sp;var lp={get(){return ap}},dp=i(1209),cp=i.n(dp),hp=js.extend({className:"office-dialog-content",template:cs.factory(cp()),onBeforeRender(){this.overlayEl.classList.add("office-dialog")},subviews(){return{orderButton:{klass:hs,target:".order-button-target",options:{className:"order",text:G.get("order.category.upgrade"),attributes:{"data-qa":"officedialog_order_button"}},listeners:{click:this._orderOffice.bind(this)}},closeButton:{klass:hs,target:".close-button-target",options:{className:"close",text:G.get("order.office.dialog.cancel"),linkstyled:!0,attributes:{"data-qa":"officedialog_close_button"}},listeners:{click:()=>this.close()}}}},templateData:{officeSVG:Qu},onAfterOpen(){const e=Date.now();Ju.setProperty(M.accountProperty.upsellOfficeSeen,e).catch((e=>{}))},async _orderOffice(){try{await ye.execute("orderAddon",M.addonCategories.office),this.close(!0)}catch(e){}}},{async mustShow(){const e=lp.get().get(M.addonCategories.office);if(!e)return!1;if(!e.get("can_order"))return!1;try{return!(await Ju.get()).upsellOfficeSeen}catch(e){return!1}}}),up=i(7285),pp=i.n(up),gp=ae.extend({tagName:"office-topbar",template:cs.factory(pp()),events:{"click .close":"_onClose"},subviews(){return{upgrade:{klass:hs,target:".upgrade-target",options:{text:G.get("order.category.upgrade"),attributes:{type:"submit",class:"upgrade","data-qa":"office_upgrade_upgrade"}},listeners:{click:async()=>{try{await ye.execute("orderAddon",M.addonCategories.office),this._onClose()}catch(e){}}}}}},_onClose(){this.trigger("close")}},{mustShow(){const e=lp.get().get(M.addonCategories.office);return!!e&&e.get("can_order")}}),mp=js.extend({overlayTemplate:cs.factory(Ku()),overlayTemplateData(){return{fileDisplayName:this.model.get("display_name"),logo:Gu,showTopbar:gp.mustShow()}},overlayContentContainer:".office-editor-content",className:"office-editor",initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e.model&&e.model instanceof ar))throw new Error("OfficeEditor: FileModel required");this.setIsLoading(!0)},querySelector(e){return this.overlayEl.querySelector(e)},subviews(){return{upsellTopbar:{klass:gp,target:".topbar-wrapper",appendToTarget:!0,listeners:{close:()=>this._removeTopbar()}}}},onAfterOpen(){hp.mustShow().then((async e=>{if(e){await(new hp).open()&&this._removeTopbar()}}));const e=eo.wopiInit(this.model.getPid()),t=new Promise(((e,t)=>{if(w.get("_office_iframe_url")){const t=(new Date).getTime();return void e(w.get("_office_iframe_url")+`?cacheBuster=${t}&`)}const i=this.model.get("ext");Hu.discover(i).then((t=>{let{officeIframeUrl:i}=t;e(i)}),t)}));Promise.all([e,t]).then((e=>{let[{access_token:t,file_id:i},r]=e;this.setIsLoading(!1);const n=`${w.get("_api_base_url")||`https://${g.getHostname()}/api`}/wopi/files/${i}`;this.el.innerHTML=cs.factory(qu())({url:`${r}WOPISrc=${encodeURIComponent(n)}&lang=${G.getLang()}`,accessToken:t}),this.el.querySelector("form").submit()}),(()=>{this.close(),ye.execute("showToast",{msg:G.bind("office.open.error",oe.breakable(this.model.get("display_name"))),type:"negative"})}))},onAfterRender(){this.overlayEl.classList.add("office-overlay")},_removeTopbar(){this.getSubview("upsellTopbar").remove()}});var fp="<>:\"/|?*\\\\'",bp=new RegExp("["+fp+"]"),yp=/^[\s|.]+|[\s|.]$/,wp=new RegExp("^("+["s?bin","boot","dev","etc","home","lib[0-9]*","media","mnt","opt","run","srv","tmp","usr","var","devices","export","jumpstart","kernel","nsr","root","platform","proc","reconfigure","system","zg0","CON","PRN","AUX","NUL","COM[1-9]","LPT[1-9]","users"].join("|")+")$","i");var vp={badChars:fp.replace(/\\/,""),validate(e){var t=a().Deferred();return bp.test(e)?t.reject("notAllowedChars"):yp.test(e)?t.reject("noPrefixPostfix"):wp.test(e)?t.reject("reservedName"):new Blob([e]).size>251?t.reject("maxLength"):t.resolve(),t.promise()}},_p={validate(e){var t=a().Deferred(),i=M.rootPath+e;return eo.getTeamfolder({path:i}).then((function(){t.reject("exists")}),(function(){t.resolve()})),t.promise()}},xp=i(9350),Ep=i.n(xp),Op=js.extend({tagName:"form",className:"sj-form-horizontal",events:{submit:"_onSubmit"},template:cs.factory(Ep()),templateData(){return{isDirectory:this.model.get("type")===$e.directory}},initialize(){let{fileItem:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(e instanceof ar))throw new Error("renameFileDialog: fileModel is required.");this.model=e},onAfterRender(){this.overlayEl.classList.add("rename-file-dialog")},onAfterOpen(){const e=this.getSubview("nameEditor");e.setValue(this.model.get("display_name"),!0),e.setSelection(this.model.get("base_name").length)},subviews(){const e={default:()=>G.get("file.overlay.create.name.tooltip.info"),requiredInput:()=>G.get("common.error.name.required"),pathNotAvailable:()=>G.get("file.overlay.create.name.tooltip.exists"),filenameMaxLength:()=>G.get("common.error.name.maxLength"),teamfolderPathNotAvailable:()=>G.bind("teamfolder.create.name.tooltip.exists"),filenameReserved:e=>G.get("file.error.reservedName",e)};let t=["filenameMaxLength","filenameReserved","filename",{id:"pathNotAvailable",validate:e=>Fu.validate(this.model.get("parent_id"),e)}];return this.model.get("teamfolder")&&(t=[{id:"badTeamfolderName",validate:e=>vp.validate(e)},{id:"teamfolderPathNotAvailable",validate:_p.validate}]),{nameEditor:{klass:wl,target:".name-editor-target",options:{name:"file-name",required:!0,validationFunc:Vu.combine(t),ariaLabel:this.model.get("type")===$e.directory?G.get("filemanager.renameFolderDialog.title"):G.get("filemanager.renameFileDialog.title")},listeners:{focus:()=>{this.getSubview("nameEditor").showTooltip()},blur:()=>{this.getSubview("nameEditor").hideTooltip()},"validate:error":(t,i,r)=>{const n=this.getSubview("nameEditor");let o;"badTeamfolderName"===i?"notAllowedChars"===r?o=G.bind("teamfolder.edit.name.hint.error.badChars",vp.badChars):"noPrefixPostfix"===r?o=G.bind("teamfolder.edit.name.hint.error.noPrefixPostfix"):"reservedName"===r?o=G.bind("folder.error.reservedName",t):"maxLength"===r&&(o=G.bind("common.error.name.maxLength")):o=this.model.get("teamfolder")&&"requiredInput"===i?G.get("folder.error.required"):(e[i]||e.default)(t),n.setTooltipHtml(o),n.showTooltip()},"validate:success":()=>{this.getSubview("nameEditor").setTooltipHtml(e.default()),this.getSubview("nameEditor").hideTooltip()}}},okButton:{klass:hs,target:".ok-button-target",options:{text:G.get("common.save"),attributes:{"data-qa":"button_ok",type:"submit"}}},cancelButton:{klass:hs,target:".cancel-button-target",options:{text:G.get("common.cancel"),secondary:!0,attributes:{"data-qa":"button_cancel"}},listeners:{click:()=>this.close()}}}},async _onSubmit(e){e.preventDefault();const t=this.getSubview("nameEditor");if(!t.isDirty())return me.track({op:"rename-file",data:"unchanged"}),void this.close();this.setIsLoading(!0);try{await t.validate()}catch(e){return this.setIsLoading(!1),void t.focus()}try{const e=t.getValue(),i=this.model.get("teamfolder")?await eo.updateTeamfolder(this.model.get("id"),e):await eo.rename(this.model,e);me.track({op:"rename-file",data:"done"}),this.setIsLoading(!1),this.close(i)}catch(e){me.track({op:"rename-file",data:`error.code.${e.status}`}),this.setIsLoading(!1);const t=this.model.get("display_name");this.showError({message:G.get("filemanager.rename.toast.error.general",t),okButtonText:G.get("confirm.ok")})}}});i(4506),i(2262);var jp=i(2497),kp=i.n(jp),Sp=i(6026),Tp=i.n(Sp),Pp=o().View.extend({_template:void 0,_defTemplate:cs.factory(Tp()),autoPlay:!1,initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.downloadButton=new hs({alternative:!0,text:G.get("common.download"),attributes:{"data-qa":"fileview_download_button"}}),this.listenTo(this.downloadButton,"click",this._onDownload),e.autoPlay&&(this.autoPlay=!0===e.autoPlay),this._downloading=!1},getMetaFields(){},getInfoMetaFields(){return[]},_render(){return this.$el.empty().addClass("fileview").append(this._defTemplate({file:this.model,filegroups:Kt,lang:G,formatters:oe})),this},preload(){},render(){return this._render(),this.$(".download-button-target").replaceWith(this.downloadButton.render().$el),this.next(),this},remove(){this.downloadButton.remove(),o().View.prototype.remove.call(this)},async _onDownload(){this._downloading||(this._downloading=!0,this.model.get("encrypted")===ri.decrypted?await ye.execute("downloadDecrypted",this.model):await ye.execute("downloadSingle",this.model),this._downloading=!1)},showError(){return this._render().next()},play(){},pause(){},seek(){},next(e){return this.trigger.apply(this,d().compact(["ended",e])),this},getStreamUrl(){var e=this.model,t={pid:e.getPid()};return V.get(e.getContext()).ajax({url:"/api/file/url",data:t,dataFilter(t){try{var i=JSON.parse(t);return i.url?JSON.stringify(d().extend(i,{url:i.url+"/"+e.get("name")})):t}catch(e){return t}}})},getFileUrl(){var e="/api/file?pid="+this.model.getPid();return V.get(this.model.getContext()).addAuthToUrl(e)}}),Dp=Pp.extend({mediaType:"",getMetaFields(){return["mime_type"]},_streamUrl:void 0,_template:void 0,initialize(){this._boundPlayerEvents=[],Pp.prototype.initialize.apply(this,arguments)},render(e){return this.trigger("canPlay",!1),this.metaData=e,this._streamUrl=this.getStreamUrl().done((t=>{t.url?(this.el.innerHTML=this._template({file:this.model,filegroups:Kt,lang:G,formatters:oe}),this.player=this.el.querySelector(this.mediaType),e.mime_type&&""!==this.player.canPlayType(e.mime_type)?(this._bindPlayerEvents(),this.player.src=t.url,this.player.autoplay=!!this.autoPlay,this.trigger("canPlay",!0)):this._renderDefaultView()):this.showError()})).fail((()=>this.showError())),this},_bindPlayerEvents(){this._bindPlayerEvent("error",(()=>{this.trigger("canPlay",!1),this._renderDefaultView()})),this._bindPlayerEvent("loadedmetadata",(e=>{this.trigger("loadedmetadata",e),this.player.duration>0&&isFinite(this.player.duration)&&this.trigger("setDuration",this.player.duration)})),this._bindPlayerEvent("play",(e=>this.trigger("playing",e))),this._bindPlayerEvent("pause",(e=>this.trigger("pause",e))),this._bindPlayerEvent("timeupdate",(()=>this.trigger("timeupdate",this.player.currentTime))),this._bindPlayerEvent("ended",(()=>this.next(1e3)))},_bindPlayerEvent(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._boundPlayerEvents.push([...t]),this.player.addEventListener(...t)},_unbindPlayerEvents(){let e;for(;e=this._boundPlayerEvents.pop();)this.player.removeEventListener(...e)},_renderDefaultView(){this.trigger("setDuration",0),Pp.prototype.render.call(this,this.metaData)},remove(){this._streamUrl&&(this._streamUrl.abort(),this._streamUrl.always((()=>this._unbindPlayerEvents()))),Pp.prototype.remove.call(this)},play(){this.player.play()},pause(){this.player.pause()},seek(e){this.player.currentTime=e},next(){this._streamUrl&&this._streamUrl.always((()=>Pp.prototype.next.call(this)))}}),Cp=Dp.extend({className:"audioview",mediaType:"audio",_template:cs.factory(kp())}),Ip={googlemaps:"https://www.google.com/maps/search/?api=1&query=<%= lat %>,<%= lon %>",openstreetmap:"https://www.openstreetmap.org/?mlat=<%= lat %>&mlon=<%= lon %>"},zp={getMapLink:function(e,t,i){var r=Ip[e];if(!r)throw new Error("mapLinksHelper: unknown service '"+e+"'");return cs.factory(r)({lat:encodeURIComponent(t),lon:encodeURIComponent(i)})}},Lp=i(9136),$p=i.n(Lp);function Mp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ap(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Vp=ae.extend({className:"detailView sj-selectable",template:cs.factory($p()),templateData(){return{model:this.model.get("currentModel"),detail:this._getDetails(),mapLinksHelper:zp}},initialize(){this.listenTo(this.model,"change:meta",this.render)},_getDetails(){const e=this.model.get("meta")||{},{image:t}=e,i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){Mp(e,t,i[t])}))}return e}({},Ap(e,["image"])),r=t||{},{exif:n}=r,o=Ap(r,["exif"]);return t&&(i.image=o),n&&(i.exif=n),i}});const Fp="fadein",Bp="fadeout",Np="show",Rp="hide";var Up=Pp.extend({className:"imageview",imageSize:null,lastThumbSize:null,renderId:0,initialize(){this._image=null,this.resize=d().throttle(this._onResize.bind(this),250),Pp.prototype.initialize.apply(this,arguments)},getMetaFields(){return["image.width","image.height"]},getInfoMetaFields(){return["image.exif"]},render(e,t,i){return this.$el.html('<div class="placeholder"></div><span class="filesviewer-loader icon-loading"></span>'),this.$placeholder=this.$(".placeholder"),this._storeMetaData(e),this._renderInitial(t,i),this},preload(e,t,i){this._storeMetaData(e),this._loadImage(t,i)},remove(){return this.renderId=-1,Pp.prototype.remove.apply(this,arguments)},_onResize(e,t){this.imageSize&&this._renderResize(e,t)},_storeMetaData(e){if(e.image){const{height:t,width:i}=e.image;this.imageSize={height:t,width:i}}else this.imageSize={}},_loadImage(e,t){const{width:i,height:r}=no.calc(this.imageSize.width,this.imageSize.height,e,t),n={width:i,height:r};this.lastThumbSize=n;let o=eo.getThumbnail(this.model,n);this._image=no.preload(o)},_toggleLoading(e){const t=this.el.querySelector(".filesviewer-loader");e?t.classList.add("loading"):t.classList.remove("loading")},_togglePlaceholder(e){const t=this.$placeholder[0].classList;e===Fp?(t.add("transitioned"),t.remove("hidden")):e===Bp?(t.add("transitioned"),t.add("hidden")):e===Np?(t.remove("transitioned"),t.remove("hidden")):e===Rp&&(t.remove("transitioned"),t.add("hidden"))},async _renderInitial(e,t){let i,r,n=no.calc(this.imageSize.width,this.imageSize.height,e,t),o={width:e,height:t};if(this._hasKnownImageSize()&&this._updateScaling(n,this.imageSize.width,this.imageSize.height),this.lastThumbSize=n,this._image){const i={};try{await Promise.race([this._image,Promise.resolve(i)])===i&&this._toggleLoading(!0)}catch(i){this._loadImage(e,t)}}else this._toggleLoading(!0),this._loadImage(e,t);i=++this.renderId,r=eo.getThumbnail(this.model,{width:210,height:210}),this._placeholderLoaded(!0,r),this._image&&this._image.then((e=>{this._initiallyLoaded(i),this._imageLoaded(i,o,e)}),(()=>this._imageFailed()))},_renderResize(e,t){let i,r,n=no.calc(this.imageSize.width,this.imageSize.height,e,t),o=this.lastThumbSize||{},s={width:e,height:t};if(l=n,(a=o).width===l.width&&a.height===l.height)return;var a,l;if(this._hasKnownImageSize()&&this._updateScaling(n,this.imageSize.width,this.imageSize.height),this.lastThumbSize=n,i=(n.width||0)>(o.width||0)||(n.height||0)>(o.height||0),!i)return;this._loadImage(e,t),r=++this.renderId;const{width:d,height:c}=o,h=eo.getThumbnail(this.model,{width:d,height:c});this._placeholderLoaded(!1,h),this._image&&this._image.then(this._imageLoaded.bind(this,r,s))},_placeholderLoaded(e,t){this.$placeholder.css("background-image","url("+t+")"),e?this._togglePlaceholder(Fp):this._togglePlaceholder(Np)},_initiallyLoaded(e){e===this.renderId&&this.next(6e3)},_imageLoaded(e,t,i){let r,n=t.width,o=t.height;if(e===this.renderId){if(!this._hasKnownImageSize()&&(r=no.calc(i.width,i.height,n,o),this._updateScaling(r,i.width,i.height),!r.shouldScale)){const{width:e,height:t}=i;this.imageSize={width:e,height:t}}this.$el.css("background-image","url("+i.src+")"),this._toggleLoading(!1),this._togglePlaceholder(Bp)}},_imageFailed(){Pp.prototype.render.call(this,this.metaData)},_updateScaling(e,t,i){if(e.shouldScale)this.$placeholder.css("background-size","contain"),this.$el.css("background-size","contain");else{const r=(e.width?t+"px":"auto")+" "+(e.height?i+"px":"auto");this.$placeholder.css("background-size",r),this.$el.css("background-size","")}},_hasKnownImageSize(){return!!this.imageSize.width||!!this.imageSize.height}}),qp=i(7328),Hp=i.n(qp),Gp=Pp.extend({className:"officeview",template:cs.factory(Hp()),getMetaFields:()=>[],initialize(){this.editButton=new hs({alternative:!0,text:G.get("office.open"),attributes:{"data-qa":"officeview_edit_button"}}),this.listenTo(this.editButton,"click",this._onOpen),this.listenTo(this.model,"change:mtime",this.render),Pp.prototype.initialize.apply(this,arguments)},render(){const e=Kt.supportThumbnail(this.model.get("ext")),t=this.model.get("group"),i={fileGroup:t,fileIcon:null,fileDisplayName:null},r={fileGroup:t,fileIcon:Kt.icons[Kt.groups[t]],fileDisplayName:this.model.get("display_name")};if(!Z.useOffice().result)return Pp.prototype.render.call(this,arguments);if(e){const e=document.createElement("div");e.classList.add("placeholder");const t=document.createElement("span");t.classList.add("filesviewer-loader","icon-loading","loading"),this.el.appendChild(e),this.el.appendChild(t);const n=eo.getThumbnail(this.model,{width:g.getInnerWidth(),height:g.getInnerHeight()});no.preload(n).then((()=>{this.el.classList.add("has-preview"),this.el.style=`background-image: url(${n});`,this._renderTemplate(i)}),(()=>{this._renderTemplate(r)}))}else this._renderTemplate(r);return this.next(),this},_renderTemplate(e){this.el.innerHTML=this.template(e),this.el.querySelector(".editor-button-target").replaceWith(this.editButton.render().el)},_onOpen(){this.trigger("stop-diashow"),ye.execute("openDocument",this.model)},remove(){this.editButton.remove(),Pp.prototype.remove.apply(this)}});let Wp=!1;function Kp(e){return`${e}?cb=${w.getBuild()}`}function Yp(e){return`../external/${e}`}var Xp={async load(){Wp||(await g.import(Kp(Yp("pdfjs/pdf.mjs"))),pdfjsLib.GlobalWorkerOptions.workerSrc=Kp(Yp("pdfjs/pdf.worker.mjs")),Wp=!0)},_reset(){Wp=!1}},Zp=i(5094),Jp=i.n(Zp),Qp=Pp.extend({className:"pdfview",_renderId:0,_pdf:void 0,_page:void 0,_onFirstResize:void 0,_onLastResize:void 0,_currentPage:void 0,_template:cs.factory(Jp()),events:{"click button.pdf-next-page":"onNextPage","click button.pdf-prev-page":"onPrevPage","change input.current-page":"onPageChange"},initialize(){this._currentPage=1,this.onFirstResize=d().debounce(this._onResizeStart,300,!0),this.onLastResize=d().debounce(this._onResizeEnd,300),Pp.prototype.initialize.apply(this,arguments)},remove(){return this._pdf&&this._pdf.destroy(),this._page&&this._page.cleanup(!0),delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,this._renderId=-1,Pp.prototype.remove.apply(this,arguments)},_renderObject(e,t,i){Xl.supportPdf().then(function(){return this.getStreamUrl().done(function(t){a()("object",e).attr("type","application/pdf"),a()("object",e).attr("data",t.url),a()(".filesviewer-loader",e).hide(),a()("canvas",e).remove(),this.$el.html(e.html()),this.next(16e3)}.bind(this))}.bind(this)).fail(this._renderCanvas.bind(this,e,t,i))},_renderCanvas(e,t,i){a()("canvas",e).length?(this._renderId++,t&&(this._width=t),i&&(this._height=i),this.$el.html(e.html()),this._chain()):Pp.prototype.render.apply(this,arguments)},render(e,t,i){const r=a()("<div></div>").html(this._template({lang:G,pdfInfo:null}));return a()("object",r).length?this._renderObject(r,t,i):this._renderCanvas(r,t,i),this},async _chain(){if(!this.$("canvas").length)return;const e=this._renderId;this.$(".filesviewer-loader").show();try{await Xp.load();const t=await this._loadPdf(e),i=await this._loadPage(e,t);this._showHtml(e,i),await this._drawPage(e,i),this._postDraw(e,i)}catch(t){this.showError(e,this._canvas)}},async _loadPdf(e){if(this._renderId!==e)throw new Error(`Render #${e} obsoleted by ${this._renderId}`);return this._pdf?this._pdf:await pdfjsLib.getDocument({url:this.getFileUrl(),disableAutoFetch:!0,disableFontface:!0,disableStream:!0,isEvalSupported:!1}).promise},async _loadPage(e,t){if(this._renderId!==e)throw t&&t.destroy(),new Error(`Render #${e} obsoleted by ${this._renderId}`);return this._pdf=t,this._page?this._page:await t.getPage(this._currentPage)},_showHtml(e,t){if(this._renderId!==e)throw t&&t.cleanup(!0),new Error(`Render #${e} obsoleted by ${this._renderId}`);this.$el.html(this._template({lang:G,pdfInfo:{currentPage:this._currentPage,totalPages:this._pdf.numPages}})),this.$("object").remove()},async _drawPage(e,t){if(this._renderId!==e)throw t&&t.cleanup(!0),new Error(`Render #${e} obsoleted by ${this._renderId}`);this._newPage=t,this._page=this._page||this._newPage,this._newCanvas=a()("<canvas>")[0],this._canvas=this._canvas||this._newCanvas;const i=this.getViewProperties();this._newDrawnScale=i.scale,this._drawnScale=this._drawnScale||this._newDrawnScale;const r=t.getViewport({scale:i.scale}),n=this._newCanvas.getContext("2d"),o=this.$("canvas")[0];o.height=this._newCanvas.height=r.height,o.width=this._newCanvas.width=r.width,this.$el.css({marginTop:(i.height-r.height)/2,width:r.width});const s={canvasContext:n,viewport:r};await t.render(s).promise},_postDraw(e){if(this._renderId!==e)throw new Error(`Render #${e} obsoleted by ${this._renderId}`);this._page=this._newPage,this._canvas=this._newCanvas,this._drawnScale=this._newDrawnScale,delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,this.$("canvas").replaceWith(this._canvas),this.$(".filesviewer-loader").hide(),this.next()},showError(e,t){if(this._renderId!==e)return this._rejectedPro;const i=t||this._canvas;return delete this._newPage,delete this._newCanvas,delete this._newDrawnScale,a()(i).replaceWith("<canvas>"),this.$(".filesviewer-loader").hide(),Pp.prototype.render.apply(this,arguments)},_onResizeStart(){this._renderId++},_onResizeEnd(){this._chain()},getViewProperties(){const e=this.el.querySelector(".document-toolbar"),t=e?e.offsetHeight:0,i=this._page.getViewport({scale:1}),r=this._width,n=this._height-t;let o;return o=no.calc(i.width,i.height,r,n).width?r/i.width:n/i.height,{width:r,height:n,scale:o}},resize(e,t){if(this._width===e&&this._height===t)return;if(this._width=e,this._height=t,this.onFirstResize(),this.onLastResize(),!this._page||!this._drawnScale)return;const i=this.getViewProperties(),r=i.scale/this._drawnScale;this.$el.css({marginTop:(i.height-this._canvas.height*r)/2,width:this._canvas.width*r})},_checkedSetCurrentPage(e){!e||e<1||e>this._pdf.numPages||e===this._currentPage||(this._currentPage=e,this._page=null,this.render())},onNextPage(){this._checkedSetCurrentPage(this._currentPage+1)},onPrevPage(){this._checkedSetCurrentPage(this._currentPage-1)},onPageChange(e){this._checkedSetCurrentPage(parseInt(a()(e.target).val(),10))}}),eg=o().View.extend({template:cs.factory("<div class='bar'></div><input class='handle' type='range' max='100' min='0' step='0.01' />"),events:{"change .handle":"_onHandleChange","input .handle":"_onHandleChange","mousedown .handle":"_onMouseDown","mouseup .handle":"_onMouseUp"},render(){return this.$el.html(this.template()),this.update(0),this.delegateEvents(),this},update(e){this.value=""+e.toFixed(2),this.el.querySelector(".bar").style.width=`${this.value}%`,this.el.querySelector(".handle").value=this.value},_onHandleChange(){const e=this.el.querySelector(".handle").value,t=parseFloat(e).toFixed(2);t!==this.value&&(this.value=t,this.trigger("change",this.value))},_onMouseDown(){this.trigger("drag:start")},_onMouseUp(){this.trigger("drag:stop")}}),tg=i(5087),ig=i.n(tg),rg=o().View.extend({className:"statusview",events:{"click .action-download.enabled":"onDownload","click .action-info.enabled":"onInfo","click .action-delete.enabled":"onDelete","click .action-close":"onClose","click .control-buttons .play":"onPlay","click .control-buttons .pause":"onPause","click .control-buttons .start-diashow":"onStartDiashow","click .control-buttons .stop-diashow":"onStopDiashow","click .control-buttons .next":"onNext","click .control-buttons .previous":"onPrevious",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},currentModel:null,_template:cs.factory(ig()),initialize(){this._progressBarView=new eg,this.listenTo(this.model,"change:currentModel",this.onChangeCurrentModel),this.listenTo(this._progressBarView,"change",this.onChangeSlider),this.listenTo(this._progressBarView,"drag:start",this.onPause),this.listenTo(this._progressBarView,"drag:stop",this.onPlay),this.listenTo(this.model,"change:mouseMove",this._onModelMouseMove),this.onChangeCurrentModel(null,this.model.get("currentModel")),this.listenTo(this.model,"change:error",this.setButtons),this.listenTo(this.model,"change:playing",this.setControlState),this.listenTo(this.model,"change:diashow",this.setControlState),this.listenTo(this.model,"change:canPlay",this.setControlState),this.listenTo(this.model,"change:canNavigate",this.setControlState),this.listenTo(this.model,"change:duration",this._onDurationChange),this.listenTo(this.model,"change:currentTime",this._onCurrentTimeChange),this._downloading=!1},remove(){return this._progressBarView.remove(),o().View.prototype.remove.apply(this,arguments)},onChangeCurrentModel(e,t){t&&(this.currentModel&&this.stopListening(this.currentModel),this.currentModel=t,this.listenTo(this.currentModel,"change",this.render),this.render())},setButtons(){const e=!!this.model.get("currentModel").get("parent_writable")&&ye.isRegistered("deleteFiles"),t=!!this.model.get("error");this.$(".action-download").toggleClass("enabled",!t),this.$(".action-info").toggleClass("enabled",!t),this.$(".action-delete").toggleClass("enabled",e)},_clearMouseTimer(){this._mouseWithinTimer&&(clearTimeout(this._mouseWithinTimer),this._mouseWithinTimer=null)},_startMouseTimer(){this._clearMouseTimer(),this._mouseWithinTimer=setTimeout(function(){this._isMouseWithin||(this.el.classList.remove("mousemoved"),this.el.classList.add("mousestopped"))}.bind(this),2e3)},_onModelMouseMove(){this._setMouseClasses(),this._startMouseTimer()},_setMouseClasses(){this.el.classList.contains("mousemoved")||(this.el.classList.remove("mousestopped"),this.el.classList.add("mousemoved"))},onMouseMove(e){e.stopPropagation()},onMouseEnter(){this._isMouseWithin=!0,this._setMouseClasses(),this._clearMouseTimer()},onMouseLeave(){this._isMouseWithin=!1,this._startMouseTimer()},async onDownload(){this._downloading||(this._downloading=!0,this.currentModel.get("encrypted")===ri.decrypted?await ye.execute("downloadDecrypted",this.currentModel):await ye.execute("downloadSingle",this.currentModel),this._downloading=!1)},onDelete(){ye.execute("deleteFiles",[this.currentModel])},onPlay(){this.trigger("play")},onPause(){this.trigger("pause")},onStartDiashow(){this.trigger("start-diashow")},onStopDiashow(){this.trigger("stop-diashow")},setControlState(){this.setDiashowState(),this.setPlayState()},setDiashowState(){const e=!!this.model.get("canNavigate"),t=!!this.model.get("diashow"),i=!!this.model.get("playing"),r=!!this.model.get("canPlay"),n=this.el.querySelector(".control-buttons .start-diashow"),o=this.el.querySelector(".control-buttons .stop-diashow");n.disabled=r&&!i||!e||t,o.disabled=i||r||!e||!t},setPlayState(){const e=!!this.model.get("playing"),t=!!this.model.get("canPlay"),i=this.el.querySelector(".control-buttons .play"),r=this.el.querySelector(".control-buttons .pause");i.disabled=!t||e,r.disabled=!t||!e},onPrevious(){this.trigger("previous")},onNext(){this.trigger("next")},onInfo(){this.trigger("info:open")},onClose(){this.trigger("close")},render(){this.$el.html(this._template({lang:G,model:this.currentModel,index:this.model.get("currentIndex")+1,count:this.collection.length,canNavigate:this.model.get("canNavigate")}));const e=this.$(".progress-bar");return e.length&&e.html(this._progressBarView.render().$el),this.setButtons(),this.setControlState(),this},_formatTime(e){if(isNaN(e))return e;const t=Math.floor(e/3600);let i=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*i);return r<10&&(r="0"+r),t>0?(i<10&&(i="0"+i),t+":"+i+":"+r):i+":"+r},_onDurationChange(e,t){t>0?(this.$(".progress-current").text(this._formatTime(0)),this.$(".progress-total").text(this._formatTime(t))):(this.$(".progress-current").empty(),this.$(".progress-total").empty()),this._progressBarView.update(0)},_onCurrentTimeChange(e,t){const i=this.model.get("duration");let r=0;i>0&&(r=t/i*100,this.$(".progress-current").text(this._formatTime(t))),this._progressBarView.update(r)},onChangeSlider(e){const t=this.model.get("duration")*e/100;this.trigger("seek",t)}}),ng=Pp.extend({className:"textview",bytesSizeLimit:102400,render(e){if(!(e.size&&e.size<=this.bytesSizeLimit))return Pp.prototype.render.call(this);var t={pid:this.model.get("id"),context:this.model.getContext()};return eo.getFile(t).done(function(e){var t=document.createElement("div"),i=document.createElement("textarea");t.className="text-content",i.readOnly=!0,a()(i).text(e),t.appendChild(i),this.$el.append(t),this.next()}.bind(this)).fail(function(){this.showError()}.bind(this)),this}}),og=i(6705),sg=i.n(og),ag=i(8866),lg=i.n(ag),dg=Dp.extend({className:"videoview",mediaType:"video",_template:cs.factory(lg()),initialize(){Dp.prototype.initialize.apply(this,arguments),this.listenTo(this,"loadedmetadata",this._onLoadedMetadata)},_onLoadedMetadata(e){var t=e.target;t.width=t.width||Math.max(t.videoWidth||0,300),t.height=t.height||Math.max(t.videoHeight||0,150)}});function cg(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function hg(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){cg(e,t,i[t])}))}return e}var ug=Ml.BaseOverlayView.extend({overlayTemplate:cs.factory(sg()),overlayContentContainer:".filesviewer-content",overlayTemplateData(){return{showNavButtons:this.state.get("canNavigate")}},minMouseMovePixels:5,autoPlay:!1,autoContinue:!1,initialize(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.model)throw new Error("model missing in FilesViewer");this.itemType=this.model.getItemType(),t.autoPlay&&(this.autoPlay=t.autoPlay),t.autoContinue&&(this.autoContinue=t.autoContinue),e=t.modelsArray&&t.modelsArray.length?t.modelsArray:[this.model];const i=e.filter((e=>e.get("type")===$e.file&&e.get("readable")));if(!i.length)throw new Error("no models to show in FilesViewer");if(i.find((e=>e.getItemType()!==this.itemType)))throw new Error("models differ in itemType/authContext");this.collection=new(o().Collection)(i),this._cache={},this.state=new(o().Model)({meta:{},extendedMeta:!1,currentModel:this.model,currentIndex:this.collection.indexOf(this.model),canNavigate:this.collection.length>1,canPlay:!1,mouseMove:!1,playing:!1,diashow:!1,error:!1}),this.listenTo(this.state,"change:currentModel",this._renderContentView),this.statusView=new rg({model:this.state,collection:this.collection}),a()(window).on("resize.filesviewer",this._onResize.bind(this)),this.listenTo(this.statusView,"info:open",this._toggleDetailView),this.listenTo(this.statusView,"play",this._onPlay),this.listenTo(this.statusView,"pause",this._onPause),this.listenTo(this.statusView,"start-diashow",this._onStartDiashow),this.listenTo(this.statusView,"stop-diashow",this._onStopDiashow),this.listenTo(this.statusView,"next",this.gotoNext),this.listenTo(this.statusView,"previous",this.gotoPrevious),this.listenTo(this.statusView,"seek",this._onSeek),this.listenTo(this.statusView,"close",this.close),this.lastMousePosition={X:0,Y:0},this.$overlayEl.on("mousemove click",d().throttle((e=>{("click"===e.type||Math.abs(this.lastMousePosition.X-e.clientX)>this.minMouseMovePixels||Math.abs(this.lastMousePosition.Y-e.clientY)>this.minMouseMovePixels)&&(this.state.set({mouseMove:!this.state.get("mouseMove")}),this.lastMousePosition.X=e.clientX,this.lastMousePosition.Y=e.clientY)}),200,{leading:!0})),this.listenTo(vr,"added",this._onFileDelete),this.$overlayEl.on("click","[data-action='next-item']",this.gotoNext.bind(this)),this.$overlayEl.on("click","[data-action='previous-item']",this.gotoPrevious.bind(this))},onAfterOpen(){this.hotkeyManager.addHotkey(this,"ArrowRight",this.gotoNext.bind(this)),this.hotkeyManager.addHotkey(this,"ArrowLeft",this.gotoPrevious.bind(this))},render(){return this.$overlayEl.addClass("filesviewer-overlay"),this._renderContentView(),this.$overlayEl.find(".filesviewer").append(this.statusView.render().$el),this.trigger("rendered"),this},_getMeta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=d().union(t,["mtime","name","size"]);return e.getMeta(i)},clearContent(){const e=this.collection.at(this._getPreviousIndex()),t=this.state.get("currentModel"),i=this.collection.at(this._getNextIndex());this._cancelMetaRequests(!1),this._cacheCleanup([e.cid,t.cid,i.cid]),this.contentView&&this.stopListening(this.contentView)},remove(){return this.statusView.remove(),this._removeDetailView(),this._cancelMetaRequests(!0),this._cacheCleanup(),this.$overlayEl.off(),a()(window).off(".filesviewer"),this.trigger("removed"),Ml.BaseOverlayView.prototype.remove.apply(this,arguments)},_cancelMetaRequests(e){const t=this.state.get("currentModel").cid;for(let i in this._cache){if(i===t&&!e)continue;const r=this._cache[i].metaRequest;r&&r.abort()}},_cacheCleanup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t in this._cache){if(-1!==e.indexOf(t))continue;const i=this._cache[t].view;this.stopListening(i),i.remove(),delete this._cache[t]}},_getNewIndexAfterDelete(e,t,i){const r=[...i],n=r.indexOf(t)>-1;n&&r.splice(r.indexOf(t),1);const o=d().difference(e,r);let s=o.indexOf(t);return n&&(o.splice(s,1),s=s<o.length-1?s:o.length-1),s},_onFileDelete(e,t){if(e!==this.itemType)return;const i=this.state.get("currentModel"),r=t.map((e=>this.collection.get(e.id))),n=this._getNewIndexAfterDelete(this.collection.models,i,r);this.collection.remove(t),1===this.collection.length&&this.state.set({diashow:!1,canNavigate:!1}),this.collection.models.length?this._gotoIndex(n):this.remove()},_clearResume(){this._resumeTimeout&&clearTimeout(this._resumeTimeout)},_resume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this._clearResume(),this._resumeTimeout=d().delay(function(){this.state.get("diashow")&&this._gotoIndex(this._getNextIndex())}.bind(this),e)},_getNextIndex(){const e=this.state.get("currentIndex")||0;return e<this.collection.length-1?e+1:0},gotoNext(){this.state.set({playing:!1,diashow:!1}),this._gotoIndex(this._getNextIndex())},_getPreviousIndex(){const e=this.state.get("currentIndex")||0;return e>0?e-1:this.collection.length-1},gotoPrevious(){this.state.set({playing:!1,diashow:!1}),this._gotoIndex(this._getPreviousIndex())},_gotoIndex(e){this._clearResume();const t=this.state.get("currentModel"),i=this.collection.at(e);d().without(Object.keys(this.state.attributes),"currentIndex","currentModel","canNavigate","diashow","error","mouseMove").forEach((e=>{this.state.unset(e)})),this.state.set({currentIndex:e,currentModel:i}),i===t&&this.state.trigger("change:currentModel",this.state,i)},_renderContentView(){const e=this.state.get("currentModel");this.clearContent();const t=this.$overlayEl.find(".filesviewer-content"),i=this._getFromCache(e);this.contentView=i.view,this._bindContentViewEvents(),this.$overlayEl.find(".filesviewer-overlay-filename").text(e.get("base_name")),this.$overlayEl.removeClass("has-duration");const r=e=>{const{width:i,height:r}=this._getContentSize();this.state.set({meta:e,error:!1}),this.contentView.render(e,i,r),t.html(this.contentView.$el),this.detailView&&this._getExtendedMeta()},n=(e,i)=>{"abort"!==i&&(this.state.set({meta:{},error:!0}),t.html(this.contentView.showError().$el))};i.metaRequest?i.metaRequest.then((e=>{i.metaData=e,i.metaRequest=null,r(e)})):i.metaRequest=this._getMeta(e,this.contentView.getMetaFields()).done(r).fail(n),this._preloadSiblings()},_preloadSiblings(){const e=this.collection.at(this._getPreviousIndex()),t=this.state.get("currentModel");let i=[e,this.collection.at(this._getNextIndex())];i=d().unique(i),i=d().without(i,t),i.forEach((e=>{const t=this._getFromCache(e),i=t.view;t.metaRequest=this._getMeta(e,i.getMetaFields()).done((e=>{const{width:r,height:n}=this._getContentSize();t.metaData=e,i.preload(e,r,n)})).fail((()=>{t.metaRequest=null}))}))},_bindContentViewEvents(){this.listenTo(this.contentView,"playing",this._onPlaying),this.listenTo(this.contentView,"pause",this._onPaused),this.listenTo(this.contentView,"setDuration",this._onSetDuration),this.listenTo(this.contentView,"timeupdate",this._onTimeUpdate),this.listenTo(this.contentView,"ended",this._resume),this.listenTo(this.contentView,"canPlay",this._onCanPlay),this.listenTo(this.contentView,"stop-diashow",this._onStopDiashow)},_getFromCache(e){return e.cid in this._cache||(this._cache[e.cid]={view:this._createContentView(e)}),this._cache[e.cid]},_createContentView(e){let t=Pp;if(e.get("encrypted")===ri.decrypted)return new t({model:e,autoPlay:this.autoPlay});switch(e.get("group")){case Kt.groups.image:Kt.isOfficeEditable(e.get("ext"))?t=Gp:Kt.supportThumbnail(e.get("ext"))&&(t=Up);break;case Kt.groups.video:t=dg;break;case Kt.groups.audio:t=Cp;break;case Kt.groups.text:t=ng;break;case Kt.groups.pdf:t=Qp;break;default:Kt.isOfficeEditable(e.get("ext"))&&(t=Gp)}return new t({model:e,autoPlay:this.autoPlay})},_onResize(){if(this.contentView&&"function"==typeof this.contentView.resize){const{width:e,height:t}=this._getContentSize();if(!e||!t)return;this.contentView.resize(e,t)}},_onCanPlay(e){this.state.set("canPlay",e)},_onPlay(){this.state.set({playing:!0}),this.contentView.play()},_onPause(){this.state.set({playing:!1}),this.contentView.pause()},_onStartDiashow(){this.state.set({diashow:!0}),this.contentView.next()},_onStopDiashow(){this.state.set({diashow:!1})},_onPlaying(){this.state.set("playing",!0),this.autoContinue&&this.state.set("diashow",!0)},_onPaused(){this.state.set("playing",!1)},_onSetDuration(e){this.state.set("duration",e),e>0&&this.$overlayEl.addClass("has-duration")},_onTimeUpdate(e){this.state.set("currentTime",e)},_onSeek(e){this.contentView.seek(e)},_toggleDetailView(){this.detailView?this._hideDetailView():this._renderDetailView()},_renderDetailView(){this._clearDetailsViewTransitionTimer(),this.detailView=new Vp({model:this.state}),this._getExtendedMeta(),this.$overlayEl.find(".filesviewer-wrapper").append(this.detailView.render().$el),this.$overlayEl.addClass("detailview-active"),setTimeout((()=>{this.detailView.$el.addClass("active")}),0),this._detailsViewTransitionTimer=setTimeout((()=>{this._detailsViewTransitionTimer=null,this._onResize()}),200)},_clearDetailsViewTransitionTimer(){this._detailsViewTransitionTimer&&(this._removeDetailView(),clearTimeout(this._detailsViewTransitionTimer),this._detailsViewTransitionTimer=null)},_hideDetailView(){this.detailView.$el.removeClass("active"),this.$overlayEl.removeClass("detailview-active"),this._clearDetailsViewTransitionTimer(),this._detailsViewTransitionTimer=setTimeout((()=>{this._removeDetailView(),this._onResize()}),200)},_removeDetailView(){this.detailView&&(this.detailView.remove(),delete this.detailView)},_getExtendedMeta(){const e=this.contentView,t=e.getInfoMetaFields(),i=e.getMetaFields(),r=this.state.get("currentModel"),n=this.state;let o;t.length&&!n.get("extendedMeta")&&(o=[...i,...t],this.meta=this._getMeta(r,o).done((e=>{r.getPid()===n.get("currentModel").getPid()&&n.set({meta:hg({},n.get("meta"),e),extendedMeta:!0})})))},_getContentSize(){const e=this.$overlayEl[0].querySelector(".filesviewer-content");return e?{height:Ka.getInnerHeight(e),width:Ka.getInnerWidth(e)}:{height:0,width:0}}}),pg=ug;var gg={};gg.deleteFiles={callback:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i="";e.find((e=>e.get("syncedfolder")))&&(i=G.get("filemanager.syncedfolder.confirm.info")+"<br><br>"),1===e.length?i+=G.get("filemanager.delete.prompt.single",oe.escapedBreakable(e[0].get("display_name"))):i+=G.get("filemanager.delete.prompt.multi",e.length),$s.confirm({message:i,okButtonText:G.get("filemanager.delete.prompt.ok"),cancelButtonText:G.get("filemanager.delete.prompt.cancel")}).then(function(i){i?eo.deleteFiles(e).always((function(e,i,r){!function(e,t,i,r){var n;"timeout"!==i.statusText?e.length&&(n=t&&t.length?G.bind("filemanager.delete.error.some",[t.length,e.length]):1===e.length?G.bind("filemanager.delete.error.one",oe.breakable(e[0].get("display_name"))):G.bind("filemanager.delete.error.all",e.length),ye.execute("showToast",{msg:n})):r.timeoutToast&&ye.execute("showToast",{type:"info",msg:G.bind("filemanager.delete.timeout")})}(e,i,r,t)})):me.track({op:"delete-abort",target:"confirm-dialog",data:e.length})}.bind(this))}},gg.deselectAll={callback:function(e){if(!d().isObject(e))throw new Error("Object-argument required for deselectAll action");if(!d().isFunction(e.deselectAll))throw new Error("Subject has no deselectAll method.");e.deselectAll()}},gg.download={callback:async function(e){const t=e.files,i=t.getSelected();let r,n=!1;if(0===i.length&&!e.isDownloadable())throw new Error("Can not download whole folder with no selection while the folder is not downloadable");0===i.length?(r=[e],n=!0):1===i.length&&1===t.length||i.length<t.length?r=i:i.some(ku)?r=[...t.models]:(r=[e],n=!0);try{await eo.download(r,{archivePrefix:G.get("filemanager.download.archiveprefix"),base:e.isDownloadable()?e:null})}catch(e){let{status:t}=e;const i=r[0].urlDecode("path");let o;o=404===t?n?G.bind("filemanager.download_dir.error.404",i):G.bind("filemanager.download.error.404",i):403===t?G.bind("filemanager.download.error.403",i):G.bind("filemanager.download.error.common",i),ye.execute("showToast",{msg:o,type:"negative"})}i.length>0&&ye.execute("deselectAll",t)}},gg.downloadSingle={callback:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{await eo.download(e,t)}catch(t){let{status:i}=t;const r=e.urlDecode("path");let n;n=404===i?G.bind("filemanager.download.error.404",r):403===i?G.bind("filemanager.download.error.403",r):G.bind("filemanager.download.error.common",r),ye.execute("showToast",{msg:n,type:"negative"})}}},gg.newFolder={callback:async function(e){const t=await new Ru({parentFolder:e}).open();return t?Promise.resolve(t):Promise.reject()}},gg.openDocument={callback:function(e){if(!(e&&e instanceof ar))throw new Error("FileModel required in openDocument-action");new mp({model:e}).open()}},gg.rename={callback:async function(e){if(await Ms.confirmDialog(e,G.get("common.rename"))){const t=await new Op({fileItem:e}).open();if(t)return Di.update(),Promise.resolve(t)}return Promise.reject()}},gg.selectAll={callback:function(e){if(!d().isObject(e))throw new Error("Object-argument required for selectAll action");if(!d().isFunction(e.selectAll))throw new Error("Subject has no selectAll method.");e.selectAll()}},gg.showFile={callback:function(e,t,i){var r,n=e.get("ext");return n&&me.track({op:"open",files_extension:n}),(r=new pg(d().extend({},i,{model:e,modelsArray:t}))).open(),r},config:{autoPlay:!0,autoContinue:!0}},gg.showToast={callback:function(e){Pc.notify(e)}},ye.registerAll(gg);var mg={run:function(){!function(){const e=window.router=new ju;o().history.start({silent:!0}),e.start()}(),u.initDefaultHandler(),$.install()}};window.HDF_BROWSER_DEPRECATED?console.error("This browser version is outdated. Please update for best security and user experience."):window.addEventListener("load",(()=>mg.run()))},1724:function(e){e.exports='<% var isEncrypted = model.get("encrypted") === "encrypted",\n\tisWritable = model.get("writable"); %>\n<div class="image">\n<%\nif (isEncrypted) {\n\tprint(encryptedImage);\n} else {\n\tprint(emptyImage);\n}\n%>\n</div>\n<div class="text">\n\t<h5>\n\t\t<% if (isEncrypted) { %>\n\t\t<%= lang.get("filemanager.encrypted.text") %>\n\t\t<% } else if(!isWritable) { %>\n\t\t<%= lang.get("filemanager.noFiles") %>\n\t\t<% } else { %>\n\t\t<%= lang.get("filemanager.noFiles.writable") %>\n\t\t<% } %>\n\t</h5>\n</div>\n'},6936:function(e){e.exports='<div class="error-or-empty-state">\n\t<div class="image">\n\t<%= errorImage %>\n\t</div>\n\t<div class="text">\n\t\t<h5>\n\t\t\t<%= lang.get("folder.loaderror.common", formatters.escapedBreakable(model.urlDecode("path"))) %>\n\t\t</h5>\n\t</div>\n</div>\n'},1330:function(e){e.exports='<%= lang.get("upload.detail.title") %>\n'},2068:function(e){e.exports='<div class="overlay-title">\n\t<div class="title-target"></div>\n</div>\n\n<div class="stats-target"></div>\n\n<div class="grid-target"></div>\n\n<div class="overlay-buttons">\n\t<div class="button-more-uploads"></div>\n\t<div class="spacer"></div>\n\t<div class="button-close-target"></div>\n\t<div class="button-cancel-all-target"></div>\n\t<div class="button-retry-all-failed-target"></div>\n</div>\n'},163:function(e){e.exports='<div class="upload-item">\n\t<div class="upload-item-progress progressbar-container"></div>\n\t<div class="upload-item-content">\n\t\t<div class="upload-item-icon">\n\t\t\t<%= filegroups.icons[model.get("group")] %>\n\t\t</div>\n\t\t<div class="upload-item-label sj-selectable">\n\t\t\t<div class="upload-item-name" title="<%- model.get("name") %>"><%- model.get("name") %></div>\n\t\t\t<% if (uploadItemError) { %>\n\t\t\t\t<div class="upload-item-error text-small">\n\t\t\t\t\t<%= uploadItemError %>\n\t\t\t\t</div>\n\t\t\t<% } else if (uploadItemStatus) { %>\n\t\t\t\t<div class="upload-item-status text-small">\n\t\t\t\t\t<%= uploadItemStatus %>\n\t\t\t\t</div>\n\t\t\t<% } %>\n\t\t</div>\n\t\t<span class="upload-item-size sj-selectable">\n\t\t\t<span class="upload-item-progress-amount"></span>\n\t\t\t<%= uploadItemSize %>\n\t\t</span>\n\t\t<div class="upload-item-controls">\n\t\t\t<button class="sj-button sj-icon-only-button upload-item-cancel" title="<%= lang.get(\'common.cancel\') %>" data-action="cancel" data-track-op="upload-cancel" data-track-target="item">\n\t\t\t\t<span class="icon-upload-cancel"></span>\n\t\t\t</button>\n\t\t\t<button class="sj-button sj-icon-only-button upload-item-resume" title="<%= lang.get(\'upload.detail.retryFailedUpload\') %>" data-action="resume" data-track-op="upload-resume" data-track-target="item">\n\t\t\t\t<span class="icon-upload-resume"></span>\n\t\t\t</button>\n\t\t\t<span class="icon-upload-cancelled"></span>\n\t\t\t<span class="icon-upload-complete"></span>\n\t\t</div>\n\t</div>\n</div>\n'},5614:function(e){e.exports='<span class="uploads-ok">\n\t<span class="icon-loading"></span>\n\t<span class="icon-upload-complete"></span>\n\t<span class="uploads-ok-text"></span>\n</span>\n\n<span class="uploads-error">\n\t<span class="icon-upload-error"></span>\n\t<span class="uploads-error-text"></span>\n</span>\n\n<div class="progress-bar"></div>\n'},2497:function(e){e.exports='<audio></audio>\n<span class="file-icon"><%= filegroups.icons[filegroups.groups[file.get("group")]]%></span>\n<span class="display-name sj-selectable" title="<%- file.get(\'display_name\') %>"><%- file.get("display_name") %></span>\n'},9136:function(e){e.exports='<h2><%= lang.get("details") %></h2>\n\n<h4><%= lang.get("file.name") %></h4>\n<p title="<%- model.get(\'display_name\') %>" data-qa="detail_displayname"><%- formatters.breakable(model.get("display_name")) %></p>\n\n<% if(detail.mime_type) { %>\n\t<h4><%= lang.get("file.type") %></h4>\n\t<p data-qa="detail_mimetype"><%- detail.mime_type %></p>\n<% } %>\n\n<% if(detail.size) { %>\n\t<h4><%= lang.get("file.size") %></h4>\n\t<p data-qa="detail_size"><%= formatters.size(detail.size) %></p>\n<% } %>\n\n<% if(detail.image) { %>\n\t<h4><%= lang.get("file.details.dimensions") %></h4>\n\t<p data-qa="detail_dimensions"><%- detail.image.width %> x <%- detail.image.height %> px</p>\n<% } %>\n\n<% if(detail.exif) { %>\n\t<% if (detail.exif.DateTimeOriginal) { %>\n\t\t<h4><%= lang.get("file.details.datetaken") %></h4>\n\t\t<p data-qa="exif_datetimeoriginal"><%- formatters.exifDate(detail.exif.DateTimeOriginal, lang.get("lang.timeFormat")) %></p>\n\t<% } %>\n<% } %>\n\n<% if(detail.mtime) { %>\n\t<h4><%= lang.get("file.update") %></h4>\n\t<p data-qa="detail_mtime"><%= formatters.date(detail.mtime, lang.get("lang.timeFormat")) %></p>\n<% } %>\n\n<% if(detail.exif) { %>\n\t<% if (detail.exif.Aperture) { %>\n\t\t<h4><%= lang.get("file.details.fnumber") %></h4>\n\t\t<p data-qa="exif_aperture">f/<%- detail.exif.Aperture %></p>\n\t<% } %>\n\n\t<% if (detail.exif.ExposureTime) { %>\n\t\t<h4><%= lang.get("file.details.exposuretime") %></h4>\n\t\t<p data-qa="exif_exposuretime"><%- formatters.exposureTime(detail.exif.ExposureTime) %></p>\n\t<% } %>\n\n\t<% if (detail.exif.ISO) { %>\n\t\t<h4><%= lang.get("file.details.iso") %></h4>\n\t\t<p data-qa="exif_iso"><%- detail.exif.ISO %></p>\n\t<% } %>\n\n\t<% if (detail.exif.FocalLength) { %>\n\t\t<h4><%= lang.get("file.details.focallength") %></h4>\n\t\t<p data-qa="exif_focallength"><%- detail.exif.FocalLength %> mm</p>\n\t<% } %>\n\n\t<% if (detail.exif.Make) { %>\n\t\t<h4><%= lang.get("file.details.manufacturer") %></h4>\n\t\t<p data-qa="exif_make"><%- detail.exif.Make %></p>\n\t<% } %>\n\n\t<% if (detail.exif.Model) { %>\n\t\t<h4><%= lang.get("file.details.model") %></h4>\n\t\t<p data-qa="exif_model"><%- detail.exif.Model %></p>\n\t<% } %>\n\n\t<% if (detail.exif.GPSLongitude && detail.exif.GPSLatitude) { %>\n\t\t<h4><%= lang.get("file.details.location") %></h4>\n\t\t<p data-qa="exif_location">\n\t\t\t<%\n\t\t\t\tvar lat = detail.exif.GPSLatitude,\n\t\t\t\t\tlon = detail.exif.GPSLongitude;\n\t\t\t%>\n\t\t\t<span class="icon icon-map-marker"></span><%- lat %>, <%- lon %>\n\t\t\t<p>\n\t\t\t\t<a href="<%= mapLinksHelper.getMapLink(\'googlemaps\', lat, lon) %>" rel="noreferrer" target="_blank">Google Maps</a> |\n\t\t\t\t<a href="<%= mapLinksHelper.getMapLink(\'openstreetmap\', lat, lon) %>" rel="noreferrer" target="_blank">OpenStreetMap</a>\n\t\t\t</p>\n\t\t</p>\n\t<% } %>\n<% } %>\n'},6026:function(e){e.exports='<span class="file-icon"><%= filegroups.icons[filegroups.groups[file.get("group")]]%></span>\n<span class="display-name sj-selectable" title="<%- file.get("display_name") %>"><%- file.get("display_name") %></span>\n<div class="download-button-target"></div>\n'},6705:function(e){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n<div class="filesviewer">\n\t<div class="filesviewer-wrapper">\n\t\t<div class="filesviewer-container">\n\t\t\t<div class="filesviewer-content"></div>\n\t\t</div>\n\t</div>\n</div>\n'},7328:function(e){e.exports='<% if(fileIcon) { %>\n<span class="file-icon"><%= fileIcon %></span>\n<% } %>\n<% if(fileDisplayName) { %>\n<span class="display-name sj-selectable" title="<%- fileDisplayName %>"><%- fileDisplayName %></span>\n<% } %>\n<div class="editor-button-target"></div>\n'},5094:function(e){e.exports='<object></object>\n<canvas></canvas>\n<div class="filesviewer-loader icon-loading"></div>\n<% if(pdfInfo) { %>\n<div class="document-toolbar">\n\t<div class="pages">\n\t\t<label><%= lang.get("pdfview.documenttoolbar.page") %></label>\n\t\t<input\n\t\t\tclass="current-page" type="number" min="1"\n\t\t\tmax="<%= pdfInfo.totalPages %>" step="1"\n\t\t\tvalue="<%= pdfInfo.currentPage %>"> / <%= pdfInfo.totalPages %>\n\t</div>\n\t<div class="navigation">\n\t\t<button class="nav-btn pdf-prev-page icon-filesviewer-pdf-prev"></button>\n\t\t<button class="nav-btn pdf-next-page icon-filesviewer-pdf-next"></button>\n\t</div>\n</div>\n<% } %>\n'},5087:function(e){e.exports='<div class="left">\n\t<% if(canNavigate) { %>\n\t<span class="position sj-selectable"><%= index %>/<%= count %></span> -\n\t<% } %>\n\t<span class="display-name sj-selectable" title="<%- model.get(\'display_name\') %>"><%- model.get("display_name") %></span>\n</div>\n<div class="center">\n\t<div class="control-buttons">\n\t\t<% if (canNavigate) { %>\n\t\t<button class="previous icon icon-filesviewer-previous" title="<%- lang.get(\'button.previous\') %>" aria-label="<%- lang.get(\'button.previous\') %>"></button>\n\t\t<% } %>\n\t\t<button class="play icon icon-filesviewer-play" title="<%- lang.get(\'button.play\') %>" aria-label="<%- lang.get(\'button.play\') %>"></button>\n\t\t<button class="pause icon icon-filesviewer-pause" title="<%- lang.get(\'button.pause\') %>" aria-label="<%- lang.get(\'button.pause\') %>"></button>\n\t\t<button class="start-diashow icon icon-filesviewer-play" title="<%- lang.get(\'button.startDiashow\') %>" aria-label="<%- lang.get(\'button.startDiashow\') %>"></button>\n\t\t<button class="stop-diashow icon icon-filesviewer-pause" title="<%- lang.get(\'button.stopDiashow\') %>" aria-label="<%- lang.get(\'button.stopDiashow\') %>"></button>\n\t\t<% if (canNavigate) { %>\n\t\t<button class="next icon icon-filesviewer-next" title="<%- lang.get(\'button.next\') %>" aria-label="<%- lang.get(\'button.next\') %>"></button>\n\t\t<% } %>\n\t</div>\n</div>\n<div class="right">\n\t<div class="toolbar-buttons">\n\t\t<div class="progress-time">\n\t\t\t<span class="progress-current"></span>\n\t\t\t/\n\t\t\t<span class="progress-total"></span>\n\t\t</div>\n\t\t<span class="action-download icon icon-filesviewer-download" title="<%= lang.get("common.download") %>"></span>\n\t\t<span class="action-info icon icon-filesviewer-info" title="<%= lang.get("common.information") %>"></span>\n\t</div>\n</div>\n<div class="progress-bar"></div>\n'},8866:function(e){e.exports="<video></video>\n"},7849:function(e){e.exports='<%\nif (segments.length) {\n%>\n<div class="level-up-area">\n\t<%\n\t// level up link if there are more than one path segments\n\t// else show inactive icon\n\tif(segments.length> 1) {\n\tvar parentSegment = segments[segments.length -2];\n\t%>\n\t<a href="<%= parentSegment.href %>"\n\t\ttitle="<%- parentSegment.title %>"\n\t\tclass="link icon icon-level-up level-up">\n\t</a>\n\n\t<% } else { %>\n\n\t<span class="icon icon-level-up level-up inactive"></span>\n\n\t<% } %>\n\n\t<span class="sep">&#160;</span>\n</div>\n<%\n}\n%>\n\n<%\nif (segments.length> 1) {\n// root\nvar root = segments.shift();\n%>\n\t<div class="root segment">\n\t\t<%\n\t\tif (root.icon) {\n\t\t%>\n\t\t<span class="segment-icon <%= root.icon.className %>" title="<%= root.icon.title %>"></span>\n\t\t<%\n\t\t}\n\t\t%>\n\t\t<a href="<%= root.href %>" class="link text" title="<%- root.title %>">\n\t\t\t<%- root.name %>\n\t\t</a>\n\t\t<% if (segments.length> 0) { %>\n\t\t<span class="arrow icon-breadcrumb-arrow"></span>\n\t\t<% } %>\n\t</div>\n<% } %>\n\n<div class="inner">\n<%\nvar slength = segments.length -1,\n\tpredecessor;\nsegments.reverse().forEach(function(segment, index) {\n\tvar current = !index,\n\t\tlast = slength == index;\n\t\t// to generate the ...> link\n\t\tpredecessor = segments[index+1];\n%>\n\t<div class="segment <% if (current) { print(\'current\'); } else if(last) { print(\'last\'); }%>">\n\t\t<% if (!last && predecessor) { %>\n\t\t<a href="<%= predecessor.href %>" class="hellip link" title="<%- predecessor.title || predecessor.name %>">&hellip;</a>\n\t\t<span class="arrow icon-breadcrumb-arrow"></span>\n\t\t<% } %>\n\t\t<%\n\t\tif (segment.icon) {\n\t\t%>\n\t\t<span class="segment-icon <%= segment.icon.className %>" title="<%= segment.icon.title %>"></span>\n\t\t<%\n\t\t}\n\t\t%>\n\t\t<a <% if (!current) { %>href="<%= segment.href %>"<% } %> class="<% if(!current) { %>link<% } %> text" title="<%- segment.title || segment.name %>">\n\t\t\t<%- segment.name %>\n\t\t</a>\n\t</div>\n<%\n});\n%>\n\n</div>\n'},5024:function(e){e.exports='<input type="checkbox">\n'},6939:function(e){e.exports='<span class="overlay-text"><%= message %></span>\n<div class="overlay-buttons">\n\t<span class="ok-target"></span>\n</div>\n'},1715:function(e){e.exports='<span class="overlay-text"><%= message %></span>\n<div class="overlay-buttons">\n\t<span class="ok-target"></span>\n\t<span class="cancel-target"></span>\n</div>\n'},1770:function(e){e.exports='<input type="checkbox"><span></span>\n'},2817:function(e){e.exports='<h2><%= message %></h2>\n<div class="wrapper">\n\t<div class="error">\n\t\t<div class="error-image"><%= image %></span>\n\t</div>\n</div>\n'},9065:function(e){e.exports='<span class="icon icon-language"></span><span class="label"><%- lang.getInLang("lang.name", lang.getLang()) %></span><span class="arrow"></span>\n'},5629:function(e){e.exports='<div class="header-target"></div>\n<div class="filemanager-menubar-wrapper">\n\t<div class="menubar-row">\n\t\t<div class="folder-flyout-target"></div>\n\t\t<div class="menubar-target"></div>\n\t</div>\n\t<div class="toolbar-target"></div>\n</div>\n<div id="content"></div>\n<div class="footer-target"></div>\n<div class="toast-svelte"></div>\n'},7837:function(e){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n'},635:function(e){e.exports='<div class="filesviewer-overlay-close icon-filesviewer-close" data-action="close-overlay"></div>\n\n<span class="thumb-icon"><%= icon %></span>\n<div class="filesviewer-error"><%= lang.get("filemanager.image.error") %></div>\n'},4174:function(e){e.exports='<div class="malware-scan-test">\n\t<div class="image">\n\t\t<%= malwareScanImage %>\n\t</div>\n\t<div class="text">\n\t\t<h5><%= lang.get("malware.scan.test.info") %></h5>\n\t</div>\n\t<div class="common-loader">\n\t\t<span class="icon-loading"></span>\n\t</div>\n</div>\n'},8242:function(e){e.exports='<div class="icon-loading"></div>\n'},3964:function(e){e.exports='<form class="password-dialog">\n\t<span class="password-header"><%= lang.get("login.header") %></span>\n\t<% if (error) { %>\n\t\t<span class="error sj-message sj-selectable negative">\n\t\t\t<span class="message"><%= error %></span>\n\t\t</span>\n\t<% } %>\n\t<div class="password-wrapper"></div>\n</form>\n'},4672:function(e){e.exports='<div class="shlnk-file-info">\n\t<span class="filename"><%- formatters.breakable(model.get("display_name")) %></span> |\n\t<span class="size"><%= formatters.size(model.get("size")) %></span>\n</div>\n<div class="shlnk-nopreview">\n\t<div class="icon-shlnk-mimetype">\n\t\t<%= filegroups.icons[model.get("group")] %>\n\t</div>\n</div>\n<div class="shlnk-media-placeholder"></div>\n<div class="shlnk-actions"><div class="download-target"></div></div>\n<div class="shlnk-share-info">\n<% if (model.has("expirytime")) { %>\n\t<span class="ttl"><%= lang.get("sharelink.ttl", [formatters.date(model.get("expirytime"), lang.get("sharelink.ttl.timeFormat"))]) %></span>\n<% } %>\n<% if (model.has("remaining")) { %>\n\t<span class="downloads"><%= lang.get("sharelink.downloads", [model.get("remaining")]) %></span>\n<% } %>\n</div>\n'},1129:function(e){e.exports='<video\n        controls\n        src="<%= url %>"\n        preload="none"\n        poster=""\n>\n    Your browser does not support the video tag.\n</video>\n'},2002:function(e){e.exports='<div class="logo"><%= logo %></span>\n<div class="right">\n\t<% if (isLoggedIn) { %>\n\t<span class="logout">\n\t\t<span class="icon icon-logout" title="<%= lang.get("header.logout") %>"></span>\n\t</span>\n\t<% } %>\n</div>\n'},3287:function(e){e.exports='<div class="common-loader">\n\t<span class="icon-loading"></span>\n</div>\n'},9611:function(e){e.exports='<div class="links">\n\t<% if (lang.getLanguages().length > 1) { %>\n\t<div class="language-target"></div>\n\t<span class="simple-separator"></span>\n\t<% } %>\n\t<a href="<%= urls.imprint %>" target="_blank"><%= lang.get("imprint.title") %></a>\n</div>\n\n\n<% if (poweredByImage) { %>\n<a href="<%= lang.get("poweredBy.url") %>" target="_blank" class="powered_by">\n\t<%= poweredByImage %>\n</a>\n<% } %>\n'},202:function(e){e.exports='<% if (config.get("hasTeaser")) { %>\n<div class="teaser-layout">\n\t<div class="icon-tuev"></div>\n\t<div class="text"><%= lang.get("tuev.text") %></div>\n</div>\n<% } %>\n'},5859:function(e){e.exports='<p class="sj-selectable">\n<%= text %>\n<a href="<%= url %>" target="_cookie"><%= url_text %></a>\n</p>\n<span class="icon icon-cookiebanner-close close"></span>\n'},7518:function(e){e.exports='<div class="text">\n\t<p class="sj-selectable">\n\t\t<% if (model.get("encrypted") === "encrypted") { %>\n\t\t<%= lang.get("filemanager.encrypted.text") %>\n\t\t<% } else { %>\n\t\t<%= lang.get("filemanager.noFiles") %>\n\t\t<% } %>\n\t</p>\n</div>\n'},5327:function(e){e.exports='<div class="error-or-empty-state">\n\t<div class="error-text">\n\t\t<p class="sj-selectable">\n\t\t\t<% if (isEncryptedFolder) { %>\n\t\t\t<%= lang.get("filemanager.encrypted.text") %>\n\t\t\t<% } else { %>\n\t\t\t<%= lang.get("folder.loaderror.common", formatters.escapedBreakable(model.urlDecode("path"))) %>\n\t\t\t<% } %>\n\t\t</p>\n\t</div>\n</div>\n'},2214:function(e){e.exports='<%\n// omit last segment (which is the current folder) and reverse\nvar reversedSegments = segments.slice(0, -1).reverse();\n\nreversedSegments.forEach(function(segment) {\n%>\n\t<li data-href="<%= segment.href %>" title="<%- segment.title %>">\n\t\t<span class="label"><%- segment.name %></span>\n\t</li>\n<%\n});\n%>\n'},8675:function(e){e.exports='<%\n\tvar segment = segments.slice(-1)[0],\n\t\tparentSegment,\n\t\tdisabled = segments.length < 2;\n%>\n\n<% if (disabled) { %>\n\t<span class="icon icon-level-up disabled"></span>\n<% } else {\n\tparentSegment = segments[segments.length - 2];\n\t%>\n\t<a href="<%= parentSegment.href %>" title="<%- parentSegment.title %>" class="level-up">\n\t\t<span class="icon icon-level-up"></span>\n\t</a>\n<% } %>\n\n<span class="sep"></span>\n<span class="folder-icon <%= disabled ? \'disabled\' : \'\' %>">\n\t<%= folderIcon %>\n</span>\n<span class="arrow icon-folder-flyout-arrow <%= disabled ? \'disabled\' : \'\' %>"></span>\n\n<% if (segment) { %>\n\t<span class="label" title="<%- segment.title %>"><%- segment.name %></span>\n<% } %>\n'},4635:function(e){e.exports='<div class="overlay-title"><%= lang.get("filemanager.newFolderDialog.title") %></div>\n<div class="name-editor-target"></div>\n<div class="overlay-buttons">\n\t<span class="ok-button-target"></span>\n\t<span class="cancel-button-target"></span>\n</div>\n'},9350:function(e){e.exports='<% if (isDirectory) { %>\n<div class="overlay-title"><%= lang.get("filemanager.renameFolderDialog.title") %></div>\n<% } else { %>\n<div class="overlay-title"><%= lang.get("filemanager.renameFileDialog.title") %></div>\n<% } %>\n<div class="name-editor-target"></div>\n<div class="overlay-buttons">\n\t<span class="ok-button-target"></span>\n\t<span class="cancel-button-target"></span>\n</div>\n'},5849:function(e){e.exports='<%\nObject.entries(sorting).forEach(function(entry) {\n\tvar ind = entry[0];\n\tvar opt = entry[1];\n%>\n\t<li data-cid="<%= ind %>" class="<%= opt.selected ? \'selected\': \'\' %> <%= opt.direction %>">\n\t\t<span class="label"><%= opt.text %></span>\n\t\t<span class="sort-indicators">\n\t\t\t<span class="icon-sort-descending"></span>\n\t\t\t<span class="icon-sort-ascending"></span>\n\t\t</span>\n\t</li>\n<%\n});\n%>\n'},9286:function(e){e.exports='<%\nviewModeList.forEach(function(viewMode) {\n\tvar selected = model.get("viewMode") === viewMode.name;\n%>\n\t<div\n\t\tclass="tile <%= selected ? \'selected\' : \'\' %>"\n\t\tdata-cid="<%= viewMode.name %>"\n\t\ttitle="<%= viewMode.title %>">\n\t\t\t<span class="icon icon-view-<%= viewMode.name %>"></span>\n\t\t\t<span class="viewmode-title"><%= viewMode.title %></span>\n\t</div>\n<%\n})\n%>\n'},3619:function(e){e.exports='<%\nviewModeList.forEach(function(viewMode) {\n\tvar selected = model.get("viewMode") === viewMode.name;\n%>\n<div\n\tclass="icon-container mode <%= selected ? \'selected\' : \'\' %>"\n\tdata-cid="<%= viewMode.name %>"\n\ttitle="<%= viewMode.title %>">\n\t\t<span class="icon icon-view-<%= viewMode.name %>"></span>\n</div>\n<%\n})\n%>\n'},8731:function(e){e.exports='<div class="sj-list-checker-items"></div>\n'},7288:function(e){e.exports='<li class="sj-navigation-item" data-name="<%= item.name %>">\n\t<a>\n\t\t<% if (item.icon) { %>\n\t\t<span class="inline-icon"><%= item.icon %></span>\n\t\t<% } else if (item.iconClass) { %>\n\t\t<span class="icon <%= item.iconClass %>"></span>\n\t\t<% } %>\n\t\t<span class="label"><%= item.label() %></span>\n\t</a>\n\n\t<% if (items.length) { %>\n\t<ul class="sj-navigation-group">\n\t\t<%= items.join("") %>\n\t</ul>\n\t<% } %>\n</li>\n'},9455:function(e){e.exports='<span class="icon icon-overlay-error"></span>\n<p><%= message %></p>\n<div class="ok-button-target"></div>\n'},8581:function(e){e.exports='<% if (options.isModal) { %>\n\t<div class="sj-overlay-cover"></div>\n<% } %>\n<div class="sj-overlay-content">\n\t<div class="sj-overlay-body">\n\n\t<% if (options.canClose) { %>\n\t\t<span data-action="close-overlay" class="sj-overlay-close icon-overlay-close"></span>\n\t<% } %>\n\t</div>\n\t<div class="sj-overlay-loading-cover">\n\t\t<span class="icon icon-loading"></span>\n\t</div>\n</div>\n'},4022:function(e){e.exports='<span class="icon icon-loading"></span><span class="wait-overlay-message"><%= message %></span>\n'},6452:function(e){e.exports='<li class="<%= className %>">\n\t<label>\n\t\t<input type="radio" name="<%= name %>" value="<%= value %>">\n\t\t<div class="check"></div>\n\t\t<%= itemHtml %>\n\t</label>\n</li>\n'},4938:function(e){e.exports='<div class="sj-tooltip-body sj-selectable"><%= body %></div>\n<div class="sj-tooltip-tip"></div>\n'},5430:function(e){e.exports='<% options.forEach(function(opt) { %>\n\t<li data-lang="<%= opt.value %>" class="<%= opt.selected ? \'selected\': \'\' %>">\n\t\t<span class="label"><%= opt.text %></span>\n\t</li>\n<% }); %>\n'},8873:function(e){e.exports='<div class="overlay-header">\n\t<span class="app-logo-wrapper"><%= logo %></span>\n\t<span class="display-name" title="<%- fileDisplayName %>"><%- fileDisplayName %></span>\n\t<span class="close-wrapper">\n\t\t<span data-action="close-overlay" class="office-editor-close icon-overlay-inverted-close"></span>\n\t</span>\n</div>\n<% if (showTopbar) { %>\n<div class="topbar-wrapper"></div>\n<% } %>\n<div class="sj-overlay-loading-cover">\n\t<span class="icon icon-loading"></span>\n</div>\n<div class="office-editor-content">\n</div>\n'},4716:function(e){e.exports='<form\n\taction="<%= url %>"\n\tenctype="multipart/form-data"\n\tmethod="post"\n\ttarget="collabora-online-viewer">\n\t\t<input name="access_token" value="<%= accessToken %>" type="hidden" />\n</form>\n<iframe name="collabora-online-viewer" allowfullscreen></iframe>\n'},1209:function(e){e.exports='<div class="overlay-title"><%= lang.get("order.office.dialog.caption") %></div>\n<p class="teaser"><%= lang.get("order.office.dialog.teaser") %></p>\n\n<%= officeSVG %>\n<ul>\n\t<li><%= lang.get("order.office.dialog.text.1") %></li>\n\t<li><%= lang.get("order.office.dialog.text.2") %></li>\n\t<li><%= lang.get("order.office.dialog.text.3") %></li>\n</ul>\n<div class="overlay-buttons">\n\t<div class="order-button-target"></div>\n\t<div class="close-button-target"></div>\n</div>\n'},7285:function(e){e.exports='<span role="button" class="close" data-qa="office_upgrade_hide">\n\t<span class="icon icon-topbar-hide"></span>\n\t<span class="text"><%- lang.get("common.hide") %></span>\n</span>\n<div class="message"><%- lang.get("order.office.topbar.teaser") %></div>\n<div class="upgrade-target"></div>\n'}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,i,n,o){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],o=e[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](i[l])}))?i.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,n,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.j=18,function(){var e={18:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],a=i[1],l=i[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)var c=l(r)}for(t&&t(i);d<s.length;d++)o=s[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},i=self.webpackChunkhidrivetools=self.webpackChunkhidrivetools||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var n=r.O(void 0,[906,5],(function(){return r(1851)}));n=r.O(n)}();
//# sourceMappingURL=hdshare.6d5c656ec3ecb8f371ed.js.map